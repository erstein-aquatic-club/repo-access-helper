import{c as _,a as k}from"./index-DgvzYmay.js";import{r as i,j as r}from"./vendor-ui-DJQMR4VV.js";import{M as F,i as T,u as $,P as W,b as D,c as H,L as K,m as L,d as U}from"./animations-BTr26p-C.js";import{d as q}from"./design-tokens-CGMys_0P.js";import{L as G}from"./loader-circle-D1Wl_hf5.js";import{C as V}from"./circle-check-B-rSo1fy.js";import{C as X}from"./circle-alert-CGnppayH.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],de=_("chevron-right",J);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fe=_("info",O);function I(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function Q(...e){return o=>{let n=!1;const s=e.map(c=>{const t=I(c,o);return!n&&typeof t=="function"&&(n=!0),t});if(n)return()=>{for(let c=0;c<s.length;c++){const t=s[c];typeof t=="function"?t():I(e[c],null)}}}}function Y(...e){return i.useCallback(Q(...e),e)}class Z extends i.Component{getSnapshotBeforeUpdate(o){const n=this.props.childRef.current;if(n&&o.isPresent&&!this.props.isPresent){const s=n.offsetParent,c=T(s)&&s.offsetWidth||0,t=this.props.sizeRef.current;t.height=n.offsetHeight||0,t.width=n.offsetWidth||0,t.top=n.offsetTop,t.left=n.offsetLeft,t.right=c-t.width-t.left}return null}componentDidUpdate(){}render(){return this.props.children}}function S({children:e,isPresent:o,anchorX:n,root:s}){const c=i.useId(),t=i.useRef(null),h=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=i.useContext(F),j=Y(t,e?.ref);return i.useInsertionEffect(()=>{const{width:a,height:y,top:l,left:u,right:m}=h.current;if(o||!t.current||!a||!y)return;const x=n==="left"?`left: ${u}`:`right: ${m}`;t.current.dataset.motionPopId=c;const f=document.createElement("style");C&&(f.nonce=C);const w=s??document.head;return w.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${y}px !important;
            ${x}px !important;
            top: ${l}px !important;
          }
        `),()=>{w.contains(f)&&w.removeChild(f)}},[o]),r.jsx(Z,{isPresent:o,childRef:t,sizeRef:h,children:i.cloneElement(e,{ref:j})})}const ee=({children:e,initial:o,isPresent:n,onExitComplete:s,custom:c,presenceAffectsLayout:t,mode:h,anchorX:C,root:j})=>{const a=$(te),y=i.useId();let l=!0,u=i.useMemo(()=>(l=!1,{id:y,initial:o,isPresent:n,custom:c,onExitComplete:m=>{a.set(m,!0);for(const x of a.values())if(!x)return;s&&s()},register:m=>(a.set(m,!1),()=>a.delete(m))}),[n,a,s]);return t&&l&&(u={...u}),i.useMemo(()=>{a.forEach((m,x)=>a.set(x,!1))},[n]),i.useEffect(()=>{!n&&!a.size&&s&&s()},[n]),h==="popLayout"&&(e=r.jsx(S,{isPresent:n,anchorX:C,root:j,children:e})),r.jsx(W.Provider,{value:u,children:e})};function te(){return new Map}const R=e=>e.key||"";function N(e){const o=[];return i.Children.forEach(e,n=>{i.isValidElement(n)&&o.push(n)}),o}const ne=({children:e,custom:o,initial:n=!0,onExitComplete:s,presenceAffectsLayout:c=!0,mode:t="sync",propagate:h=!1,anchorX:C="left",root:j})=>{const[a,y]=D(h),l=i.useMemo(()=>N(e),[e]),u=h&&!a?[]:l.map(R),m=i.useRef(!0),x=i.useRef(l),f=$(()=>new Map),[w,z]=i.useState(l),[g,P]=i.useState(l);H(()=>{m.current=!1,x.current=l;for(let p=0;p<g.length;p++){const d=R(g[p]);u.includes(d)?f.delete(d):f.get(d)!==!0&&f.set(d,!1)}},[g,u.length,u.join("-")]);const v=[];if(l!==w){let p=[...l];for(let d=0;d<g.length;d++){const b=g[d],E=R(b);u.includes(E)||(p.splice(d,0,b),v.push(b))}return t==="wait"&&v.length&&(p=v),P(N(p)),z(l),null}const{forceRender:A}=i.useContext(K);return r.jsx(r.Fragment,{children:g.map(p=>{const d=R(p),b=h&&!a?!1:l===g||u.includes(d),E=()=>{if(f.has(d))f.set(d,!0);else return;let M=!0;f.forEach(B=>{B||(M=!1)}),M&&(A?.(),P(x.current),h&&y?.(),s&&s())};return r.jsx(ee,{isPresent:b,initial:!m.current||n?void 0:!1,custom:o,presenceAffectsLayout:c,mode:t,root:j,onExitComplete:b?void 0:E,anchorX:C,children:p},d)})})};function ue({children:e,className:o,containerClassName:n,saveState:s="idle",saveMessage:c,position:t="fixed"}){return r.jsxs("div",{role:"region","aria-label":"Actions",className:k(t==="fixed"?"fixed bottom-16 left-0 right-0 z-bar md:bottom-0 md:z-bar":"shrink-0",o),children:[r.jsx(ne,{mode:"wait",children:s!=="idle"&&r.jsxs(L.div,{variants:s==="saved"?U:void 0,initial:"hidden",animate:"visible",exit:{opacity:0,scale:.8},className:k("mx-auto mb-2 flex max-w-md items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-medium shadow-lg motion-reduce:animate-none",s==="saving"&&"bg-muted text-muted-foreground",s==="saved"&&"bg-status-success text-white",s==="error"&&"bg-destructive text-destructive-foreground"),role:"status","aria-live":"polite",children:[s==="saving"&&r.jsxs(r.Fragment,{children:[r.jsx(G,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:c||"Enregistrement..."})]}),s==="saved"&&r.jsxs(r.Fragment,{children:[r.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:q.fast,type:"spring",stiffness:300},children:r.jsx(V,{className:"h-4 w-4"})}),r.jsx("span",{children:c||"Enregistr√©"})]}),s==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(X,{className:"h-4 w-4"}),r.jsx("span",{children:c||"Erreur lors de l'enregistrement"})]})]},s)}),r.jsx("div",{className:k("flex w-full items-center justify-between gap-2 border-t bg-background px-4 py-3",t==="fixed"&&"mx-auto max-w-md shadow-[0_-2px_10px_rgba(0,0,0,0.1)]",t==="fixed"&&"md:supports-[padding:env(safe-area-inset-bottom)]:pb-[calc(env(safe-area-inset-bottom)+0.75rem)]",t==="static"&&"supports-[padding:env(safe-area-inset-bottom)]:pb-[calc(env(safe-area-inset-bottom)+0.75rem)]",n),children:e})]})}export{ne as A,ue as B,de as C,fe as I};
