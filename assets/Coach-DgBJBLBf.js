const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StrengthCatalog-BY8_us4S.js","assets/vendor-ui-DJQMR4VV.js","assets/vendor-react-BzrpNAyj.js","assets/vendor-query-BT4y-huw.js","assets/index-C18qtVDS.js","assets/vendor-charts-Db4xOvcx.js","assets/vendor-supabase-D7B1G6YZ.js","assets/index-RrqHCd25.css","assets/select-CrQGrtAw.js","assets/chevron-up-C7Xjxtpe.js","assets/check-ChDg4Q6Z.js","assets/circle-C4dDE51D.js","assets/textarea-BTCnJlp1.js","assets/dialog-CuDbmsm9.js","assets/checkbox-DJQs5AcC.js","assets/alert-dialog-aIpgb6yW.js","assets/tabs-KlnvZ4xt.js","assets/SessionListView-C5XWBtxp.js","assets/chevron-left-BNPYTbxW.js","assets/save-BmTMs7mA.js","assets/circle-alert-DGqoE1kD.js","assets/trash-2-D4Tllxpm.js","assets/chevron-right-CzUfUqbi.js","assets/loader-circle-2eQo1lL_.js","assets/search-DZOaFr3N.js","assets/pen-B7U6_grt.js","assets/badge-BaCi3VOi.js","assets/arrow-left-dHVYWvMA.js","assets/SwimCatalog-CgycARcO.js","assets/SwimSessionConsultation-kfNipVQO.js","assets/timer-Dh_DFCLg.js","assets/vendor-date-cQbdWov0.js"])))=>i.map(i=>d[i]);
import{c as Te,k as hs,a as le,B as M,f as fe,d as P,C as J,g as Z,h as X,l as Y,i as ee,L as E,I as pe,M as he,u as Pe,b as xs,U as ge,P as Se,m as vs,W as js,D as bs,T as ys,_ as ke}from"./index-C18qtVDS.js";import{r as c,b as xe,h as ve,j as e,l as se,R as k,d as Ee,m as Me,I as Ns,n as Cs,o as _s,c as ws,p as Ie,q as Ps,s as Ss,u as De,A as $e,t as Fe,v as Rs,w as As,x as Ts,y as ks,F as Es,D as Ms,z as Is,B as Ds}from"./vendor-ui-DJQMR4VV.js";import{c as je,u as V,b as $s}from"./vendor-query-BT4y-huw.js";import{B as Fs}from"./badge-BaCi3VOi.js";import{A as Os}from"./arrow-left-dHVYWvMA.js";import{C as Gs}from"./checkbox-DJQs5AcC.js";import{S as L,a as B,b as q,c as H,d as C}from"./select-CrQGrtAw.js";import{C as zs}from"./chevron-up-C7Xjxtpe.js";import{T as Vs}from"./textarea-BTCnJlp1.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ae=Te("bell",Ls);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}],["path",{d:"M3.22 13H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"auskq0"}]],qs=Te("heart-pulse",Bs);function Hs(s,r,{checkForDefaultPrevented:n=!0}={}){return function(t){if(s?.(t),n===!1||!t.defaultPrevented)return r?.(t)}}var Ks=xe[" useInsertionEffect ".trim().toString()]||ve;function Us({prop:s,defaultProp:r,onChange:n=()=>{},caller:o}){const[t,i,d]=Ws({defaultProp:r,onChange:n}),l=s!==void 0,g=l?s:t;{const u=c.useRef(s!==void 0);c.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${o} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,o])}const f=c.useCallback(u=>{if(l){const m=Qs(u)?u(s):u;m!==s&&d.current?.(m)}else i(u)},[l,s,i,d]);return[g,f]}function Ws({defaultProp:s,onChange:r}){const[n,o]=c.useState(s),t=c.useRef(n),i=c.useRef(r);return Ks(()=>{i.current=r},[r]),c.useEffect(()=>{t.current!==n&&(i.current?.(n),t.current=n)},[n,t]),[n,o,i]}function Qs(s){return typeof s=="function"}var Oe="Toggle",be=c.forwardRef((s,r)=>{const{pressed:n,defaultPressed:o,onPressedChange:t,...i}=s,[d,l]=Us({prop:n,onChange:t,defaultProp:o??!1,caller:Oe});return e.jsx(se.button,{type:"button","aria-pressed":d,"data-state":d?"on":"off","data-disabled":s.disabled?"":void 0,...i,ref:r,onClick:Hs(s.onClick,()=>{s.disabled||l(!d)})})});be.displayName=Oe;var Ge=be,Js=xe[" useInsertionEffect ".trim().toString()]||ve;function ze({prop:s,defaultProp:r,onChange:n=()=>{},caller:o}){const[t,i,d]=Zs({defaultProp:r,onChange:n}),l=s!==void 0,g=l?s:t;{const u=c.useRef(s!==void 0);c.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${o} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,o])}const f=c.useCallback(u=>{if(l){const m=Xs(u)?u(s):u;m!==s&&d.current?.(m)}else i(u)},[l,s,i,d]);return[g,f]}function Zs({defaultProp:s,onChange:r}){const[n,o]=c.useState(s),t=c.useRef(n),i=c.useRef(r);return Js(()=>{i.current=r},[r]),c.useEffect(()=>{t.current!==n&&(i.current?.(n),t.current=n)},[n,t]),[n,o,i]}function Xs(s){return typeof s=="function"}var $="ToggleGroup",[Ve]=Ee($,[Me]),Le=Me(),ye=k.forwardRef((s,r)=>{const{type:n,...o}=s;if(n==="single"){const t=o;return e.jsx(Ys,{...t,ref:r})}if(n==="multiple"){const t=o;return e.jsx(et,{...t,ref:r})}throw new Error(`Missing prop \`type\` expected on \`${$}\``)});ye.displayName=$;var[Be,qe]=Ve($),Ys=k.forwardRef((s,r)=>{const{value:n,defaultValue:o,onValueChange:t=()=>{},...i}=s,[d,l]=ze({prop:n,defaultProp:o??"",onChange:t,caller:$});return e.jsx(Be,{scope:s.__scopeToggleGroup,type:"single",value:k.useMemo(()=>d?[d]:[],[d]),onItemActivate:l,onItemDeactivate:k.useCallback(()=>l(""),[l]),children:e.jsx(He,{...i,ref:r})})}),et=k.forwardRef((s,r)=>{const{value:n,defaultValue:o,onValueChange:t=()=>{},...i}=s,[d,l]=ze({prop:n,defaultProp:o??[],onChange:t,caller:$}),g=k.useCallback(u=>l((m=[])=>[...m,u]),[l]),f=k.useCallback(u=>l((m=[])=>m.filter(x=>x!==u)),[l]);return e.jsx(Be,{scope:s.__scopeToggleGroup,type:"multiple",value:d,onItemActivate:g,onItemDeactivate:f,children:e.jsx(He,{...i,ref:r})})});ye.displayName=$;var[st,tt]=Ve($),He=k.forwardRef((s,r)=>{const{__scopeToggleGroup:n,disabled:o=!1,rovingFocus:t=!0,orientation:i,dir:d,loop:l=!0,...g}=s,f=Le(n),u=Cs(d),m={role:"group",dir:u,...g};return e.jsx(st,{scope:n,rovingFocus:t,disabled:o,children:t?e.jsx(_s,{asChild:!0,...f,orientation:i,dir:u,loop:l,children:e.jsx(se.div,{...m,ref:r})}):e.jsx(se.div,{...m,ref:r})})}),ie="ToggleGroupItem",Ke=k.forwardRef((s,r)=>{const n=qe(ie,s.__scopeToggleGroup),o=tt(ie,s.__scopeToggleGroup),t=Le(s.__scopeToggleGroup),i=n.value.includes(s.value),d=o.disabled||s.disabled,l={...s,pressed:i,disabled:d},g=k.useRef(null);return o.rovingFocus?e.jsx(Ns,{asChild:!0,...t,focusable:!d,active:i,ref:g,children:e.jsx(Re,{...l,ref:r})}):e.jsx(Re,{...l,ref:r})});Ke.displayName=ie;var Re=k.forwardRef((s,r)=>{const{__scopeToggleGroup:n,value:o,...t}=s,i=qe(ie,n),d={role:"radio","aria-checked":s.pressed,"aria-pressed":void 0},l=i.type==="single"?d:void 0;return e.jsx(be,{...l,...t,ref:r,onPressedChange:g=>{g?i.onItemActivate(o):i.onItemDeactivate(o)}})}),Ue=ye,We=Ke;const Qe=hs("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),nt=c.forwardRef(({className:s,variant:r,size:n,...o},t)=>e.jsx(Ge,{ref:t,className:le(Qe({variant:r,size:n,className:s})),...o}));nt.displayName=Ge.displayName;const Je=c.createContext({size:"default",variant:"default"}),Ze=c.forwardRef(({className:s,variant:r,size:n,children:o,...t},i)=>e.jsx(Ue,{ref:i,className:le("flex items-center justify-center gap-1",s),...t,children:e.jsx(Je.Provider,{value:{variant:r,size:n},children:o})}));Ze.displayName=Ue.displayName;const re=c.forwardRef(({className:s,children:r,variant:n,size:o,...t},i)=>{const d=c.useContext(Je);return e.jsx(We,{ref:i,className:le(Qe({variant:d.variant||n,size:d.size||o}),s),...t,children:r})});re.displayName=We.displayName;const W=({title:s,description:r,onBack:n,actions:o})=>e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs(M,{variant:"ghost",size:"sm",className:"-ml-2",onClick:n,children:[e.jsx(Os,{className:"mr-2 h-4 w-4"}),"Retour à l'accueil"]}),e.jsx("h2",{className:"text-2xl font-display font-semibold uppercase italic text-primary",children:s}),r?e.jsx("p",{className:"text-sm text-muted-foreground",children:r}):null]}),o?e.jsx("div",{className:"flex items-center gap-2",children:o}):null]});function Q(s,r,{checkForDefaultPrevented:n=!0}={}){return function(t){if(s?.(t),n===!1||!t.defaultPrevented)return r?.(t)}}function ot(s){const r=rt(s),n=c.forwardRef((o,t)=>{const{children:i,...d}=o,l=c.Children.toArray(i),g=l.find(it);if(g){const f=g.props.children,u=l.map(m=>m===g?c.Children.count(f)>1?c.Children.only(null):c.isValidElement(f)?f.props.children:null:m);return e.jsx(r,{...d,ref:t,children:c.isValidElement(f)?c.cloneElement(f,void 0,u):null})}return e.jsx(r,{...d,ref:t,children:i})});return n.displayName=`${s}.Slot`,n}function rt(s){const r=c.forwardRef((n,o)=>{const{children:t,...i}=n;if(c.isValidElement(t)){const d=ct(t),l=lt(i,t.props);return t.type!==c.Fragment&&(l.ref=o?ws(o,d):d),c.cloneElement(t,l)}return c.Children.count(t)>1?c.Children.only(null):null});return r.displayName=`${s}.SlotClone`,r}var at=Symbol("radix.slottable");function it(s){return c.isValidElement(s)&&typeof s.type=="function"&&"__radixId"in s.type&&s.type.__radixId===at}function lt(s,r){const n={...r};for(const o in r){const t=s[o],i=r[o];/^on[A-Z]/.test(o)?t&&i?n[o]=(...l)=>{const g=i(...l);return t(...l),g}:t&&(n[o]=t):o==="style"?n[o]={...t,...i}:o==="className"&&(n[o]=[t,i].filter(Boolean).join(" "))}return{...s,...n}}function ct(s){let r=Object.getOwnPropertyDescriptor(s.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?s.ref:(r=Object.getOwnPropertyDescriptor(s,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?s.props.ref:s.props.ref||s.ref)}var dt=xe[" useInsertionEffect ".trim().toString()]||ve;function ut({prop:s,defaultProp:r,onChange:n=()=>{},caller:o}){const[t,i,d]=mt({defaultProp:r,onChange:n}),l=s!==void 0,g=l?s:t;{const u=c.useRef(s!==void 0);c.useEffect(()=>{const m=u.current;m!==l&&console.warn(`${o} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=l},[l,o])}const f=c.useCallback(u=>{if(l){const m=pt(u)?u(s):u;m!==s&&d.current?.(m)}else i(u)},[l,s,i,d]);return[g,f]}function mt({defaultProp:s,onChange:r}){const[n,o]=c.useState(s),t=c.useRef(n),i=c.useRef(r);return dt(()=>{i.current=r},[r]),c.useEffect(()=>{t.current!==n&&(i.current?.(n),t.current=n)},[n,t]),[n,o,i]}function pt(s){return typeof s=="function"}var ce="Popover",[Xe]=Ee(ce,[Ie]),te=Ie(),[gt,F]=Xe(ce),Ye=s=>{const{__scopePopover:r,children:n,open:o,defaultOpen:t,onOpenChange:i,modal:d=!1}=s,l=te(r),g=c.useRef(null),[f,u]=c.useState(!1),[m,x]=ut({prop:o,defaultProp:t??!1,onChange:i,caller:ce});return e.jsx(Ps,{...l,children:e.jsx(gt,{scope:r,contentId:Ss(),triggerRef:g,open:m,onOpenChange:x,onOpenToggle:c.useCallback(()=>x(b=>!b),[x]),hasCustomAnchor:f,onCustomAnchorAdd:c.useCallback(()=>u(!0),[]),onCustomAnchorRemove:c.useCallback(()=>u(!1),[]),modal:d,children:n})})};Ye.displayName=ce;var es="PopoverAnchor",ft=c.forwardRef((s,r)=>{const{__scopePopover:n,...o}=s,t=F(es,n),i=te(n),{onCustomAnchorAdd:d,onCustomAnchorRemove:l}=t;return c.useEffect(()=>(d(),()=>l()),[d,l]),e.jsx($e,{...i,...o,ref:r})});ft.displayName=es;var ss="PopoverTrigger",ts=c.forwardRef((s,r)=>{const{__scopePopover:n,...o}=s,t=F(ss,n),i=te(n),d=De(r,t.triggerRef),l=e.jsx(se.button,{type:"button","aria-haspopup":"dialog","aria-expanded":t.open,"aria-controls":t.contentId,"data-state":is(t.open),...o,ref:d,onClick:Q(s.onClick,t.onOpenToggle)});return t.hasCustomAnchor?l:e.jsx($e,{asChild:!0,...i,children:l})});ts.displayName=ss;var Ne="PopoverPortal",[ht,xt]=Xe(Ne,{forceMount:void 0}),ns=s=>{const{__scopePopover:r,forceMount:n,children:o,container:t}=s,i=F(Ne,r);return e.jsx(ht,{scope:r,forceMount:n,children:e.jsx(Fe,{present:n||i.open,children:e.jsx(Rs,{asChild:!0,container:t,children:o})})})};ns.displayName=Ne;var K="PopoverContent",os=c.forwardRef((s,r)=>{const n=xt(K,s.__scopePopover),{forceMount:o=n.forceMount,...t}=s,i=F(K,s.__scopePopover);return e.jsx(Fe,{present:o||i.open,children:i.modal?e.jsx(jt,{...t,ref:r}):e.jsx(bt,{...t,ref:r})})});os.displayName=K;var vt=ot("PopoverContent.RemoveScroll"),jt=c.forwardRef((s,r)=>{const n=F(K,s.__scopePopover),o=c.useRef(null),t=De(r,o),i=c.useRef(!1);return c.useEffect(()=>{const d=o.current;if(d)return As(d)},[]),e.jsx(Ts,{as:vt,allowPinchZoom:!0,children:e.jsx(rs,{...s,ref:t,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Q(s.onCloseAutoFocus,d=>{d.preventDefault(),i.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Q(s.onPointerDownOutside,d=>{const l=d.detail.originalEvent,g=l.button===0&&l.ctrlKey===!0,f=l.button===2||g;i.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:Q(s.onFocusOutside,d=>d.preventDefault(),{checkForDefaultPrevented:!1})})})}),bt=c.forwardRef((s,r)=>{const n=F(K,s.__scopePopover),o=c.useRef(!1),t=c.useRef(!1);return e.jsx(rs,{...s,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{s.onCloseAutoFocus?.(i),i.defaultPrevented||(o.current||n.triggerRef.current?.focus(),i.preventDefault()),o.current=!1,t.current=!1},onInteractOutside:i=>{s.onInteractOutside?.(i),i.defaultPrevented||(o.current=!0,i.detail.originalEvent.type==="pointerdown"&&(t.current=!0));const d=i.target;n.triggerRef.current?.contains(d)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&t.current&&i.preventDefault()}})}),rs=c.forwardRef((s,r)=>{const{__scopePopover:n,trapFocus:o,onOpenAutoFocus:t,onCloseAutoFocus:i,disableOutsidePointerEvents:d,onEscapeKeyDown:l,onPointerDownOutside:g,onFocusOutside:f,onInteractOutside:u,...m}=s,x=F(K,n),b=te(n);return ks(),e.jsx(Es,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:t,onUnmountAutoFocus:i,children:e.jsx(Ms,{asChild:!0,disableOutsidePointerEvents:d,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:g,onFocusOutside:f,onDismiss:()=>x.onOpenChange(!1),children:e.jsx(Is,{"data-state":is(x.open),role:"dialog",id:x.contentId,...b,...m,ref:r,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),as="PopoverClose",yt=c.forwardRef((s,r)=>{const{__scopePopover:n,...o}=s,t=F(as,n);return e.jsx(se.button,{type:"button",...o,ref:r,onClick:Q(s.onClick,()=>t.onOpenChange(!1))})});yt.displayName=as;var Nt="PopoverArrow",Ct=c.forwardRef((s,r)=>{const{__scopePopover:n,...o}=s,t=te(n);return e.jsx(Ds,{...t,...o,ref:r})});Ct.displayName=Nt;function is(s){return s?"open":"closed"}var _t=Ye,wt=ts,Pt=ns,ls=os;const St=_t,Rt=wt,cs=c.forwardRef(({className:s,align:r="center",sideOffset:n=4,...o},t)=>e.jsx(Pt,{children:e.jsx(ls,{ref:t,align:r,sideOffset:n,className:le("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",s),...o})}));cs.displayName=ls.displayName;const At=({onBack:s,swimSessions:r,strengthSessions:n,athletes:o,groups:t})=>{const{toast:i}=fe(),[d,l]=c.useState({session_type:"swim",session_id:"",assigned_date:new Date().toISOString().split("T")[0],assigned_slot:"morning"}),[g,f]=c.useState(!1),[u,m]=c.useState("user"),[x,b]=c.useState(""),[h,_]=c.useState([]),p=a=>{const v=typeof a=="number"?a:Number(a);return Number.isFinite(v)&&v>0?v:null},S=c.useMemo(()=>o.map(a=>({value:a.id?`id:${a.id}`:`name:${a.display_name}`,label:a.group_label?`${a.display_name} · ${a.group_label}`:a.display_name,id:a.id,name:a.display_name})),[o]),N=c.useMemo(()=>new Map(S.map(a=>[a.value,a])),[S]),U=c.useMemo(()=>t.map(a=>{const v=p(a.id);return v?{...a,gid:v}:null}).filter(a=>!!a),[t]),I=c.useMemo(()=>U.filter(a=>h.includes(a.gid)),[U,h]),de=c.useMemo(()=>{if(I.length===0)return"Choisir des groupes";const a=I.slice(0,2).map(R=>R.name).join(", "),v=I.length>2?` +${I.length-2}`:"";return`${a}${v}`},[I]),z=je({mutationFn:async a=>P.assignments_create(a),onSuccess:()=>{i({title:"Séance assignée & notifiée"})},onError:a=>{const v="Impossible d'assigner la séance. Vérifiez les champs et réessayez.",R=a instanceof Error?a.message:typeof a=="string"?a:v;let A=R;const w=R.match(/HTTP \d+:\s*(\{.*\})/);if(w)try{A=JSON.parse(w[1])?.error||v}catch{A=v}i({title:"Erreur d'assignation",description:A})}}),ue=async()=>{const a=Number(d.session_id);if(!Number.isInteger(a)||a<=0){i({title:"Séance invalide",description:"Sélectionnez une séance valide."});return}if(u==="group"){if(h.length===0){i({title:"Groupe manquant",description:"Sélectionnez au moins un groupe."});return}f(!0);try{const T={assignment_type:d.session_type,session_id:a,scheduled_date:d.assigned_date,scheduled_slot:d.assigned_slot},O=Array.from(new Set(h));await Promise.all(O.map(y=>P.assignments_create({...T,target_group_id:y}))),i({title:"Séance assignée & notifiée"})}catch(T){const O="Impossible d'assigner la séance. Vérifiez les champs et réessayez.",y=T instanceof Error?T.message:typeof T=="string"?T:O;let G=y;const oe=y.match(/HTTP \d+:\s*(\{.*\})/);if(oe)try{G=JSON.parse(oe[1])?.error||O}catch{G=O}i({title:"Erreur d'assignation",description:G})}finally{f(!1)}return}const v=x.trim();if(!v){i({title:"Nageur manquant",description:"Sélectionnez un nageur."});return}const R=N.get(v),A=R?.id??(Number.isFinite(Number(v))&&Number(v)>0?Number(v):void 0);if(!Number.isFinite(A)||Number(A)<=0){i({title:"Nageur invalide",description:"Sélectionnez un nageur avec un identifiant valide."});return}const w=R?.name??v.replace(/^name:/,"");z.mutate({assignment_type:d.session_type,session_id:a,target_athlete:w,target_user_id:A,scheduled_date:d.assigned_date,scheduled_slot:d.assigned_slot})},ne=!d.session_id||(u==="group"?h.length===0:!x.trim())||z.isPending||g;return e.jsxs("div",{className:"space-y-6 pb-24",children:[e.jsx(W,{title:"Assigner une séance",description:"Planifiez une séance pour un nageur ou un ou plusieurs groupes.",onBack:s}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(J,{className:"border-l-4 border-l-primary",children:[e.jsxs(Z,{children:[e.jsx(X,{children:"Séance"}),e.jsx(Y,{children:"Choisissez le type et la séance à envoyer."})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Type"}),e.jsxs(L,{value:d.session_type,onValueChange:a=>l({...d,session_type:a,session_id:""}),children:[e.jsx(B,{children:e.jsx(q,{})}),e.jsxs(H,{children:[e.jsx(C,{value:"swim",children:"Natation"}),e.jsx(C,{value:"strength",children:"Musculation"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Séance"}),e.jsxs(L,{value:d.session_id,onValueChange:a=>l({...d,session_id:a}),children:[e.jsx(B,{children:e.jsx(q,{placeholder:"Choisir..."})}),e.jsx(H,{children:d.session_type==="swim"?r?.map(a=>e.jsx(C,{value:a.id.toString(),children:a.name},a.id)):n?.map(a=>e.jsx(C,{value:a.id.toString(),children:a.title},a.id))})]})]})]})]}),e.jsxs(J,{children:[e.jsxs(Z,{children:[e.jsx(X,{children:"Cible & planification"}),e.jsx(Y,{children:"Définissez le destinataire, la date et le créneau."})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Cible"}),e.jsxs(L,{value:u,onValueChange:a=>{m(a),b(""),_([])},children:[e.jsx(B,{children:e.jsx(q,{})}),e.jsxs(H,{children:[e.jsx(C,{value:"user",children:"Nageur"}),e.jsx(C,{value:"group",children:"Groupe(s)"})]})]})]}),u==="user"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Nageur"}),S.length>0?e.jsxs(L,{value:x,onValueChange:b,children:[e.jsx(B,{children:e.jsx(q,{placeholder:"Choisir un nageur"})}),e.jsx(H,{children:S.map(a=>e.jsx(C,{value:a.value,children:a.label},a.value))})]}):e.jsx(pe,{value:x,onChange:a=>b(a.target.value),placeholder:"ex: Camille"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Groupes"}),t.length>0?e.jsxs(St,{children:[e.jsx(Rt,{asChild:!0,children:e.jsxs(M,{type:"button",variant:"outline",className:"w-full justify-between","aria-label":"Sélection des groupes",children:[e.jsx("span",{className:"truncate",children:de}),e.jsx(zs,{className:"ml-2 h-4 w-4 opacity-50"})]})}),e.jsxs(cs,{className:"w-[--radix-popover-trigger-width] p-2",align:"start",children:[e.jsx("div",{className:"max-h-64 overflow-auto",children:e.jsx("div",{className:"space-y-1",children:U.map(a=>{const v=h.includes(a.gid);return e.jsxs("label",{className:"flex cursor-pointer items-center gap-2 rounded-md px-2 py-1.5 hover:bg-muted",children:[e.jsx(Gs,{checked:v,onCheckedChange:R=>{const A=R===!0;_(w=>A?w.includes(a.gid)?w:[...w,a.gid]:w.filter(T=>T!==a.gid))}}),e.jsx("span",{className:"text-sm",children:a.name})]},a.gid)})})}),h.length>0?e.jsx(M,{type:"button",variant:"ghost",size:"sm",className:"mt-2 w-full",onClick:()=>_([]),children:"Tout désélectionner"}):null]})]}):e.jsx("div",{className:"text-xs text-muted-foreground",children:"Aucun groupe disponible."}),h.length>0?e.jsxs("div",{className:"text-xs text-muted-foreground",children:[h.length," groupe",h.length>1?"s":""," sélectionné",h.length>1?"s":"","."]}):null]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Date"}),e.jsx(pe,{type:"date",value:d.assigned_date,onChange:a=>l({...d,assigned_date:a.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Créneau"}),e.jsxs(L,{value:d.assigned_slot,onValueChange:a=>l({...d,assigned_slot:a}),children:[e.jsx(B,{children:e.jsx(q,{placeholder:"Choisir..."})}),e.jsxs(H,{children:[e.jsx(C,{value:"morning",children:"Matin"}),e.jsx(C,{value:"evening",children:"Soir"})]})]})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 z-10 -mx-4 border-t bg-background/95 p-4 backdrop-blur sm:static sm:mx-0 sm:border-0 sm:p-0",children:e.jsxs(M,{className:"w-full sm:w-auto",onClick:ue,disabled:ne,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),z.isPending||g?"Assignation...":"Assigner & notifier"]})})]})},Tt=({onBack:s,athletes:r,groups:n,athletesLoading:o})=>{const{toast:t}=fe(),[i,d]=c.useState(""),[l,g]=c.useState("Message Coach"),[f,u]=c.useState(""),m=c.useMemo(()=>r.filter(p=>p.id).map(p=>({value:`user:${p.id}`,label:p.group_label?`${p.display_name} · ${p.group_label}`:p.display_name,id:p.id})),[r]),x=c.useMemo(()=>n.map(p=>({value:`group:${p.id}`,label:p.name,id:p.id})),[n]),b=c.useMemo(()=>new Map([...m,...x].map(p=>[p.value,p])),[m,x]),h=je({mutationFn:p=>P.notifications_send({...p,type:"message"}),onSuccess:()=>{t({title:"Message envoyé"}),d("")}}),_=()=>{if(!l.trim()||!i.trim()){t({title:"Message incomplet",description:"Ajoutez un titre et un contenu."});return}if(!f){t({title:"Destinataire manquant",description:"Sélectionnez un nageur ou un groupe."});return}const p=b.get(f);if(!p?.id){t({title:"Destinataire invalide",description:"Sélectionnez un destinataire valide."});return}if(f.startsWith("group:")){h.mutate({title:l,body:i,targets:[{target_group_id:p.id}]});return}h.mutate({title:l,body:i,targets:[{target_user_id:p.id}]})};return e.jsxs("div",{className:"space-y-6 pb-24",children:[e.jsx(W,{title:"Messagerie rapide",description:"Envoyez un message ciblé à vos nageurs.",onBack:s}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs(J,{className:"border-l-4 border-l-primary",children:[e.jsxs(Z,{children:[e.jsx(X,{children:"Destinataire"}),e.jsx(Y,{children:"Sélectionnez un nageur ou un groupe à prévenir."})]}),e.jsx(ee,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{children:"Destinataire"}),e.jsxs(L,{value:f,onValueChange:u,children:[e.jsx(B,{children:e.jsx(q,{placeholder:o?"Chargement...":"Choisir un nageur ou un groupe"})}),e.jsxs(H,{children:[x.length?e.jsxs(e.Fragment,{children:[e.jsx(C,{value:"section-group",disabled:!0,children:"Groupes"}),x.map(p=>e.jsx(C,{value:p.value,children:p.label},p.value))]}):null,m.length?e.jsxs(e.Fragment,{children:[e.jsx(C,{value:"section-athlete",disabled:!0,children:"Nageurs"}),m.map(p=>e.jsx(C,{value:p.value,children:p.label},p.value))]}):null]})]})]})})]}),e.jsxs(J,{children:[e.jsxs(Z,{children:[e.jsx(X,{children:"Contenu"}),e.jsx(Y,{children:"Rédigez votre message en quelques lignes."})]}),e.jsxs(ee,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"msg-title",children:"Titre"}),e.jsx(pe,{id:"msg-title",value:l,onChange:p=>g(p.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(E,{htmlFor:"msg-body",children:"Message"}),e.jsx(Vs,{id:"msg-body",placeholder:"Message...",value:i,onChange:p=>d(p.target.value),rows:5,maxLength:500}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[i.length,"/500"]})]})]})]})]}),e.jsx("div",{className:"sticky bottom-0 z-10 -mx-4 border-t bg-background/95 p-4 backdrop-blur sm:static sm:mx-0 sm:border-0 sm:p-0",children:e.jsxs(M,{className:"w-full sm:w-auto",onClick:_,disabled:h.isPending,children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),h.isPending?"Envoi...":"Envoyer"]})})]})},kt=c.lazy(()=>ke(()=>import("./StrengthCatalog-BY8_us4S.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),Et=c.lazy(()=>ke(()=>import("./SwimCatalog-CgycARcO.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,13,15,22,29,26,30,17,9,18,19,20,21,12,8,10,31,24]))),Mt=({onNavigate:s,onOpenRecordsAdmin:r,onOpenRecordsClub:n,athletes:o,athletesLoading:t,upcomingBirthdays:i,birthdaysLoading:d,kpiLoading:l,kpiPeriod:g,onKpiPeriodChange:f,fatigueAlerts:u,mostLoadedAthlete:m,swimSessionCount:x,strengthSessionCount:b})=>{const h=new Date().getHours(),_=h<12?"Bonjour":h<18?"Bon après-midi":"Bonsoir",p=new Date().toLocaleDateString("fr-FR",{weekday:"long",day:"numeric",month:"long"}),S=u.length>0;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-display font-bold uppercase italic",children:[_,", ",e.jsx("span",{className:"text-primary",children:"Coach"})]}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:p})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xs font-semibold uppercase tracking-[0.15em] text-muted-foreground",children:["Signaux · ",g,"j"]}),e.jsxs(Ze,{type:"single",size:"sm",variant:"outline",value:String(g),onValueChange:N=>{N&&f(Number(N))},children:[e.jsx(re,{value:"7",className:"h-7 px-2 text-xs","aria-label":"7 jours",children:"7j"}),e.jsx(re,{value:"30",className:"h-7 px-2 text-xs","aria-label":"30 jours",children:"30j"}),e.jsx(re,{value:"365",className:"h-7 px-2 text-xs","aria-label":"1 an",children:"1an"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:`rounded-xl border p-3 ${S?"border-destructive/30 bg-destructive/5":"bg-muted/30"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Fatigue 5/5"}),e.jsx(qs,{className:`h-3.5 w-3.5 ${S?"text-destructive":"text-muted-foreground"}`})]}),e.jsx("p",{className:"text-xl font-bold tabular-nums",children:l?"–":u.length}),e.jsx("p",{className:"text-[11px] text-muted-foreground truncate",children:l?"Chargement…":S?u.slice(0,2).map(N=>N.athleteName.split(" ")[0]).join(", "):"Aucune alerte"})]}),e.jsxs("div",{className:"rounded-xl border bg-muted/30 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Plus chargé"}),e.jsx(ge,{className:"h-3.5 w-3.5 text-muted-foreground"})]}),e.jsx("p",{className:"text-xl font-bold truncate",children:l?"–":m?.athleteName?.split(" ")[0]??"–"}),e.jsx("p",{className:"text-[11px] text-muted-foreground",children:l?"Calcul…":m?`Charge ${Math.round(m.loadScore)}`:"Pas de données"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>s("assignments"),className:"flex items-center gap-1.5 rounded-full bg-primary text-primary-foreground px-4 py-2 text-sm font-semibold active:opacity-80 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[e.jsx(ae,{className:"h-3.5 w-3.5"}),"Assigner"]}),e.jsxs("button",{type:"button",onClick:()=>s("messaging"),className:"flex items-center gap-1.5 rounded-full border px-4 py-2 text-sm font-semibold active:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[e.jsx(he,{className:"h-3.5 w-3.5"}),"Message"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>s("swim"),className:"rounded-xl border bg-card p-4 text-left shadow-sm active:bg-muted/50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[e.jsx(js,{className:"h-5 w-5 text-primary mb-2"}),e.jsx("p",{className:"text-sm font-bold",children:"Natation"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:x!=null?`${x} séance${x!==1?"s":""}`:"Bibliothèque"})]}),e.jsxs("button",{type:"button",onClick:()=>s("strength"),className:"rounded-xl border bg-card p-4 text-left shadow-sm active:bg-muted/50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[e.jsx(bs,{className:"h-5 w-5 text-primary mb-2"}),e.jsx("p",{className:"text-sm font-bold",children:"Musculation"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b!=null?`${b} séance${b!==1?"s":""}`:"Bibliothèque"})]}),e.jsxs("button",{type:"button",onClick:()=>s("swimmers"),className:"rounded-xl border bg-card p-4 text-left shadow-sm active:bg-muted/50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[e.jsx(ge,{className:"h-5 w-5 text-primary mb-2"}),e.jsx("p",{className:"text-sm font-bold",children:"Nageurs"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t?"Chargement…":`${o.length} nageur${o.length!==1?"s":""}`})]}),e.jsxs("button",{type:"button",onClick:r,className:"rounded-xl border bg-card p-4 text-left shadow-sm active:bg-muted/50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",children:[e.jsx(ys,{className:"h-5 w-5 text-primary mb-2"}),e.jsx("p",{className:"text-sm font-bold",children:"Records club"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Import & administration"})]})]}),e.jsx("button",{type:"button",onClick:n,className:"w-full text-center text-sm text-primary font-semibold py-1 active:opacity-70 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring rounded",children:"Voir les records du club"}),!d&&i&&i.length>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xs font-semibold uppercase tracking-[0.15em] text-muted-foreground",children:"Anniversaires"}),e.jsx("div",{className:"space-y-1.5",children:i.slice(0,3).map(N=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:N.display_name}),e.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:It(N.next_birthday)})]}),e.jsxs("span",{className:"text-xs font-bold text-primary",children:["J-",N.days_until]})]},N.id))})]}):null]})},It=s=>{if(!s)return"-";const r=new Date(s);return Number.isNaN(r.getTime())?s:r.toLocaleDateString("fr-FR")},Ae=s=>s.toISOString().split("T")[0],Dt=s=>new Date(s.completed_at||s.started_at||s.date||s.created_at||0).getTime(),$t=s=>{if(!s.length)return null;const r=s.reduce((o,t)=>o+t,0)/s.length,n=Math.min(5,Math.max(1,Math.round(r/10*5)));return{average:r,rating:n}};function Ft(){const s=Pe(a=>a.role),r=Pe(a=>a.setSelectedAthlete),[,n]=xs(),[o,t]=c.useState("home"),[i,d]=c.useState(7),l=s==="coach"||s==="admin",g=o==="home"||o==="assignments",f=o==="home"||o==="assignments"||o==="messaging"||o==="swimmers",u=o==="assignments"||o==="messaging",m=o==="home"||o==="swimmers",{data:x}=V({queryKey:["swim_catalog"],queryFn:()=>P.getSwimCatalog(),enabled:l&&g}),{data:b}=V({queryKey:["strength_catalog"],queryFn:()=>P.getStrengthSessions(),enabled:l&&g}),{data:h=[],isLoading:_}=V({queryKey:["athletes"],queryFn:()=>P.getAthletes(),enabled:l&&f}),p=c.useMemo(()=>h.slice(0,5),[h]),{data:S=[]}=V({queryKey:["groups"],queryFn:()=>P.getGroups(),enabled:l&&u}),N=V({queryKey:["upcoming-birthdays"],queryFn:()=>P.getUpcomingBirthdays({days:30}),enabled:l&&m}),U=N.data,I=V({queryKey:["coach-kpis",i,p.map(a=>a.id??a.display_name)],enabled:l&&o==="home"&&p.length>0,queryFn:async()=>{const a=i,v=new Date;v.setDate(v.getDate()-a);const R=Ae(v),A=Ae(new Date),w=await Promise.all(p.map(async y=>{const[G,oe]=await Promise.all([P.getSessions(y.display_name,y.id),P.getStrengthHistory(y.display_name,{athleteId:y.id,limit:50,from:R,to:A})]),me=G.filter(j=>new Date(j.date).getTime()>=v.getTime()),ds=me.map(j=>j.fatigue??j.feeling).filter(j=>Number.isFinite(j)),us=me.reduce((j,D)=>j+(Number(D.duration)||0)*(Number(D.effort)||0),0),Ce=(oe?.runs??[]).filter(j=>Dt(j)>=v.getTime()),ms=Ce.map(j=>j.fatigue??j.feeling??j.rpe).filter(j=>Number.isFinite(Number(j))).map(j=>Number(j)),ps=Ce.reduce((j,D)=>{const _e=Number(D.feeling??D.rpe??0),we=Number(D.duration??0);if(we>0&&_e>0)return j+we*_e;const fs=Array.isArray(D.logs)?D.logs.length:0;return j+fs*5},0),gs=$t([...ds,...ms]);return{athleteName:y.display_name,loadScore:us+ps,fatigueRating:gs}})),T=w.filter(y=>y.fatigueRating?.rating===5).map(y=>({athleteName:y.athleteName,rating:y.fatigueRating?.rating??0})),O=w.filter(y=>y.loadScore>0).sort((y,G)=>G.loadScore-y.loadScore)[0];return{fatigueAlerts:T,mostLoadedAthlete:O??null}}}),de=a=>{r({id:a.id??null,name:a.display_name}),n("/progress")},{toast:z}=fe(),ue=$s(),ne=je({mutationFn:async a=>{const v=await P.importSingleSwimmer(a.iuf,a.name);return await P.recalculateClubRecords(),v},onSuccess:a=>{z({title:"Import terminé",description:`${a.total_found} trouvées, ${a.new_imported} nouvelles.`}),ue.invalidateQueries({queryKey:["club-records"]})},onError:a=>{z({title:"Erreur import",description:a.message,variant:"destructive"})}});return l?e.jsxs("div",{className:"space-y-6",children:[o==="home"?e.jsx(Mt,{onNavigate:t,onOpenRecordsAdmin:()=>n("/records-admin"),onOpenRecordsClub:()=>n("/records-club"),athletes:h,athletesLoading:_,upcomingBirthdays:U,birthdaysLoading:N.isLoading,kpiLoading:I.isLoading,kpiPeriod:i,onKpiPeriodChange:d,fatigueAlerts:I.data?.fatigueAlerts??[],mostLoadedAthlete:I.data?.mostLoadedAthlete??null,swimSessionCount:x?.length,strengthSessionCount:b?.length}):null,o==="assignments"?e.jsx(At,{onBack:()=>t("home"),swimSessions:x,strengthSessions:b,athletes:h,groups:S}):null,o==="swim"?e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{title:"Bibliothèque natation",description:"Accédez aux séances et aux templates natation.",onBack:()=>t("home"),actions:e.jsxs(M,{variant:"outline",onClick:()=>t("assignments"),children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Nouvelle assignation"]})}),e.jsx(c.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(Et,{})})]}):null,o==="strength"?e.jsxs("div",{className:"space-y-6",children:[e.jsx(W,{title:"Bibliothèque musculation",description:"Consultez et créez des séances musculation.",onBack:()=>t("home"),actions:e.jsxs(M,{variant:"outline",onClick:()=>t("assignments"),children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Nouvelle assignation"]})}),e.jsx(c.Suspense,{fallback:e.jsx(Se,{}),children:e.jsx(kt,{})})]}):null,o==="swimmers"?e.jsxs("div",{className:"space-y-4",children:[e.jsx(W,{title:"Nageurs",description:_?"Chargement…":`${h.length} nageur${h.length!==1?"s":""} inscrit${h.length!==1?"s":""}`,onBack:()=>t("home"),actions:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>t("messaging"),children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Message"]})}),_?e.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(a=>e.jsx("div",{className:"rounded-xl border p-3 animate-pulse motion-reduce:animate-none",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-4 w-32 rounded bg-muted"}),e.jsx("div",{className:"ml-auto h-8 w-16 rounded bg-muted"})]})},a))}):h.length?e.jsx("div",{className:"space-y-2",children:h.map(a=>e.jsxs("div",{className:"flex items-center gap-3 rounded-xl border bg-card p-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-semibold truncate",children:a.display_name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.group_label?e.jsx(Fs,{variant:"secondary",className:"text-[10px] px-1.5 py-0",children:a.group_label}):null,a.ffn_iuf?e.jsx("span",{className:"text-[10px] font-mono text-muted-foreground",children:a.ffn_iuf}):null]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[a.ffn_iuf?e.jsx(M,{size:"icon",variant:"ghost",className:"h-8 w-8",disabled:ne.isPending,onClick:()=>ne.mutate({iuf:a.ffn_iuf,name:a.display_name}),title:"Importer performances FFN",children:e.jsx(vs,{className:"h-4 w-4"})}):null,e.jsx(M,{size:"sm",variant:"outline",onClick:()=>de(a),children:"Fiche"})]})]},a.id??a.display_name))}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"Aucun nageur disponible."})]}):null,o==="messaging"?e.jsx(Tt,{onBack:()=>t("home"),athletes:h,groups:S,athletesLoading:_}):null]}):e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] animate-in fade-in motion-reduce:animate-none",children:e.jsxs(J,{className:"w-full max-w-sm shadow-xl border-t-4 border-t-primary",children:[e.jsxs(Z,{children:[e.jsxs(X,{className:"flex items-center gap-2 uppercase italic",children:[e.jsx(ge,{className:"h-5 w-5 text-primary"}),"Accès Coach"]}),e.jsx(Y,{children:"Cette section est réservée aux coachs et administrateurs."})]}),e.jsx(ee,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Connectez-vous avec un compte autorisé pour accéder aux outils de gestion."})})]})})}const Wt=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));export{Wt as C,St as P,Rt as a,cs as b};
