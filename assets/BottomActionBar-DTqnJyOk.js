import{c as B,a as k}from"./index-CYPDYbNA.js";import{r as i,j as r}from"./vendor-ui-M0btmmZ9.js";import{c as F}from"./animations-CrcLFysI.js";import{d as T}from"./design-tokens-CKgCpdH6.js";import{M as W,i as D,u as N,P as H,a as K,b as U,L as G,m as L}from"./proxy-C_NwhSmp.js";import{L as V}from"./loader-circle-B4I_UwTr.js";import{C as X}from"./circle-check-BzVkpWGo.js";import{C as q}from"./circle-alert-fQiPvwsT.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fe=B("info",J);function I(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function O(...e){return o=>{let n=!1;const s=e.map(c=>{const t=I(c,o);return!n&&typeof t=="function"&&(n=!0),t});if(n)return()=>{for(let c=0;c<s.length;c++){const t=s[c];typeof t=="function"?t():I(e[c],null)}}}}function Q(...e){return i.useCallback(O(...e),e)}class Y extends i.Component{getSnapshotBeforeUpdate(o){const n=this.props.childRef.current;if(n&&o.isPresent&&!this.props.isPresent){const s=n.offsetParent,c=D(s)&&s.offsetWidth||0,t=this.props.sizeRef.current;t.height=n.offsetHeight||0,t.width=n.offsetWidth||0,t.top=n.offsetTop,t.left=n.offsetLeft,t.right=c-t.width-t.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Z({children:e,isPresent:o,anchorX:n,root:s}){const c=i.useId(),t=i.useRef(null),h=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=i.useContext(W),j=Q(t,e?.ref);return i.useInsertionEffect(()=>{const{width:a,height:y,top:l,left:u,right:m}=h.current;if(o||!t.current||!a||!y)return;const x=n==="left"?`left: ${u}`:`right: ${m}`;t.current.dataset.motionPopId=c;const d=document.createElement("style");C&&(d.nonce=C);const w=s??document.head;return w.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${y}px !important;
            ${x}px !important;
            top: ${l}px !important;
          }
        `),()=>{w.contains(d)&&w.removeChild(d)}},[o]),r.jsx(Y,{isPresent:o,childRef:t,sizeRef:h,children:i.cloneElement(e,{ref:j})})}const S=({children:e,initial:o,isPresent:n,onExitComplete:s,custom:c,presenceAffectsLayout:t,mode:h,anchorX:C,root:j})=>{const a=N(ee),y=i.useId();let l=!0,u=i.useMemo(()=>(l=!1,{id:y,initial:o,isPresent:n,custom:c,onExitComplete:m=>{a.set(m,!0);for(const x of a.values())if(!x)return;s&&s()},register:m=>(a.set(m,!1),()=>a.delete(m))}),[n,a,s]);return t&&l&&(u={...u}),i.useMemo(()=>{a.forEach((m,x)=>a.set(x,!1))},[n]),i.useEffect(()=>{!n&&!a.size&&s&&s()},[n]),h==="popLayout"&&(e=r.jsx(Z,{isPresent:n,anchorX:C,root:j,children:e})),r.jsx(H.Provider,{value:u,children:e})};function ee(){return new Map}const R=e=>e.key||"";function z(e){const o=[];return i.Children.forEach(e,n=>{i.isValidElement(n)&&o.push(n)}),o}const te=({children:e,custom:o,initial:n=!0,onExitComplete:s,presenceAffectsLayout:c=!0,mode:t="sync",propagate:h=!1,anchorX:C="left",root:j})=>{const[a,y]=K(h),l=i.useMemo(()=>z(e),[e]),u=h&&!a?[]:l.map(R),m=i.useRef(!0),x=i.useRef(l),d=N(()=>new Map),[w,$]=i.useState(l),[g,P]=i.useState(l);U(()=>{m.current=!1,x.current=l;for(let p=0;p<g.length;p++){const f=R(g[p]);u.includes(f)?d.delete(f):d.get(f)!==!0&&d.set(f,!1)}},[g,u.length,u.join("-")]);const v=[];if(l!==w){let p=[...l];for(let f=0;f<g.length;f++){const b=g[f],E=R(b);u.includes(E)||(p.splice(f,0,b),v.push(b))}return t==="wait"&&v.length&&(p=v),P(z(p)),$(l),null}const{forceRender:_}=i.useContext(G);return r.jsx(r.Fragment,{children:g.map(p=>{const f=R(p),b=h&&!a?!1:l===g||u.includes(f),E=()=>{if(d.has(f))d.set(f,!0);else return;let M=!0;d.forEach(A=>{A||(M=!1)}),M&&(_?.(),P(x.current),h&&y?.(),s&&s())};return r.jsx(S,{isPresent:b,initial:!m.current||n?void 0:!1,custom:o,presenceAffectsLayout:c,mode:t,root:j,onExitComplete:b?void 0:E,anchorX:C,children:p},f)})})};function de({children:e,className:o,containerClassName:n,saveState:s="idle",saveMessage:c,position:t="fixed"}){return r.jsxs("div",{role:"region","aria-label":"Actions",className:k(t==="fixed"?"fixed bottom-16 left-0 right-0 z-bar md:bottom-0 md:z-bar":"shrink-0",o),children:[r.jsx(te,{mode:"wait",children:s!=="idle"&&r.jsxs(L.div,{variants:s==="saved"?F:void 0,initial:"hidden",animate:"visible",exit:{opacity:0,scale:.8},className:k("mx-auto mb-2 flex max-w-md items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-medium shadow-lg motion-reduce:animate-none",s==="saving"&&"bg-muted text-muted-foreground",s==="saved"&&"bg-status-success text-white",s==="error"&&"bg-destructive text-destructive-foreground"),role:"status","aria-live":"polite",children:[s==="saving"&&r.jsxs(r.Fragment,{children:[r.jsx(V,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:c||"Enregistrement..."})]}),s==="saved"&&r.jsxs(r.Fragment,{children:[r.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:T.fast,type:"spring",stiffness:300},children:r.jsx(X,{className:"h-4 w-4"})}),r.jsx("span",{children:c||"Enregistr√©"})]}),s==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(q,{className:"h-4 w-4"}),r.jsx("span",{children:c||"Erreur lors de l'enregistrement"})]})]},s)}),r.jsx("div",{className:k("flex w-full items-center justify-between gap-2 border-t bg-background px-4 py-3",t==="fixed"&&"mx-auto max-w-md shadow-[0_-2px_10px_rgba(0,0,0,0.1)]",t==="fixed"&&"md:supports-[padding:env(safe-area-inset-bottom)]:pb-[calc(env(safe-area-inset-bottom)+0.75rem)]",t==="static"&&"supports-[padding:env(safe-area-inset-bottom)]:pb-[calc(env(safe-area-inset-bottom)+0.75rem)]",n),children:e})]})}export{te as A,de as B,fe as I};
