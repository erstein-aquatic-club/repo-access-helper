import{r as M,j as e}from"./vendor-query-BiSH4r2z.js";import{c as Q,a as d,F as s0,W as n0}from"./index-AQJx-bCr.js";import{C as r0}from"./chevron-up-BGsP-4NW.js";import{A as a0,H as i0}from"./hash-QQHAbZ0G.js";import{T as l0}from"./timer-9DmUOrks.js";import{E as o0}from"./eye-WKnicZbo.js";import{C as c0}from"./chevron-down-CCJpk06U.js";import{C as d0}from"./clock-sKbjSjJn.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],u0=Q("layers",p0);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],x0=Q("list",m0);function g0(t){const n=t.raw_payload??{},s=Number(n.exercise_repetitions);if(Number.isFinite(s)&&s>=1)return s;const o=(t.label??"").match(/^(\d+)\s*[x×]/i);return o?parseInt(o[1],10):1}function f0({item:t,log:n,onChange:s,onCollapse:a}){const o=g0(t),l=()=>Array.from({length:o},(i,c)=>{const x=n.split_times?.find(r=>r.rep===c+1);return{rep:c+1,time_seconds:x?.time_seconds??0}}),h=()=>Array.from({length:o},(i,c)=>{const x=n.stroke_count?.find(r=>r.rep===c+1);return{rep:c+1,count:x?.count??0}}),[y,v]=M.useState(l),[u,z]=M.useState(h),[C,V]=M.useState(()=>!!n.stroke_count?.some(i=>i.count>0)),b=M.useCallback(i=>{s({...n,...i})},[n,s]),k=i=>{const c=parseFloat(i);b({tempo:Number.isFinite(c)?c:null})},N=(i,c)=>{const x=parseFloat(c),r=y.map((g,m)=>m===i?{...g,time_seconds:Number.isFinite(x)?x:0}:g);v(r),b({split_times:r})},L=(i,c)=>{const x=parseInt(c,10),r=u.map((g,m)=>m===i?{...g,count:Number.isFinite(x)?x:0}:g);z(r),b({stroke_count:r})},_=i=>{b({notes:i||null})};return e.jsxs("div",{className:"border-t border-border/40 bg-muted/30 px-3 py-3 space-y-3 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Détails techniques"}),e.jsx("button",{type:"button",onClick:a,className:"p-1 rounded-md hover:bg-muted","aria-label":"Replier",children:e.jsx(r0,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a0,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground w-14",children:"Tempo"}),e.jsx("input",{type:"number",step:.1,inputMode:"decimal",placeholder:"c/min",value:n.tempo??"",onChange:i=>k(i.target.value),className:d("h-8 w-24 rounded-md border border-input bg-background px-2 text-sm","focus:outline-none focus:ring-1 focus:ring-ring")})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l0,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Temps par rep"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2 pl-6",children:y.map((i,c)=>e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Rep ",i.rep]}),e.jsx("input",{type:"number",step:.1,inputMode:"decimal",placeholder:"sec",value:i.time_seconds||"",onChange:x=>N(c,x.target.value),className:d("h-8 w-full rounded-md border border-input bg-background px-2 text-sm","focus:outline-none focus:ring-1 focus:ring-ring")})]},i.rep))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i0,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsxs("button",{type:"button",onClick:()=>V(i=>!i),className:"text-xs text-muted-foreground underline-offset-2 hover:underline",children:["Coups de bras ",C?"▾":"▸"]})]}),C&&e.jsx("div",{className:"grid grid-cols-3 gap-2 pl-6",children:u.map((i,c)=>e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Rep ",i.rep]}),e.jsx("input",{type:"number",inputMode:"numeric",placeholder:"coups",value:i.count||"",onChange:x=>L(c,x.target.value),className:d("h-8 w-full rounded-md border border-input bg-background px-2 text-sm","focus:outline-none focus:ring-1 focus:ring-ring")})]},i.rep))})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s0,{className:"h-4 w-4 shrink-0 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Notes"})]}),e.jsx("textarea",{rows:2,placeholder:"Notes libres...",value:n.notes??"",onChange:i=>_(i.target.value),className:d("w-full rounded-md border border-input bg-background px-2 py-1.5 text-sm resize-none ml-6","focus:outline-none focus:ring-1 focus:ring-ring")})]})]})}const b0=["V0","V1","V2","V3","Max","Prog"],H0={V0:"bg-intensity-1",V1:"bg-intensity-2",V2:"bg-intensity-3",V3:"bg-intensity-4",Max:"bg-intensity-5",Prog:"bg-intensity-prog"},h0=t=>t==="Max"?"MAX":t==="Prog"?"Prog ↗":t,K={souple:"V0",facile:"V0",relache:"V0",relâché:"V0"},y0={pap:"Pap",papillon:"Pap",crawl:"Crawl",dos:"Dos",brasse:"Brasse","4n":"4 nages","4 nages":"4 nages",spe:"Spé",spé:"Spé"},O={nc:"NC",educ:"Éducatif",jambes:"Jambes"},X=t=>t?y0[t]??t:null,E=t=>{if(!t)return null;const n=t.trim();if(!n)return null;const s=n.toLowerCase();if(s==="prog"||s==="progressif")return"Prog";if(K[s])return K[s];const a=n.toUpperCase();if(a==="MAX")return"Max";if(a.startsWith("V")){const o=Number.parseInt(a.slice(1),10);if(Number.isFinite(o)&&o>=4)return"Max";if(b0.includes(a))return a}return n},N0=t=>{if(!t)return"";const n=Math.floor(t/60),s=t%60;return n>0&&s>0?`${n}'${s.toString().padStart(2,"0")}`:n>0?`${n}'00`:`${s}s`},w0=(t=[])=>{const n=new Map;return t.forEach((s,a)=>{const o=s.raw_payload??{},l=typeof o=="object"?o:{},h=l.block_title||l.section||"Bloc",y=Number(l.block_order??0),v=`${y}-${h}`,u=l.block_equipment??l.equipment,z=l.block_modalities??l.modalities??null,C=Array.isArray(u)?u:u?String(u).split(",").map(c=>c.trim()).filter(Boolean):[];n.has(v)||n.set(v,{key:v,title:h,description:l.block_description??null,modalities:z,equipment:C.length?C:null,order:Number.isFinite(y)?y:0,repetitions:l.block_repetitions??null,items:[]});const V=n.get(v),b=l.exercise_repetitions??null,k=s.distance??null,N=s.label||(b&&k?`${b}x${k}m`:null)||(k?`${k}m`:null),L=l.exercise_modalities??s.notes??null,_=l.exercise_equipment??l.equipment,i=Array.isArray(_)?_:_?String(_).split(",").map(c=>c.trim()).filter(Boolean):[];V.items.push({...s,label:N||l.exercise_label||`Exercice ${a+1}`,notes:L,raw_payload:{...l,exercise_modalities:L,exercise_equipment:i}})}),Array.from(n.values()).sort((s,a)=>s.order!==a.order?s.order-a.order:s.title.localeCompare(a.title))},j0={palmes:{label:"Palmes",icon:new URL("/competition/assets/palmes-CV0uH23E.svg",import.meta.url).href},tuba:{label:"Tuba",icon:new URL("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cg%20transform='translate(-1.076923%201.074519)%20scale(1.025641)'%20vector-effect='non-scaling-stroke'%3e%3cpath%20d='M6.5%2010.5c1.4-1.6%203.4-2.5%205.5-2.5s4.1.9%205.5%202.5v3.1c0%201-.8%201.9-1.9%201.9h-1.4c-.8%200-1.5-.5-1.8-1.2l-.4-1.1-.4%201.1c-.3.7-1%201.2-1.8%201.2H8.4c-1%200-1.9-.8-1.9-1.9z'%20/%3e%3cpath%20d='M6.5%2011.2H5.2c-.7%200-1.2.5-1.2%201.2v1.2'%20/%3e%3cpath%20d='M17.5%2011.2h1.3c.7%200%201.2.5%201.2%201.2v1.2'%20/%3e%3cpath%20d='M19.5%206.5V4.8c0-.4.3-.8.8-.8H21'%20/%3e%3cpath%20d='M19.5%206.5c-1.2%200-2.2%201-2.2%202.2v4.8c0%202.1%201.7%203.8%203.8%203.8h.4'%20/%3e%3c/g%3e%3c/svg%3e",import.meta.url).href},plaquettes:{label:"Plaquettes",icon:new URL("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cg%20transform='translate(0.330484%200.336182)%20scale(0.045584)'%20vector-effect='non-scaling-stroke'%3e%3cg%20transform='translate(0.000000,512.000000)%20scale(0.100000,-0.100000)'%20fill='currentColor'%20stroke='none'%3e%3cpath%20d='M2552%204748%20c-373%20-58%20-928%20-529%20-1377%20-1168%20-218%20-310%20-318%20-519%20-362%20-750%20-24%20-131%20-24%20-494%201%20-665%2047%20-329%20150%20-738%20276%20-1100%2011%20-33%2041%20-141%2066%20-239%2024%20-99%2056%20-206%2071%20-238%2037%20-83%20114%20-151%20200%20-178%20120%20-37%20280%20-20%20392%2040%20l55%2030%20495%200%20c415%20-1%20499%20-3%20515%20-15%2045%20-34%20279%20-97%20359%20-96%2067%200%20135%2040%20216%20127%20315%20339%20711%201187%20842%201809%2067%20318%20-12%20670%20-252%201110%20-187%20345%20-459%20698%20-738%20959%20-307%20287%20-550%20407%20-759%20374z%20m250%20-200%20c185%20-88%20403%20-270%20618%20-515%20302%20-343%20550%20-750%20668%20-1094%20105%20-305%20104%20-462%20-7%20-856%20-146%20-516%20-516%20-1254%20-746%20-1490%20-54%20-56%20-65%20-63%20-100%20-63%20-22%200%20-56%204%20-75%209%20-19%206%20-54%2015%20-77%2021%20l-43%2011%200%2073%200%2074%2061%204%20c70%205%2099%2028%2099%2078%200%2049%20-29%2072%20-100%2079%20l-64%206%20264%20227%20c146%20125%20277%20245%20291%20265%2015%2021%2091%20160%20170%20308%20118%20223%20157%20288%20227%20374%20108%20133%20125%20163%20125%20216%200%2067%20-29%20108%20-148%20205%20-114%2094%20-157%20115%20-216%20104%20-47%20-10%20-457%20-248%20-496%20-289%20-50%20-53%20-57%20-96%20-33%20-207%2016%20-69%2018%20-98%2011%20-115%20-6%20-13%20-14%20-23%20-18%20-22%20-12%200%20-113%20145%20-124%20179%20-9%2024%20-5%2050%2021%20142%2017%2062%2038%20123%2046%20135%208%2012%2014%2035%2014%2050%200%2015%2068%20258%20151%20538%20182%20619%20182%20619%20174%20672%20-10%2069%20-52%20105%20-168%20142%20-58%2019%20-118%2031%20-150%2031%20-111%200%20-215%20-53%20-261%20-133%20-14%20-23%20-56%20-145%20-94%20-271%20-39%20-125%20-76%20-233%20-82%20-240%20-9%20-8%20-11%2074%20-8%20349%20l3%20360%20-24%2048%20c-29%2059%20-98%20121%20-158%20141%20-26%209%20-77%2016%20-114%2016%20-125%200%20-236%20-82%20-269%20-198%20-5%20-20%20-10%20-89%20-10%20-152%20-1%20-111%20-1%20-114%20-15%20-76%20-33%2093%20-104%20148%20-198%20154%20-55%204%20-71%200%20-124%20-26%20-33%20-17%20-73%20-47%20-89%20-67%20-16%20-20%20-46%20-54%20-66%20-75%20-47%20-49%20-50%20-89%20-11%20-128%2027%20-26%2028%20-34%2070%20-377%2023%20-192%2042%20-360%2043%20-373%200%20-18%20-24%204%20-102%2095%20-56%2065%20-117%20139%20-136%20166%20-19%2026%20-55%2060%20-81%2075%20-39%2023%20-57%2027%20-121%2027%20-86%200%20-135%20-21%20-195%20-80%20-45%20-46%20-65%20-94%20-65%20-161%200%20-49%2015%20-83%20198%20-451%20l199%20-398%20-13%20-50%20c-78%20-298%20-2%20-723%20187%20-1047%2021%20-36%2039%20-71%2039%20-76%200%20-5%20-28%20-12%20-61%20-14%20-70%20-5%20-99%20-28%20-99%20-78%200%20-50%2029%20-73%2099%20-78%20l61%20-4%200%20-78%200%20-77%20-31%20-7%20c-68%20-13%20-143%20-6%20-197%2019%20-46%2021%20-56%2032%20-77%2077%20-13%2029%20-42%20127%20-65%20218%20-22%2091%20-65%20239%20-95%20330%20-182%20557%20-258%20945%20-259%201315%20-1%20277%2026%20409%20122%20600%20222%20446%20778%201083%201158%201328%20167%20107%20281%20148%20404%20145%2074%20-3%2095%20-8%20162%20-40z%20m-287%20-614%20c64%20-30%2064%20-35%2057%20-468%20l-7%20-389%20-27%20-20%20-26%20-20%20-96%2079%20-96%2079%200%20333%20c0%20364%202%20376%2058%20406%2036%2020%2096%2020%20137%200z%20m-537%20-279%20c18%20-23%2052%20-188%2041%20-199%20-3%20-4%20-140%20104%20-178%20140%20-10%2010%2012%2051%2036%2066%2041%2025%2078%2023%20101%20-7z%20m1296%204%20c61%20-18%2066%20-22%2060%20-42%20-9%20-30%20-8%20-30%20-203%20-162%20-137%20-93%20-171%20-112%20-165%20-94%204%2013%2022%2073%2041%20134%2039%20127%2050%20146%2095%20168%2044%2022%2093%2021%20172%20-4z%20m-1286%20-394%20c40%20-33%2075%20-69%2077%20-80%203%20-11%2016%20-96%2030%20-190%2014%20-93%2028%20-180%2030%20-192%204%20-19%20-9%20-32%20-85%20-83%20-85%20-57%20-90%20-59%20-94%20-38%20-7%2034%20-76%20629%20-76%20656%200%2027%20-10%2033%20118%20-73z%20m1177%20-232%20c-48%20-164%20-96%20-328%20-107%20-365%20l-20%20-67%20-116%2096%20c-65%2053%20-119%2098%20-121%2099%20-8%207%2083%20295%2098%20308%2032%2028%20344%20236%20349%20232%202%20-2%20-35%20-139%20-83%20-303z%20m-1779%20-60%20c13%20-16%20120%20-141%20239%20-280%20225%20-264%20249%20-284%20294%20-251%2048%2035%20231%20158%20236%20158%203%200%205%20-9%205%20-19%200%20-36%2043%20-74%2081%20-73%2058%201%2079%2037%2079%20131%20l0%2078%2092%2061%2091%2061%2028%20-22%2028%20-22%200%20-133%20c1%20-127%202%20-134%2026%20-157%2033%20-34%2086%20-34%20113%200%2011%2014%2025%2048%2032%2075%207%2028%2015%2050%2018%2050%205%200%20198%20-157%20239%20-194%202%20-1%20-11%20-49%20-28%20-107%20-38%20-128%20-41%20-214%20-12%20-279%2028%20-60%20165%20-245%20200%20-267%2016%20-10%2046%20-18%2071%20-18%2041%200%2048%204%2094%2055%2092%20102%20102%20143%2069%20282%20-10%2042%20-15%2081%20-12%2085%207%2011%20400%20233%20411%20233%204%200%2046%20-32%2093%20-71%20l86%20-71%20-94%20-117%20c-81%20-101%20-116%20-158%20-248%20-407%20l-154%20-289%20-274%20-237%20c-151%20-130%20-282%20-247%20-291%20-259%20-10%20-12%20-18%20-36%20-18%20-55%20l0%20-34%20-520%200%20-520%200%200%2030%20c0%2017%20-23%2070%20-55%20127%20-178%20319%20-243%20671%20-174%20940%2010%2042%2019%2087%2019%20100%200%2013%20-90%20204%20-201%20424%20-138%20276%20-199%20409%20-197%20427%204%2033%2059%2072%20101%2072%2020%200%2037%20-9%2053%20-27z%20m963%20-7%20l22%20-23%20-26%20-17%20-25%20-16%200%2040%20c0%2022%201%2040%203%2040%202%200%2013%20-11%2026%20-24z%20m531%20-2286%20l0%20-40%20-520%200%20-520%200%200%2040%200%2040%20520%200%20520%200%200%20-40z'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",import.meta.url).href},pull:{label:"Pull",icon:new URL("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cg%20transform='translate(-25.188612%20-8.200661)%20scale(0.024294)'%20vector-effect='non-scaling-stroke'%3e%3cg%20transform='translate(0.000000,2000.000000)%20scale(0.100000,-0.100000)'%20fill='currentColor'%20stroke='none'%3e%3cpath%20d='M12470%2014405%20c-281%20-42%20-492%20-154%20-700%20-371%20-151%20-157%20-266%20-333%20-371%20-564%20-151%20-333%20-217%20-640%20-190%20-887%2019%20-173%2045%20-264%20117%20-403%20111%20-214%20304%20-407%20576%20-576%20318%20-196%20845%20-390%201368%20-504%20359%20-78%20577%20-113%20930%20-149%20252%20-26%20310%20-34%20370%20-48%20185%20-42%20387%20-132%20552%20-245%2057%20-39%20162%20-131%20275%20-240%20329%20-318%20628%20-565%20975%20-806%20462%20-321%20860%20-520%201208%20-606%20183%20-46%20229%20-51%20430%20-50%20179%200%20204%202%20300%2028%20225%2058%20394%20157%20565%20330%20263%20264%20465%20678%20530%201083%2019%20116%2019%20302%201%20413%20-73%20442%20-378%20800%20-911%201070%20-210%20107%20-536%20232%20-770%20295%20-33%209%20-73%2020%20-90%2025%20-190%2052%20-454%20113%20-610%20140%20-305%2053%20-447%2072%20-655%2090%20-332%2028%20-465%2060%20-680%20161%20-169%2080%20-288%20166%20-450%20324%20-385%20374%20-731%20659%20-1095%20902%20-539%20360%20-944%20538%20-1335%20588%20-134%2018%20-223%2018%20-340%200z'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",import.meta.url).href},elastique:{label:"Élastique",icon:new URL("data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%3e%3cg%20transform='translate(-4.406250%200.429487)%20scale(0.039062)'%20vector-effect='non-scaling-stroke'%3e%3cg%20transform='translate(0.000000,592.000000)%20scale(0.100000,-0.100000)'%20fill='currentColor'%20stroke='none'%3e%3cpath%20d='M3355%205506%20c-166%20-27%20-386%20-101%20-555%20-186%20-539%20-270%20-958%20-781%20-1110%20-1354%20-76%20-286%20-64%20-542%2035%20-777%20175%20-415%20606%20-629%201116%20-553%20168%2024%20338%2023%20451%20-4%20304%20-74%20514%20-289%20584%20-599%2023%20-102%2023%20-271%20-1%20-432%20-63%20-434%2080%20-814%20385%20-1021%2090%20-61%20233%20-126%20330%20-150%20468%20-116%201113%20121%201566%20574%20262%20262%20444%20570%20546%20921%20145%20502%207%20962%20-365%201214%20-198%20134%20-503%20191%20-782%20146%20-156%20-26%20-334%20-24%20-450%204%20-291%2070%20-506%20285%20-576%20576%20-27%20112%20-29%20302%20-5%20450%2094%20584%20-209%201064%20-748%201181%20-97%2022%20-321%2027%20-421%2010z%20m420%20-185%20c424%20-108%20652%20-491%20582%20-976%20-26%20-180%20-30%20-254%20-18%20-368%2046%20-425%20293%20-728%20685%20-841%20167%20-49%20326%20-55%20556%20-20%20535%2079%20935%20-197%201001%20-691%2044%20-334%20-108%20-770%20-391%20-1125%20-78%20-97%20-254%20-272%20-350%20-347%20-223%20-174%20-496%20-303%20-760%20-360%20-123%20-26%20-346%20-23%20-455%206%20-108%2028%20-246%2098%20-323%20163%20-216%20182%20-311%20489%20-257%20823%2024%20144%2024%20360%201%20469%20-67%20306%20-239%20534%20-502%20665%20-215%20107%20-432%20133%20-719%2086%20-180%20-30%20-374%20-13%20-523%2045%20-372%20144%20-559%20543%20-467%20996%20137%20671%20735%201290%201415%201464%20174%2044%20376%2048%20525%2011z'%20/%3e%3cpath%20d='M3376%205135%20c-493%20-94%20-976%20-473%20-1211%20-950%20-209%20-425%20-204%20-803%2015%20-1022%20151%20-150%20369%20-203%20648%20-157%20144%2024%20370%2022%20499%20-5%20471%20-98%20790%20-409%20910%20-888%2024%20-96%2027%20-127%2027%20-278%200%20-122%20-4%20-194%20-17%20-254%20-51%20-246%207%20-492%20148%20-632%20193%20-191%20469%20-229%20815%20-113%20517%20173%20941%20597%201114%201114%20113%20338%2078%20616%20-100%20800%20-151%20157%20-357%20209%20-647%20164%20-151%20-24%20-376%20-21%20-504%205%20-483%20100%20-814%20430%20-914%20914%20-27%20130%20-29%20356%20-5%20499%2020%20121%2020%20260%201%20353%20-44%20210%20-198%20377%20-405%20440%20-78%2023%20-274%2029%20-374%2010z%20m280%20-166%20c174%20-32%20301%20-157%20334%20-329%2014%20-76%2012%20-165%20-7%20-283%20-24%20-154%20-22%20-402%205%20-542%2038%20-194%20105%20-361%20209%20-519%2060%20-91%20248%20-279%20339%20-339%20158%20-104%20351%20-180%20539%20-213%20130%20-23%20381%20-23%20522%200%20236%2037%20377%208%20495%20-102%20155%20-144%20166%20-414%2032%20-740%20-77%20-189%20-173%20-330%20-334%20-495%20-217%20-224%20-441%20-359%20-712%20-432%20-243%20-65%20-444%20-31%20-562%2095%20-108%20115%20-138%20269%20-100%20498%2026%20149%2023%20397%20-5%20540%20-108%20553%20-497%20945%20-1054%201064%20-130%2027%20-398%2030%20-554%204%20-233%20-37%20-378%20-8%20-493%20100%20-126%20118%20-160%20319%20-95%20563%2049%20181%20140%20367%20259%20524%2082%20109%20287%20304%20395%20375%20276%20181%20576%20270%20787%20231z'%20/%3e%3cpath%20d='M4715%204206%20c-14%20-163%2021%20-328%2096%20-452%2071%20-118%20216%20-221%20364%20-259%20141%20-36%20342%20-28%20378%2016%2023%2028%2022%2081%20-2%20110%20-18%2023%20-25%2024%20-158%2025%20-111%201%20-151%206%20-205%2023%20-210%2067%20-324%20264%20-302%20522%207%2088%2010%2085%20-96%2095%20l-68%207%20-7%20-87z'%20/%3e%3cpath%20d='M2922%202441%20c-56%20-10%20-86%20-40%20-86%20-87%200%20-28%207%20-42%2029%20-61%2027%20-24%2033%20-25%20114%20-18%20179%2013%20324%20-36%20423%20-144%2093%20-100%20124%20-212%20114%20-407%20-6%20-112%20-5%20-122%2014%20-142%2040%20-43%20103%20-37%20136%2013%2026%2040%2032%20246%2010%20355%20-50%20245%20-208%20413%20-447%20475%20-71%2019%20-243%2028%20-307%2016z'%20/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",import.meta.url).href}},v0=t=>t.trim().toLowerCase(),k0=t=>j0[v0(t)]?.icon??null,_0={palmes:"Pal",tuba:"Tub",plaquettes:"Plq",pull:"Pul",elastique:"Éla"};function M0({equipment:t,className:n,size:s="md"}){const a=t.trim().toLowerCase(),o=k0(t),l=_0[a]??t.slice(0,3),h=s==="sm"?"h-7 w-7":"h-8 w-8",y=s==="sm"?"h-3.5 w-3.5":"h-4 w-4";return e.jsxs("div",{className:d("flex flex-col items-center gap-0.5",n),children:[e.jsx("div",{className:d(h,"flex items-center justify-center rounded-lg bg-muted"),children:o?e.jsx("img",{src:o,alt:t,className:d(y,"opacity-70"),"aria-hidden":"true"}):e.jsx("span",{className:"text-[10px] font-semibold text-muted-foreground",children:l})}),e.jsx("span",{className:"text-[9px] font-semibold uppercase tracking-wider text-muted-foreground",children:l})]})}const F=t=>{const n=Number(t);return Number.isFinite(n)?n:0},C0=(t=[])=>t.reduce((n,s)=>{const a=s.raw_payload??{},o=F(a.block_repetitions),l=F(a.exercise_repetitions),h=F(s.distance);return n+o*l*h},0),V0=t=>t?t.split(`
`).map(n=>n.trim()).filter(Boolean):[],A={V0:"bg-intensity-1",V1:"bg-intensity-2",V2:"bg-intensity-3",V3:"bg-intensity-4",Max:"bg-intensity-5",Prog:"bg-intensity-prog"},S0={V0:"ring-intensity-1/40",V1:"ring-intensity-2/40",V2:"ring-intensity-3/40",V3:"ring-intensity-4/40",Max:"ring-intensity-5/40",Prog:"ring-intensity-prog/40"},G={V0:"text-intensity-1",V1:"text-intensity-2",V2:"text-intensity-3",V3:"text-intensity-4",Max:"text-intensity-5",Prog:"bg-gradient-to-r from-intensity-2 to-intensity-4 bg-clip-text text-transparent"},L0={Crawl:{label:"Crawl",className:"bg-sky-100 text-sky-800"},Dos:{label:"Dos",className:"bg-violet-100 text-violet-800"},Brasse:{label:"Brasse",className:"bg-emerald-100 text-emerald-800"},Pap:{label:"Pap",className:"bg-amber-100 text-amber-800"},"4 nages":{label:"4N",className:"bg-slate-100 text-slate-700"},Spé:{label:"Spé",className:"bg-pink-100 text-pink-800"}},z0={Éducatif:{label:"Éduc",className:"bg-violet-100 text-violet-800 italic"},Jambes:{label:"Jambes",className:"bg-teal-100 text-teal-800"}},q0=t=>{const n=["Max","V3","V2","V1","V0","Prog"],s=t.map(a=>{const o=a.raw_payload??{};return E(o.exercise_intensity??a.intensity)}).filter(Boolean);for(const a of n)if(s.includes(a))return a;return"V1"},B0=t=>t.items.reduce((s,a)=>{const o=a.raw_payload??{},l=Number(o.exercise_repetitions)||1,h=Number(a.distance)||0;return s+l*h},0)*(t.repetitions||1),R0=t=>{const n=t.raw_payload??{},s=Number(n.exercise_repetitions),a=Number(t.distance);return s>1&&a>0?`${s}×${a}m`:a>0?`${a}m`:t.label||"—"};function J0({title:t,description:n,items:s=[],showHeader:a=!0,onExerciseSelect:o,exerciseLogs:l,expandedItemId:h,onToggleExpand:y,onLogChange:v}){const[u,z]=M.useState(0),[C,V]=M.useState(new Set),b=M.useMemo(()=>w0(s),[s]),k=M.useMemo(()=>C0(s),[s]),N=u===2,L=u>=1,_=()=>{const r=(u+1)%3;z(r),r===2?V(new Set(b.map(g=>g.key))):r===0&&V(new Set)},i=r=>{V(g=>{const m=new Set(g);return m.has(r)?m.delete(r):m.add(r),m})},c=(r,g,m,B)=>{const f=r.raw_payload??{},p=E(f.exercise_intensity??r.intensity??null),S=X(f.exercise_stroke),w=f.exercise_stroke_type?O[f.exercise_stroke_type]??f.exercise_stroke_type:null,q=Array.isArray(f.exercise_equipment)?f.exercise_equipment:[];return{label:r.label||`Exercice ${g+1}`,distance:r.distance??null,repetitions:f.exercise_repetitions??null,rest:f.exercise_rest??null,restType:f.exercise_rest_type??"rest",stroke:S,strokeType:w,intensity:p,modalities:r.notes??null,equipment:q,blockTitle:m.title,blockIndex:B}};let x=0;return b.length===0?e.jsx("div",{className:"rounded-2xl border border-dashed border-muted/70 bg-muted/30 p-6 text-sm text-muted-foreground",children:"Aucun contenu détaillé pour cette séance."}):e.jsxs("div",{children:[a&&e.jsxs("div",{className:"flex items-center justify-between gap-3 pb-4",children:[e.jsxs("div",{className:"flex items-baseline gap-4",children:[e.jsxs("span",{className:"text-3xl font-display font-extrabold tracking-tight tabular-nums",children:[k.toLocaleString("fr-FR"),"m"]}),e.jsxs("span",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(u0,{className:"h-3.5 w-3.5"})," ",b.length," blocs"]})]}),e.jsxs("button",{type:"button",onClick:_,className:d("flex items-center gap-1.5 rounded-full border px-3 py-1.5 text-xs font-semibold transition-all",u===0&&"border-border bg-card text-muted-foreground",u===1&&"border-muted-foreground/30 bg-muted text-foreground",u===2&&"border-primary bg-primary text-primary-foreground"),children:[u===0&&e.jsxs(e.Fragment,{children:[e.jsx(o0,{className:"h-3.5 w-3.5"})," Détail"]}),u===1&&e.jsxs(e.Fragment,{children:[e.jsx(x0,{className:"h-3.5 w-3.5"})," Compact"]}),u===2&&e.jsxs(e.Fragment,{children:[e.jsx(n0,{className:"h-3.5 w-3.5"})," Bassin"]})]})]}),e.jsxs("div",{className:"pt-2",children:[b.map((r,g)=>{const m=q0(r.items),B=B0(r);x+=B;const f=C.has(r.key);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex",style:{animation:"timeline-block-reveal 0.5s cubic-bezier(0.16,1,0.3,1) both",animationDelay:`${g*.07}s`},children:[e.jsxs("div",{className:"flex w-8 shrink-0 flex-col items-center pt-0.5",children:[e.jsx("div",{className:d("h-4 w-4 shrink-0 rounded-full border-[3px] border-background ring-2",A[m],S0[m])}),e.jsx("div",{className:d("-mt-0.5 w-[5px] grow rounded-full opacity-35",A[m])})]}),e.jsxs("div",{className:"min-w-0 flex-1 pb-4 pl-3",children:[e.jsxs("button",{type:"button",onClick:()=>i(r.key),"aria-expanded":!f,className:"flex w-full items-center gap-2 py-1.5 text-left select-none",children:[e.jsx("span",{className:d("font-display font-bold uppercase tracking-[0.08em]",N?"text-base":"text-sm",G[m]??"text-foreground"),children:r.title}),r.repetitions&&r.repetitions>1?e.jsxs("span",{className:d("rounded-full px-1.5 py-0.5 text-[11px] font-bold leading-tight text-white",A[m]),children:["×",r.repetitions]}):null,e.jsx("span",{className:"flex-1"}),e.jsxs("span",{className:d("font-display font-bold tabular-nums tracking-tight text-foreground",N?"text-lg":"text-base"),children:[B.toLocaleString("fr-FR"),"m"]}),e.jsx(c0,{className:d("h-[18px] w-[18px] shrink-0 text-muted-foreground transition-transform duration-300",f&&"-rotate-90")})]}),!L&&r.description&&!f?e.jsx("p",{className:"pb-1.5 text-xs italic text-muted-foreground leading-snug",children:r.description}):null,!f&&e.jsx("div",{className:"flex flex-col gap-1",children:r.items.map((p,S)=>{const w=p.raw_payload??{},q=E(w.exercise_intensity??p.intensity??null),T=X(w.exercise_stroke),I=w.exercise_stroke_type?O[w.exercise_stroke_type]??w.exercise_stroke_type:null,U=Array.isArray(w.exercise_equipment)?w.exercise_equipment:[],H=Number(w.exercise_rest)||0,Y=w.exercise_rest_type,J=V0(p.notes),$=T?L0[T]??null:null,D=I?z0[I]??null:null,W=!!(y&&p.id!=null),Z=W&&h===p.id,e0=p.id!=null&&l?.has(p.id),P=W?()=>y(p.id):o?()=>o(c(p,S,r,g)):void 0,R=!!P;return e.jsxs("div",{className:d(S>0&&"border-t border-border/40"),children:[e.jsxs("div",{className:d("py-2",R&&"cursor-pointer active:bg-muted/50 rounded"),onClick:P,role:R?"button":void 0,tabIndex:R?0:void 0,onKeyDown:R?j=>{(j.key==="Enter"||j.key===" ")&&(j.preventDefault(),P())}:void 0,children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:d("font-display font-bold tabular-nums tracking-tight text-foreground",N?"min-w-[95px] text-xl":"min-w-[76px] text-lg"),children:R0(p)}),$?e.jsx("span",{className:d("rounded-full font-display font-bold whitespace-nowrap leading-tight",N?"px-2.5 py-1 text-sm":"px-2 py-0.5 text-xs",$.className),children:$.label}):null,!N&&D?e.jsx("span",{className:d("rounded-full px-1.5 py-0.5 text-[11px] font-semibold whitespace-nowrap leading-tight",D.className),children:D.label}):null,!N&&q?e.jsx("span",{className:d("font-display text-sm font-bold whitespace-nowrap",G[q]??"text-foreground"),children:h0(q)}):null,e0?e.jsx("span",{className:"rounded-full bg-primary/10 px-1.5 py-0.5 text-[10px] font-semibold text-primary leading-tight",children:"✓"}):null,e.jsx("span",{className:"flex-1"}),!N&&H>0?e.jsxs("span",{className:"ml-auto flex items-center gap-1 whitespace-nowrap text-sm font-medium text-muted-foreground",children:[e.jsx(d0,{className:"h-3 w-3"}),Y==="departure"?"d:":"r:",N0(H)]}):null]}),U.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 pb-0.5 pt-1.5",children:U.map(j=>e.jsx(M0,{equipment:j,size:N?"md":"sm"},j))}):null,u===0&&J.length>0?e.jsx("div",{className:d("mt-1.5 rounded-md border-l-[3px] bg-muted/60 px-2.5 py-1.5 text-sm leading-relaxed text-muted-foreground",{V0:"border-intensity-1",V1:"border-intensity-2",V2:"border-intensity-3",V3:"border-intensity-4",Max:"border-intensity-5",Prog:"border-intensity-prog"}[m]??"border-muted-foreground/30"),children:J.map((j,t0)=>e.jsx("div",{children:j},`mod-${r.key}-${S}-${t0}`))}):null]}),Z&&p.id!=null&&v&&e.jsx(f0,{item:p,log:l?.get(p.id)??{exercise_label:p.label||`Exercice ${S+1}`,source_item_id:p.id,split_times:[],tempo:null,stroke_count:[],notes:null},onChange:j=>v(p.id,j),onCollapse:()=>y(p.id)})]},`${r.key}-${S}`)})})]})]}),g<b.length-1&&e.jsxs("div",{className:"flex items-center py-2",style:{marginLeft:"15px"},children:[e.jsx("div",{className:"h-px flex-1 bg-border"}),e.jsxs("span",{className:"px-2.5 text-[11px] font-bold tabular-nums text-muted-foreground",children:[x.toLocaleString("fr-FR"),"m"]}),e.jsx("div",{className:"h-px flex-1 bg-border"})]})]},r.key)}),e.jsxs("div",{className:"flex items-center gap-2 pl-2.5 pt-2",children:[e.jsx("div",{className:"h-2.5 w-2.5 rounded-full bg-muted"}),e.jsxs("span",{className:"text-xs font-semibold text-muted-foreground",children:["Fin de séance — ",k.toLocaleString("fr-FR"),"m"]})]})]})]})}export{u0 as L,J0 as S,C0 as c,k0 as g,H0 as i};
