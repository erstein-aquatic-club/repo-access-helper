import{c as W}from"./index-CjZuqg9C.js";import{r as s,j as R}from"./vendor-ui-DJQMR4VV.js";import{M as _,i as b,u as z,P as A,d as D,e as H,L as K}from"./animations-DJPzd0IL.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Q=W("circle-check",U);function L(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function B(...e){return o=>{let t=!1;const r=e.map(i=>{const n=L(i,o);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let i=0;i<r.length;i++){const n=r[i];typeof n=="function"?n():L(e[i],null)}}}}function F(...e){return s.useCallback(B(...e),e)}class G extends s.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const r=t.offsetParent,i=b(r)&&r.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=i-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function N({children:e,isPresent:o,anchorX:t,root:r}){const i=s.useId(),n=s.useRef(null),h=s.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:x}=s.useContext(_),E=F(n,e?.ref);return s.useInsertionEffect(()=>{const{width:c,height:y,top:f,left:a,right:d}=h.current;if(o||!n.current||!c||!y)return;const m=t==="left"?`left: ${a}`:`right: ${d}`;n.current.dataset.motionPopId=i;const u=document.createElement("style");x&&(u.nonce=x);const P=r??document.head;return P.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${y}px !important;
            ${m}px !important;
            top: ${f}px !important;
          }
        `),()=>{P.contains(u)&&P.removeChild(u)}},[o]),R.jsx(G,{isPresent:o,childRef:n,sizeRef:h,children:s.cloneElement(e,{ref:E})})}const V=({children:e,initial:o,isPresent:t,onExitComplete:r,custom:i,presenceAffectsLayout:n,mode:h,anchorX:x,root:E})=>{const c=z(X),y=s.useId();let f=!0,a=s.useMemo(()=>(f=!1,{id:y,initial:o,isPresent:t,custom:i,onExitComplete:d=>{c.set(d,!0);for(const m of c.values())if(!m)return;r&&r()},register:d=>(c.set(d,!1),()=>c.delete(d))}),[t,c,r]);return n&&f&&(a={...a}),s.useMemo(()=>{c.forEach((d,m)=>c.set(m,!1))},[t]),s.useEffect(()=>{!t&&!c.size&&r&&r()},[t]),h==="popLayout"&&(e=R.jsx(N,{isPresent:t,anchorX:x,root:E,children:e})),R.jsx(A.Provider,{value:a,children:e})};function X(){return new Map}const M=e=>e.key||"";function $(e){const o=[];return s.Children.forEach(e,t=>{s.isValidElement(t)&&o.push(t)}),o}const Y=({children:e,custom:o,initial:t=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:n="sync",propagate:h=!1,anchorX:x="left",root:E})=>{const[c,y]=D(h),f=s.useMemo(()=>$(e),[e]),a=h&&!c?[]:f.map(M),d=s.useRef(!0),m=s.useRef(f),u=z(()=>new Map),[P,I]=s.useState(f),[C,j]=s.useState(f);H(()=>{d.current=!1,m.current=f;for(let p=0;p<C.length;p++){const l=M(C[p]);a.includes(l)?u.delete(l):u.get(l)!==!0&&u.set(l,!1)}},[C,a.length,a.join("-")]);const k=[];if(f!==P){let p=[...f];for(let l=0;l<C.length;l++){const g=C[l],w=M(g);a.includes(w)||(p.splice(l,0,g),k.push(g))}return n==="wait"&&k.length&&(p=k),j($(p)),I(f),null}const{forceRender:S}=s.useContext(K);return R.jsx(R.Fragment,{children:C.map(p=>{const l=M(p),g=h&&!c?!1:f===C||a.includes(l),w=()=>{if(u.has(l))u.set(l,!0);else return;let v=!0;u.forEach(T=>{T||(v=!1)}),v&&(S?.(),j(m.current),h&&y?.(),r&&r())};return R.jsx(V,{isPresent:g,initial:!d.current||t?void 0:!1,custom:o,presenceAffectsLayout:i,mode:n,root:E,onExitComplete:g?void 0:w,anchorX:x,children:p},l)})})};export{Y as A,Q as C};
