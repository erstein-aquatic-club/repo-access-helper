import{j as e}from"./vendor-ui-DJQMR4VV.js";import{u as E}from"./vendor-query-BT4y-huw.js";import{c as k,S as i,C as m,g as d,i as o,B as S,j as I,W as O,D as P,h,T as N,d as K}from"./index-Dyae1WSo.js";import{T as W,a as Q,b as A,c as L}from"./tabs-rO4tL8ZK.js";import{B as G}from"./badge-AL0P0Psw.js";import{s as J}from"./score-CwBbkHfb.js";import{g as U}from"./design-tokens-CGMys_0P.js";import{m as l,s as u,l as f}from"./animations-BTr26p-C.js";import{C as X}from"./circle-alert-CJjyTAV2.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-charts-Db4xOvcx.js";import"./vendor-supabase-D7B1G6YZ.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Z=k("crown",Y);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],se=k("heart",ee);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],R=k("medal",ae),te="rounded-full px-3 py-1 text-lg font-mono font-bold md:text-xl";function g({value:a,toneScore:t}){const r=J(t??null)??"hsl(var(--muted-foreground))";return e.jsx(G,{className:te,style:{backgroundColor:r,color:U(r)},children:a})}const H=a=>{if(a==null)return null;const t=Number(a);return!Number.isFinite(t)||t<=0?null:t<=5?Math.min(5,t):Math.min(5,t/2)},y=a=>{const t=a.filter(r=>Number.isFinite(r));return t.length===0?null:{min:Math.min(...t),max:Math.max(...t)}},_=(a,t)=>{if(!Number.isFinite(a)||a===null||a===void 0||a<=0||!t||t.max<=0)return null;if(t.max===t.min)return 5;const c=1+(a-t.min)/(t.max-t.min)*4;return Math.max(1,Math.min(5,c))},p=(a,t)=>{if(a==null||!Number.isFinite(a))return"-";const{decimals:r=0,suffix:c}=t??{},j=a.toLocaleString(void 0,{minimumFractionDigits:r,maximumFractionDigits:r});return c?`${j} ${c}`:j};function ge(){const{data:a,isLoading:t,error:r,refetch:c}=E({queryKey:["hall-of-fame"],queryFn:()=>K.getHallOfFame()}),j=a?.distance??[],$=a?.performance??[],z=a?.engagement??[],C=a?.strength??[],v=j.map(s=>({...s,total_distance:Number(s.total_distance??0)})),T=$.map(s=>({...s,avg_effort:H(s.avg_effort)})),M=z.map(s=>({...s,avg_engagement:H(s.avg_engagement)})),b=[...C].sort((s,n)=>Number(n.total_volume??0)-Number(s.total_volume??0)).slice(0,5),w=[...C].sort((s,n)=>Number(n.total_reps??0)-Number(s.total_reps??0)).slice(0,5),D=y(v.map(s=>Number(s.total_distance??0))),V=y(b.map(s=>Number(s.total_volume??0))),q=y(w.map(s=>Number(s.total_reps??0))),x=({rank:s})=>s===0?e.jsx(Z,{className:"h-6 w-6 text-rank-gold fill-rank-gold"}):s===1?e.jsx(R,{className:"h-5 w-5 text-rank-silver fill-rank-silver"}):s===2?e.jsx(R,{className:"h-5 w-5 text-rank-bronze fill-rank-bronze"}):e.jsx("span",{className:"font-mono font-bold text-muted-foreground w-6 text-center",children:s+1});return t?e.jsxs("div",{className:"space-y-6","aria-live":"polite","aria-busy":"true",children:[e.jsx("div",{className:"sr-only",children:"Chargement du Hall of Fame..."}),e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(i,{className:"h-10 w-48"}),e.jsx(i,{className:"h-10 w-48"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"h-10 w-full"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 pt-4",children:Array.from({length:3}).map((s,n)=>e.jsxs(m,{className:"border-t-4",children:[e.jsx(d,{children:e.jsx(i,{className:"h-6 w-32"})}),e.jsx(o,{className:"space-y-4",children:Array.from({length:5}).map((F,B)=>e.jsxs("div",{className:"flex items-center justify-between gap-3 p-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i,{className:"h-6 w-6"}),e.jsx(i,{className:"h-5 w-32"})]}),e.jsx(i,{className:"h-6 w-16"})]},`item-${B}`))})]},`skeleton-${n}`))})]})]}):r?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(X,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"font-semibold",children:"Impossible de charger les données"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:r.message}),e.jsx(S,{onClick:()=>c(),className:"mt-4",children:"Réessayer"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-3xl font-display font-bold uppercase italic text-primary",children:"Hall of Fame"}),e.jsx(I,{href:"/records-club",children:e.jsx(S,{variant:"outline",children:"Voir les records du club"})})]}),e.jsxs(W,{defaultValue:"swim",className:"w-full",children:[e.jsxs(Q,{className:"grid w-full grid-cols-2",children:[e.jsxs(A,{value:"swim",children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Bassin"]}),e.jsxs(A,{value:"strength",children:[e.jsx(P,{className:"mr-2 h-4 w-4"})," Muscu"]})]}),e.jsx(L,{value:"swim",className:"space-y-6 pt-4 animate-in slide-in-from-left-4 motion-reduce:animate-none",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs(m,{className:"border-t-4 border-t-yellow-500 shadow-md",children:[e.jsx(d,{children:e.jsxs(h,{className:"flex items-center gap-2 text-base",children:[e.jsx(N,{className:"h-5 w-5 text-yellow-500"}),"Top Distance"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsx(l.div,{variants:u,initial:"hidden",animate:"visible",className:"space-y-4",children:v.map((s,n)=>{const F=s.total_distance?s.total_distance/1e3:0;return e.jsxs(l.div,{variants:f,className:"flex items-center justify-between gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx(x,{rank:n}),e.jsx("div",{className:"font-bold uppercase tracking-tight truncate",children:s.athlete_name})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(g,{value:p(F,{decimals:1,suffix:"km"}),toneScore:_(s.total_distance,D)})})]},s.athlete_name)})}),v.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Aucune donnée"})]})]}),e.jsxs(m,{className:"border-t-4 border-t-orange-500 shadow-md",children:[e.jsx(d,{children:e.jsxs(h,{className:"flex items-center gap-2 text-base",children:[e.jsx(N,{className:"h-5 w-5 text-orange-500"}),"Top Intensité (RPE Avg)"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsx(l.div,{variants:u,initial:"hidden",animate:"visible",className:"space-y-4",children:T.map((s,n)=>e.jsxs(l.div,{variants:f,className:"flex items-center justify-between gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx(x,{rank:n}),e.jsx("div",{className:"font-bold uppercase tracking-tight truncate",children:s.athlete_name})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(g,{value:p(s.avg_effort,{decimals:1}),toneScore:s.avg_effort})})]},s.athlete_name))}),T.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Aucune donnée"})]})]}),e.jsxs(m,{className:"border-t-4 border-t-rose-500 shadow-md",children:[e.jsx(d,{children:e.jsxs(h,{className:"flex items-center gap-2 text-base",children:[e.jsx(se,{className:"h-5 w-5 text-rose-500"}),"Top Engagement"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsx(l.div,{variants:u,initial:"hidden",animate:"visible",className:"space-y-4",children:M.map((s,n)=>e.jsxs(l.div,{variants:f,className:"flex items-center justify-between gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx(x,{rank:n}),e.jsx("div",{className:"font-bold uppercase tracking-tight truncate",children:s.athlete_name})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(g,{value:p(s.avg_engagement,{decimals:1}),toneScore:s.avg_engagement})})]},`${s.athlete_name}-engagement`))}),M.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Aucune donnée"})]})]})]})}),e.jsx(L,{value:"strength",className:"space-y-6 pt-4 animate-in slide-in-from-right-4 motion-reduce:animate-none",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs(m,{className:"border-t-4 border-t-emerald-500 shadow-md",children:[e.jsx(d,{children:e.jsxs(h,{className:"flex items-center gap-2 text-base",children:[e.jsx(N,{className:"h-5 w-5 text-emerald-500"}),"Top Tonnage"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsx(l.div,{variants:u,initial:"hidden",animate:"visible",className:"space-y-4",children:b.map((s,n)=>e.jsxs(l.div,{variants:f,className:"flex items-center justify-between gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx(x,{rank:n}),e.jsx("div",{className:"font-bold uppercase tracking-tight truncate",children:s.athlete_name})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(g,{value:p(Number(s.total_volume??0),{suffix:"kg"}),toneScore:_(Number(s.total_volume??0),V)})})]},s.athlete_name))}),b.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Aucune donnée"})]})]}),e.jsxs(m,{className:"border-t-4 border-t-violet-500 shadow-md",children:[e.jsx(d,{children:e.jsxs(h,{className:"flex items-center gap-2 text-base",children:[e.jsx(N,{className:"h-5 w-5 text-violet-500"}),"Top Volume (Répétitions)"]})}),e.jsxs(o,{className:"space-y-4",children:[e.jsx(l.div,{variants:u,initial:"hidden",animate:"visible",className:"space-y-4",children:w.map((s,n)=>e.jsxs(l.div,{variants:f,className:"flex items-center justify-between gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-4 min-w-0",children:[e.jsx(x,{rank:n}),e.jsx("div",{className:"font-bold uppercase tracking-tight truncate",children:s.athlete_name})]}),e.jsx("div",{className:"shrink-0",children:e.jsx(g,{value:p(Number(s.total_reps??0),{suffix:"reps"}),toneScore:_(Number(s.total_reps??0),q)})})]},`${s.athlete_name}-reps`))}),w.length===0&&e.jsx("div",{className:"text-center text-muted-foreground py-4",children:"Aucune donnée"})]})]})]})})]})]})}export{ge as default};
