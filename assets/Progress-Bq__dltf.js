import{a as j,r as M,u as Ne,e as en,j as a}from"./vendor-query-BiSH4r2z.js";import{c as tn,g as Ue,u as nn,C as ot,h as st,B as rn,T as an,d as ge}from"./index-Bi5Q4asp.js";import{T as on,a as sn,b as qe,c as _e,d as ln,e as xe}from"./table-DsI3NbCx.js";import{T as cn,a as un,b as lt,c as ct}from"./tabs-BxGTsh9A.js";import{T as ut,a as re}from"./toggle-group-ChZB-W0i.js";import{C as dn,a as pn,b as fn}from"./collapsible-B-a34_2C.js";import{s as bt}from"./score-CwBbkHfb.js";import{g as mn}from"./design-tokens-CKgCpdH6.js";import{b as ve}from"./animations-CrcLFysI.js";import{t as hn,s as He,f as ae}from"./format-B9mPVj_w.js";import{s as U,P as yn,a as gn,B as dt,T as xn}from"./subDays-B4Ha0adF.js";import{m as ce}from"./proxy-Dh0N-Z8G.js";import{f as G,L as V,m as De,i as le,C as Te,A as jt,a as F,b as X,c as vn,d as Ye,h as bn,e as At,u as St,g as $e,G as wt,j as ue,k as Le,D as jn,S as pt,l as An,n as Sn,o as Pt,E as wn,p as Pn,q as Ot,r as Nt,X as ee,Y as be,s as _t,B as ke,R as ie,T as oe,t as ft}from"./generateCategoricalChart-DDDginPf.js";import{L as Dt}from"./Line-DhP5mQnT.js";import{C as On}from"./chevron-down-B1V3hphZ.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-supabase-6k692oZB.js";import"./index-aLWxdOsR.js";import"./index-DWC9zlT1.js";import"./index-B99hDY-k.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nn=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],_n=tn("chart-column",Nn);var Dn=["layout","type","stroke","connectNulls","isRange","ref"],Cn=["key"],Ct;function de(t){"@babel/helpers - typeof";return de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(t)}function Et(t,e){if(t==null)return{};var r=En(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function En(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},te.apply(this,arguments)}function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?mt(Object(r),!0).forEach(function(n){W(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ht(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kt(n.key),n)}}function kn(t,e,r){return e&&ht(t.prototype,e),r&&ht(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function $n(t,e,r){return e=Re(e),Ln(t,Tt()?Reflect.construct(e,r||[],Re(t).constructor):e.apply(t,r))}function Ln(t,e){if(e&&(de(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rn(t)}function Rn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tt=function(){return!!t})()}function Re(t){return Re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Re(t)}function Mn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xe(t,e)}function Xe(t,e){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Xe(t,e)}function W(t,e,r){return e=kt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kt(t){var e=Kn(t,"string");return de(e)=="symbol"?e:e+""}function Kn(t,e){if(de(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(de(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var q=(function(t){function e(){var r;Tn(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=$n(this,e,[].concat(i)),W(r,"state",{isAnimationFinished:!0}),W(r,"id",St("recharts-area-")),W(r,"handleAnimationEnd",function(){var l=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),$e(l)&&l()}),W(r,"handleAnimationStart",function(){var l=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),$e(l)&&l()}),r}return Mn(e,t),kn(e,[{key:"renderDots",value:function(n,i,s){var l=this.props.isAnimationActive,c=this.state.isAnimationFinished;if(l&&!c)return null;var d=this.props,p=d.dot,u=d.points,f=d.dataKey,m=G(this.props,!1),g=G(p,!0),x=u.map(function(v,O){var A=Y(Y(Y({key:"dot-".concat(O),r:3},m),g),{},{index:O,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:u});return e.renderDotItem(p,A)}),P={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return j.createElement(V,te({className:"recharts-area-dots"},P),x)}},{key:"renderHorizontalRect",value:function(n){var i=this.props,s=i.baseLine,l=i.points,c=i.strokeWidth,d=l[0].x,p=l[l.length-1].x,u=n*Math.abs(d-p),f=De(l.map(function(m){return m.y||0}));return le(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(De(s.map(function(m){return m.y||0})),f)),le(f)?j.createElement("rect",{x:d<p?d:d-u,y:0,width:u,height:Math.floor(f+(c?parseInt("".concat(c),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var i=this.props,s=i.baseLine,l=i.points,c=i.strokeWidth,d=l[0].y,p=l[l.length-1].y,u=n*Math.abs(d-p),f=De(l.map(function(m){return m.x||0}));return le(s)&&typeof s=="number"?f=Math.max(s,f):s&&Array.isArray(s)&&s.length&&(f=Math.max(De(s.map(function(m){return m.x||0})),f)),le(f)?j.createElement("rect",{x:0,y:d<p?d:d-u,width:f+(c?parseInt("".concat(c),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(n){var i=this.props.layout;return i==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,i,s,l){var c=this.props,d=c.layout,p=c.type,u=c.stroke,f=c.connectNulls,m=c.isRange;c.ref;var g=Et(c,Dn);return j.createElement(V,{clipPath:s?"url(#clipPath-".concat(l,")"):null},j.createElement(Te,te({},G(g,!0),{points:n,connectNulls:f,type:p,baseLine:i,layout:d,stroke:"none",className:"recharts-area-area"})),u!=="none"&&j.createElement(Te,te({},G(this.props,!1),{className:"recharts-area-curve",layout:d,type:p,connectNulls:f,fill:"none",points:n})),u!=="none"&&m&&j.createElement(Te,te({},G(this.props,!1),{className:"recharts-area-curve",layout:d,type:p,connectNulls:f,fill:"none",points:i})))}},{key:"renderAreaWithAnimation",value:function(n,i){var s=this,l=this.props,c=l.points,d=l.baseLine,p=l.isAnimationActive,u=l.animationBegin,f=l.animationDuration,m=l.animationEasing,g=l.animationId,x=this.state,P=x.prevPoints,v=x.prevBaseLine;return j.createElement(jt,{begin:u,duration:f,isActive:p,easing:m,from:{t:0},to:{t:1},key:"area-".concat(g),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(O){var A=O.t;if(P){var S=P.length/c.length,b=c.map(function(T,K){var L=Math.floor(K*S);if(P[L]){var R=P[L],B=F(R.x,T.x),Q=F(R.y,T.y);return Y(Y({},T),{},{x:B(A),y:Q(A)})}return T}),w;if(le(d)&&typeof d=="number"){var _=F(v,d);w=_(A)}else if(X(d)||vn(d)){var E=F(v,0);w=E(A)}else w=d.map(function(T,K){var L=Math.floor(K*S);if(v[L]){var R=v[L],B=F(R.x,T.x),Q=F(R.y,T.y);return Y(Y({},T),{},{x:B(A),y:Q(A)})}return T});return s.renderAreaStatically(b,w,n,i)}return j.createElement(V,null,j.createElement("defs",null,j.createElement("clipPath",{id:"animationClipPath-".concat(i)},s.renderClipRect(A))),j.createElement(V,{clipPath:"url(#animationClipPath-".concat(i,")")},s.renderAreaStatically(c,d,n,i)))})}},{key:"renderArea",value:function(n,i){var s=this.props,l=s.points,c=s.baseLine,d=s.isAnimationActive,p=this.state,u=p.prevPoints,f=p.prevBaseLine,m=p.totalLength;return d&&l&&l.length&&(!u&&m>0||!Ye(u,l)||!Ye(f,c))?this.renderAreaWithAnimation(n,i):this.renderAreaStatically(l,c,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,l=i.dot,c=i.points,d=i.className,p=i.top,u=i.left,f=i.xAxis,m=i.yAxis,g=i.width,x=i.height,P=i.isAnimationActive,v=i.id;if(s||!c||!c.length)return null;var O=this.state.isAnimationFinished,A=c.length===1,S=Ue("recharts-area",d),b=f&&f.allowDataOverflow,w=m&&m.allowDataOverflow,_=b||w,E=X(v)?this.id:v,T=(n=G(l,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},K=T.r,L=K===void 0?3:K,R=T.strokeWidth,B=R===void 0?2:R,Q=bn(l)?l:{},ne=Q.clipDot,Se=ne===void 0?!0:ne,z=L*2+B;return j.createElement(V,{className:S},b||w?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(E)},j.createElement("rect",{x:b?u:u-g/2,y:w?p:p-x/2,width:b?g:g*2,height:w?x:x*2})),!Se&&j.createElement("clipPath",{id:"clipPath-dots-".concat(E)},j.createElement("rect",{x:u-z/2,y:p-z/2,width:g+z,height:x+z}))):null,A?null:this.renderArea(_,E),(l||A)&&this.renderDots(_,Se,E),(!P||O)&&At.renderCallByParent(this.props,c))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:i.curPoints,prevBaseLine:i.curBaseLine}:n.points!==i.curPoints||n.baseLine!==i.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(M.PureComponent);Ct=q;W(q,"displayName","Area");W(q,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!wt.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});W(q,"getBaseValue",function(t,e,r,n){var i=t.layout,s=t.baseValue,l=e.props.baseValue,c=l??s;if(le(c)&&typeof c=="number")return c;var d=i==="horizontal"?n:r,p=d.scale.domain();if(d.type==="number"){var u=Math.max(p[0],p[1]),f=Math.min(p[0],p[1]);return c==="dataMin"?f:c==="dataMax"||u<0?u:Math.max(Math.min(p[0],p[1]),0)}return c==="dataMin"?p[0]:c==="dataMax"?p[1]:p[0]});W(q,"getComposedData",function(t){var e=t.props,r=t.item,n=t.xAxis,i=t.yAxis,s=t.xAxisTicks,l=t.yAxisTicks,c=t.bandSize,d=t.dataKey,p=t.stackedData,u=t.dataStartIndex,f=t.displayedData,m=t.offset,g=e.layout,x=p&&p.length,P=Ct.getBaseValue(e,r,n,i),v=g==="horizontal",O=!1,A=f.map(function(b,w){var _;x?_=p[u+w]:(_=ue(b,d),Array.isArray(_)?O=!0:_=[P,_]);var E=_[1]==null||x&&ue(b,d)==null;return v?{x:Le({axis:n,ticks:s,bandSize:c,entry:b,index:w}),y:E?null:i.scale(_[1]),value:_,payload:b}:{x:E?null:n.scale(_[1]),y:Le({axis:i,ticks:l,bandSize:c,entry:b,index:w}),value:_,payload:b}}),S;return x||O?S=A.map(function(b){var w=Array.isArray(b.value)?b.value[0]:null;return v?{x:b.x,y:w!=null&&b.y!=null?i.scale(w):null}:{x:w!=null?n.scale(w):null,y:b.y}}):S=v?i.scale(P):n.scale(P),Y({points:A,baseLine:S,layout:g,isRange:O},m)});W(q,"renderDotItem",function(t,e){var r;if(j.isValidElement(t))r=j.cloneElement(t,e);else if($e(t))r=t(e);else{var n=Ue("recharts-area-dot",typeof t!="boolean"?t.className:""),i=e.key,s=Et(e,Cn);r=j.createElement(jn,te({},s,{key:i,className:n}))}return r});function pe(t){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(t)}function Bn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function In(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rt(n.key),n)}}function zn(t,e,r){return e&&In(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Fn(t,e,r){return e=Me(e),Vn(t,$t()?Reflect.construct(e,r||[],Me(t).constructor):e.apply(t,r))}function Vn(t,e){if(e&&(pe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wn(t)}function Wn(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($t=function(){return!!t})()}function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Me(t)}function qn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ze(t,e)}function Ze(t,e){return Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ze(t,e)}function Lt(t,e,r){return e=Rt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rt(t){var e=Hn(t,"string");return pe(e)=="symbol"?e:e+""}function Hn(t,e){if(pe(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(pe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Be=(function(t){function e(){return Bn(this,e),Fn(this,e,arguments)}return qn(e,t),zn(e,[{key:"render",value:function(){return null}}])})(M.Component);Lt(Be,"displayName","ZAxis");Lt(Be,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var Gn=["option","isActive"];function je(){return je=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},je.apply(this,arguments)}function Qn(t,e){if(t==null)return{};var r=Yn(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yn(t,e){if(t==null)return{};var r={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;r[n]=t[n]}return r}function Xn(t){var e=t.option,r=t.isActive,n=Qn(t,Gn);return typeof e=="string"?M.createElement(pt,je({option:M.createElement(An,je({type:e},n)),isActive:r,shapeType:"symbols"},n)):M.createElement(pt,je({option:e,isActive:r,shapeType:"symbols"},n))}function fe(t){"@babel/helpers - typeof";return fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(t)}function Ae(){return Ae=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ae.apply(this,arguments)}function yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function I(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yt(Object(r),!0).forEach(function(n){Z(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Zn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kt(n.key),n)}}function Jn(t,e,r){return e&&gt(t.prototype,e),r&&gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Un(t,e,r){return e=Ke(e),er(t,Mt()?Reflect.construct(e,r||[],Ke(t).constructor):e.apply(t,r))}function er(t,e){if(e&&(fe(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tr(t)}function tr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mt=function(){return!!t})()}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ke(t)}function nr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Je(t,e)}function Z(t,e,r){return e=Kt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Kt(t){var e=rr(t,"string");return fe(e)=="symbol"?e:e+""}function rr(t,e){if(fe(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e);if(fe(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Ie=(function(t){function e(){var r;Zn(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=Un(this,e,[].concat(i)),Z(r,"state",{isAnimationFinished:!1}),Z(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0})}),Z(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1})}),Z(r,"id",St("recharts-scatter-")),r}return nr(e,t),Jn(e,[{key:"renderSymbolsStatically",value:function(n){var i=this,s=this.props,l=s.shape,c=s.activeShape,d=s.activeIndex,p=G(this.props,!1);return n.map(function(u,f){var m=d===f,g=m?c:l,x=I(I({},p),u);return j.createElement(V,Ae({className:"recharts-scatter-symbol",key:"symbol-".concat(u?.cx,"-").concat(u?.cy,"-").concat(u?.size,"-").concat(f)},Sn(i.props,u,f),{role:"img"}),j.createElement(Xn,Ae({option:g,isActive:m,key:"symbol-".concat(f)},x)))})}},{key:"renderSymbolsWithAnimation",value:function(){var n=this,i=this.props,s=i.points,l=i.isAnimationActive,c=i.animationBegin,d=i.animationDuration,p=i.animationEasing,u=i.animationId,f=this.state.prevPoints;return j.createElement(jt,{begin:c,duration:d,isActive:l,easing:p,from:{t:0},to:{t:1},key:"pie-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,x=s.map(function(P,v){var O=f&&f[v];if(O){var A=F(O.cx,P.cx),S=F(O.cy,P.cy),b=F(O.size,P.size);return I(I({},P),{},{cx:A(g),cy:S(g),size:b(g)})}var w=F(0,P.size);return I(I({},P),{},{size:w(g)})});return j.createElement(V,null,n.renderSymbolsStatically(x))})}},{key:"renderSymbols",value:function(){var n=this.props,i=n.points,s=n.isAnimationActive,l=this.state.prevPoints;return s&&i&&i.length&&(!l||!Ye(l,i))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(i)}},{key:"renderErrorBar",value:function(){var n=this.props.isAnimationActive;if(n&&!this.state.isAnimationFinished)return null;var i=this.props,s=i.points,l=i.xAxis,c=i.yAxis,d=i.children,p=Pt(d,wn);return p?p.map(function(u,f){var m=u.props,g=m.direction,x=m.dataKey;return j.cloneElement(u,{key:"".concat(g,"-").concat(x,"-").concat(s[f]),data:s,xAxis:l,yAxis:c,layout:g==="x"?"vertical":"horizontal",dataPointFormatter:function(v,O){return{x:v.cx,y:v.cy,value:g==="x"?+v.node.x:+v.node.y,errorVal:ue(v,O)}}})}):null}},{key:"renderLine",value:function(){var n=this.props,i=n.points,s=n.line,l=n.lineType,c=n.lineJointType,d=G(this.props,!1),p=G(s,!1),u,f;if(l==="joint")u=i.map(function(S){return{x:S.cx,y:S.cy}});else if(l==="fitting"){var m=Pn(i),g=m.xmin,x=m.xmax,P=m.a,v=m.b,O=function(b){return P*b+v};u=[{x:g,y:O(g)},{x,y:O(x)}]}var A=I(I(I({},d),{},{fill:"none",stroke:d&&d.fill},p),{},{points:u});return j.isValidElement(s)?f=j.cloneElement(s,A):$e(s)?f=s(A):f=j.createElement(Te,Ae({},A,{type:c})),j.createElement(V,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.points,l=n.line,c=n.className,d=n.xAxis,p=n.yAxis,u=n.left,f=n.top,m=n.width,g=n.height,x=n.id,P=n.isAnimationActive;if(i||!s||!s.length)return null;var v=this.state.isAnimationFinished,O=Ue("recharts-scatter",c),A=d&&d.allowDataOverflow,S=p&&p.allowDataOverflow,b=A||S,w=X(x)?this.id:x;return j.createElement(V,{className:O,clipPath:b?"url(#clipPath-".concat(w,")"):null},A||S?j.createElement("defs",null,j.createElement("clipPath",{id:"clipPath-".concat(w)},j.createElement("rect",{x:A?u:u-m/2,y:S?f:f-g/2,width:A?m:m*2,height:S?g:g*2}))):null,l&&this.renderLine(),this.renderErrorBar(),j.createElement(V,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!P||v)&&At.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}}])})(M.PureComponent);Z(Ie,"displayName","Scatter");Z(Ie,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!wt.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});Z(Ie,"getComposedData",function(t){var e=t.xAxis,r=t.yAxis,n=t.zAxis,i=t.item,s=t.displayedData,l=t.xAxisTicks,c=t.yAxisTicks,d=t.offset,p=i.props.tooltipType,u=Pt(i.props.children,Ot),f=X(e.dataKey)?i.props.dataKey:e.dataKey,m=X(r.dataKey)?i.props.dataKey:r.dataKey,g=n&&n.dataKey,x=n?n.range:Be.defaultProps.range,P=x&&x[0],v=e.scale.bandwidth?e.scale.bandwidth():0,O=r.scale.bandwidth?r.scale.bandwidth():0,A=s.map(function(S,b){var w=ue(S,f),_=ue(S,m),E=!X(g)&&ue(S,g)||"-",T=[{name:X(e.dataKey)?i.props.name:e.name||e.dataKey,unit:e.unit||"",value:w,payload:S,dataKey:f,type:p},{name:X(r.dataKey)?i.props.name:r.name||r.dataKey,unit:r.unit||"",value:_,payload:S,dataKey:m,type:p}];E!=="-"&&T.push({name:n.name||n.dataKey,unit:n.unit||"",value:E,payload:S,dataKey:g,type:p});var K=Le({axis:e,ticks:l,bandSize:v,entry:S,index:b,dataKey:f}),L=Le({axis:r,ticks:c,bandSize:O,entry:S,index:b,dataKey:m}),R=E!=="-"?n.scale(E):P,B=Math.sqrt(Math.max(R,0)/Math.PI);return I(I({},S),{},{cx:K,cy:L,x:K-B,y:L-B,xAxis:e,yAxis:r,zAxis:n,width:2*B,height:2*B,size:R,node:{x:w,y:_,z:E},tooltipPayload:T,tooltipPosition:{x:K,y:L},payload:S},u&&u[b]&&u[b].props)});return I({points:A},d)});var xt=Nt({chartName:"AreaChart",GraphicalChild:q,axisComponents:[{axisType:"xAxis",AxisComp:ee},{axisType:"yAxis",AxisComp:be}],formatAxisMap:_t}),ar=Nt({chartName:"ComposedChart",GraphicalChild:[Dt,q,ke,Ie],axisComponents:[{axisType:"xAxis",AxisComp:ee},{axisType:"yAxis",AxisComp:be},{axisType:"zAxis",AxisComp:Be}],formatAxisMap:_t});function ir(t){const e=hn(t);return e.setHours(23,59,59,999),e}function Ce({label:t,value:e,max:r,invert:n=!1}){const i=e!==null?Math.min(100,e/r*100):0,s=bt(e??null,{invert:n})??"hsl(var(--muted-foreground))";return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"w-28 shrink-0 text-xs text-muted-foreground truncate",children:t}),a.jsx("div",{className:"relative h-2 flex-1 rounded-full bg-muted overflow-hidden",children:a.jsx(ce.div,{className:"absolute inset-y-0 left-0 rounded-full",style:{backgroundColor:s},initial:{width:0},animate:{width:`${i}%`},transition:{duration:.6,ease:"easeOut"}})}),a.jsx("span",{className:"w-10 text-right text-sm font-mono font-semibold tabular-nums",children:e!==null?e.toFixed(1):"-"})]})}function vt({value:t,unit:e,label:r,trend:n,trendLabel:i}){return a.jsxs(ce.div,{className:"flex flex-col items-center gap-0.5 py-2",variants:ve,initial:"hidden",animate:"visible",children:[a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-4xl font-mono font-bold tracking-tight",children:t}),e&&a.jsx("span",{className:"text-lg font-mono text-muted-foreground",children:e})]}),a.jsx("span",{className:"text-sm text-muted-foreground",children:r}),n!=null&&a.jsxs("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-0.5 text-xs font-medium ${n>=0?"bg-emerald-500/10 text-emerald-600":"bg-red-500/10 text-red-600"}`,children:[n>=0?a.jsx(an,{className:"h-3 w-3"}):a.jsx(xn,{className:"h-3 w-3"}),n>=0?"+":"",n.toFixed(0),"%",i?` ${i}`:""]})]})}function se({value:t,label:e,colored:r,colorValue:n,invert:i}){const s="rounded-full px-3 py-1 text-sm font-mono";if(r&&n!==null&&n!==void 0){const l=bt(n,{invert:i})??"hsl(var(--muted-foreground))";return a.jsx("span",{className:s,style:{backgroundColor:l,color:mn(l)},children:t})}return a.jsxs("span",{className:`${s} bg-muted text-muted-foreground`,children:[t,e?` ${e}`:""]})}function Ge(){return a.jsx("div",{className:"space-y-3 animate-pulse motion-reduce:animate-none",children:a.jsx("div",{className:"h-[180px] w-full rounded-xl bg-muted"})})}function Qe({title:t,children:e}){const[r,n]=M.useState(!1);return a.jsxs(dn,{open:r,onOpenChange:n,children:[a.jsxs(pn,{className:"flex w-full items-center justify-between rounded-lg bg-muted/50 px-4 py-3 text-sm font-semibold hover:bg-muted transition-colors",children:[t,a.jsx(On,{className:`h-4 w-4 text-muted-foreground transition-transform duration-200 ${r?"rotate-180":""}`})]}),a.jsx(fn,{className:"pt-4 animate-in fade-in slide-in-from-top-2 motion-reduce:animate-none",children:e})]})}const Ee={borderRadius:"8px",border:"none",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"};function Nr(){const{user:t,userId:e,role:r,selectedAthleteId:n,selectedAthleteName:i}=nn(),s=(r==="coach"||r==="admin")&&(n!==null||!!i),l=s?i:t,c=s?n:e,d=c??l,[p]=M.useState("all"),[u]=M.useState(""),[f]=M.useState(""),[m,g]=M.useState(30),[x,P]=M.useState(30),{data:v,isLoading:O}=Ne({queryKey:["sessions",d],queryFn:()=>ge.getSessions(l,c),enabled:!!l}),A=en({queryKey:["strength_history",d,"progress",p,u,f],queryFn:({pageParam:o=0})=>ge.getStrengthHistory(l,{athleteId:c,limit:10,offset:o,order:"desc",status:p==="all"?void 0:p,from:u||void 0,to:f||void 0}),enabled:!!l,getNextPageParam:o=>{const h=o.pagination.offset+o.pagination.limit;return h<o.pagination.total?h:void 0},initialPageParam:0}),S=A.data?.pages.flatMap(o=>o.runs)??[],b=He(U(new Date,x)).toISOString(),w=ir(new Date).toISOString(),_=He(U(new Date,x*2)).toISOString(),E=He(U(new Date,x)).toISOString(),{data:T,isLoading:K}=Ne({queryKey:["strength_history_summary",d,"progress",x,b,w],queryFn:()=>ge.getStrengthHistory(l,{athleteId:c,limit:200,order:"desc",from:b,to:w}),enabled:!!l}),{data:L,isLoading:R}=Ne({queryKey:["strength_history_aggregate",d,"progress",x,b,w],queryFn:()=>ge.getStrengthHistoryAggregate(l,{athleteId:c,period:"day",limit:200,order:"asc",from:b,to:w}),enabled:!!l}),{data:B}=Ne({queryKey:["strength_history_aggregate_prev",d,"progress",x,_,E],queryFn:()=>ge.getStrengthHistoryAggregate(l,{athleteId:c,period:"day",limit:200,order:"asc",from:_,to:E}),enabled:!!l}),Q=K||R,ne=T?.runs??[],Se=T?.exercise_summary??[],z=L?.periods??[],Bt=B?.periods??[],It=o=>{if(!v)return[];const h=U(new Date,o),C=v.filter(y=>new Date(y.date)>=h).reverse(),k=new Map;return C.forEach(y=>{const N=ae(new Date(y.date),"dd/MM");k.has(N)||k.set(N,{date:N,distance:0,effort:0,rpe:0,performance:0,engagement:0,fatigue:0,count:0,rpeCount:0,performanceCount:0,engagementCount:0,fatigueCount:0});const D=k.get(N);D.distance+=y.distance,D.effort+=y.effort,D.count+=1,y.rpe!==null&&y.rpe!==void 0&&(D.rpe+=y.rpe,D.rpeCount+=1),y.performance!==null&&y.performance!==void 0&&(D.performance+=y.performance,D.performanceCount+=1),y.engagement!==null&&y.engagement!==void 0&&(D.engagement+=y.engagement,D.engagementCount+=1),y.fatigue!==null&&y.fatigue!==void 0&&(D.fatigue+=y.fatigue,D.fatigueCount+=1)}),Array.from(k.values()).map(y=>({...y,effort:Math.round(y.effort/y.count*10)/10,rpe:y.rpeCount?Math.round(y.rpe/y.rpeCount*10)/10:null,performance:y.performanceCount?Math.round(y.performance/y.performanceCount*10)/10:null,engagement:y.engagementCount?Math.round(y.engagement/y.engagementCount*10)/10:null,fatigue:y.fatigueCount?Math.round(y.fatigue/y.fatigueCount*10)/10:null}))},me=v?v.filter(o=>new Date(o.date)>=U(new Date,m)):[],he=me.length,$=me.reduce((o,h)=>(o.distance+=h.distance,o.duration+=h.duration,h.rpe!==null&&h.rpe!==void 0&&(o.rpeSum+=h.rpe,o.rpeCount+=1),h.performance!==null&&h.performance!==void 0&&(o.performanceSum+=h.performance,o.performanceCount+=1),h.engagement!==null&&h.engagement!==void 0&&(o.engagementSum+=h.engagement,o.engagementCount+=1),h.fatigue!==null&&h.fatigue!==void 0&&(o.fatigueSum+=h.fatigue,o.fatigueCount+=1),o),{distance:0,duration:0,rpeSum:0,rpeCount:0,performanceSum:0,performanceCount:0,engagementSum:0,engagementCount:0,fatigueSum:0,fatigueCount:0}),zt=$.rpeCount?$.rpeSum/$.rpeCount:null,Ft=$.performanceCount?$.performanceSum/$.performanceCount:null,Vt=$.engagementCount?$.engagementSum/$.engagementCount:null,Wt=$.fatigueCount?$.fatigueSum/$.fatigueCount:null,qt=he?$.duration/he:0,Ht=he?$.distance/he:0,et=It(m),Gt=v?((o,h,C,k)=>{const y=new Date,N=U(y,C*2),D=U(y,C),ye=h.filter(J=>{const H=new Date(J.date);return H>=N&&H<D}).reduce((J,H)=>J+(H.distance??0),0);return ye===0?null:(o-ye)/ye*100})($.distance,v,m):null,ze=["NL","DOS","BR","PAP","QN"],tt={NL:"NL",DOS:"Dos",BR:"Brasse",PAP:"Pap",QN:"4N"},nt={NL:"hsl(210, 80%, 55%)",DOS:"hsl(160, 60%, 45%)",BR:"hsl(35, 85%, 55%)",PAP:"hsl(280, 60%, 55%)",QN:"hsl(340, 70%, 55%)"},we=M.useMemo(()=>{if(!me.length)return{pie:[],daily:[],hasData:!1};const o={NL:0,DOS:0,BR:0,PAP:0,QN:0};let h=!1;const C=new Map;for(const N of me){const D=N.stroke_distances;if(!D)continue;const Oe=ae(new Date(N.date),"dd/MM");C.has(Oe)||C.set(Oe,{NL:0,DOS:0,BR:0,PAP:0,QN:0});const ye=C.get(Oe);for(const J of ze){const H=D[J];H&&H>0&&(o[J]+=H,ye[J]+=H,h=!0)}}const k=ze.filter(N=>o[N]>0).map(N=>({name:tt[N],value:o[N],fill:nt[N]})),y=Array.from(C.entries()).map(([N,D])=>({date:N,...D}));return{pie:k,daily:y,hasData:h}},[me]),Fe=o=>{const C=(Array.isArray(o?.logs)?o.logs:[]).map(N=>N?.rpe!==null&&N?.rpe!==void 0?Number(N.rpe):null).filter(N=>N!==null&&Number.isFinite(N));if(C.length>0)return C.reduce((N,D)=>N+D,0)/C.length;const k=o?.feeling??o?.rpe??null,y=k!=null?Number(k):null;return y!==null&&Number.isFinite(y)?y:null},Qt=o=>o==null||Number.isNaN(o)?"-":o.toFixed(1),rt=[...ne].sort((o,h)=>{const C=new Date(o.started_at||o.date||o.created_at||0).getTime(),k=new Date(h.started_at||h.date||h.created_at||0).getTime();return C-k}).map(o=>({date:ae(new Date(o.started_at||o.date||o.created_at||new Date),"dd/MM"),feeling:Fe(o)})),at=z.map(o=>({date:o.period,label:ae(new Date(o.period),"dd/MM"),tonnage:Math.round(o.tonnage??0),volume:Math.round(o.volume??0)})),Yt=z.reduce((o,h)=>o+(h.tonnage??0),0),Xt=z.reduce((o,h)=>o+(h.volume??0),0),Zt=ne.length,Ve=ne.map(o=>Fe(o)).filter(o=>o!==null&&Number.isFinite(o)),Pe=Ve.length?Ve.reduce((o,h)=>o+h,0)/Ve.length:null,We=[...Se].map(o=>({exerciseId:Number(o.exercise_id),name:o.exercise_name||`Exercice ${o.exercise_id}`,totalSets:Number(o.total_sets??0),totalReps:Number(o.total_reps??0),totalVolume:Number(o.total_volume??0),maxWeight:o.max_weight!==null&&o.max_weight!==void 0?Number(o.max_weight):null,lastPerformedAt:o.last_performed_at??null})).sort((o,h)=>h.totalVolume-o.totalVolume),Jt=(()=>{if(!z.length)return null;const o=z.reduce((C,k)=>C+(k.tonnage??0),0),h=Bt.reduce((C,k)=>C+(k.tonnage??0),0);return h===0?null:(o-h)/h*100})(),it=We.slice(0,8),Ut=o=>{if(!o)return"-";const h=new Date(o);return Number.isNaN(h.getTime())?"-":ae(h,"dd/MM/yyyy")};return a.jsxs("div",{className:"space-y-4 pb-4",children:[a.jsx("div",{className:"sticky top-0 z-overlay -mx-4 backdrop-blur-md bg-background/90 border-b border-primary/15",children:a.jsxs("div",{className:"px-4 py-2.5 flex items-center gap-2.5",children:[a.jsx("div",{className:"flex items-center justify-center h-7 w-7 rounded-lg bg-primary text-primary-foreground",children:a.jsx(_n,{className:"h-3.5 w-3.5"})}),a.jsx("h1",{className:"text-lg font-display font-bold uppercase italic tracking-tight text-primary",children:"Progression"})]})}),a.jsxs(cn,{defaultValue:"swim",className:"w-full",children:[a.jsxs(un,{className:"grid w-full max-w-[280px] grid-cols-2",children:[a.jsx(lt,{value:"swim",children:"Natation"}),a.jsx(lt,{value:"strength",children:"Musculation"})]}),a.jsxs(ct,{value:"swim",className:"space-y-4 mt-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(ut,{type:"single",size:"sm",variant:"outline",value:String(m),onValueChange:o=>o&&g(Number(o)),className:"gap-1",children:[a.jsx(re,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),a.jsx(re,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),a.jsx(re,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),a.jsx(vt,{value:$.distance.toLocaleString(),unit:"m",label:`volume sur ${m} jours`,trend:Gt,trendLabel:"vs période préc."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[a.jsx(se,{value:`${he} séances`}),a.jsx(se,{value:`${Math.round(Ht).toLocaleString()}m moy`}),a.jsx(se,{value:`${Math.round(qt)}min moy`})]}),a.jsx(ce.div,{variants:ve,initial:"hidden",animate:"visible",children:a.jsx(ot,{className:"border-0 shadow-none bg-transparent",children:a.jsx(st,{className:"p-0 h-[140px] w-full",children:O?a.jsx(Ge,{}):et.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(ie,{width:"100%",height:"100%",children:a.jsxs(xt,{data:et,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"swimVolumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),a.jsx("stop",{offset:"100%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),a.jsx(ee,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(oe,{contentStyle:Ee,formatter:o=>[`${o.toLocaleString()}m`,"Volume"]}),a.jsx(q,{type:"monotone",dataKey:"distance",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#swimVolumeGradient)",dot:!1,activeDot:{r:5,strokeWidth:2}})]})})})})}),a.jsxs(ce.div,{className:"space-y-3",variants:ve,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Ressentis moyens"}),a.jsx(Ce,{label:"Difficulté",value:zt,max:5,invert:!0}),a.jsx(Ce,{label:"Performance",value:Ft,max:5}),a.jsx(Ce,{label:"Engagement",value:Vt,max:5}),a.jsx(Ce,{label:"Fatigue",value:Wt,max:5,invert:!0})]}),we.hasData&&a.jsx(Qe,{title:`Répartition par nage (${m}j)`,children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[a.jsx("div",{className:"h-[280px] w-full",children:a.jsx(ie,{width:"100%",height:"100%",children:a.jsxs(yn,{children:[a.jsx(gn,{data:we.pie,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:90,label:({name:o,percent:h})=>`${o} ${(h*100).toFixed(0)}%`,children:we.pie.map((o,h)=>a.jsx(Ot,{fill:o.fill},`pie-${h}`))}),a.jsx(oe,{formatter:o=>[`${o.toLocaleString()}m`,"Distance"]}),a.jsx(ft,{})]})})}),a.jsx("div",{className:"h-[280px] w-full",children:a.jsx(ie,{width:"100%",height:"100%",children:a.jsxs(dt,{data:we.daily,children:[a.jsx(ee,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(be,{fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(oe,{}),ze.map(o=>a.jsx(ke,{dataKey:o,stackId:"strokes",name:tt[o],fill:nt[o],radius:0},o)),a.jsx(ft,{})]})})})]})})]}),a.jsxs(ct,{value:"strength",className:"space-y-4 mt-4",children:[a.jsx("div",{className:"flex justify-end",children:a.jsxs(ut,{type:"single",size:"sm",variant:"outline",value:String(x),onValueChange:o=>o&&P(Number(o)),className:"gap-1",children:[a.jsx(re,{value:"7",className:"h-8 px-3 text-xs",children:"7j"}),a.jsx(re,{value:"30",className:"h-8 px-3 text-xs",children:"30j"}),a.jsx(re,{value:"365",className:"h-8 px-3 text-xs",children:"1 an"})]})}),a.jsx(vt,{value:Math.round(Yt).toLocaleString(),unit:"kg",label:`tonnage sur ${x} jours`,trend:Jt,trendLabel:"vs période préc."}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[a.jsx(se,{value:`${Zt} séances`}),a.jsx(se,{value:`${Math.round(Xt).toLocaleString()} reps`}),a.jsx(se,{value:`RPE ${Pe!==null?Pe.toFixed(1):"-"}/10`,colored:!0,colorValue:Pe!==null?Pe/2:null,invert:!0})]}),a.jsx(ce.div,{variants:ve,initial:"hidden",animate:"visible",children:a.jsx(ot,{className:"border-0 shadow-none bg-transparent",children:a.jsx(st,{className:"p-0 h-[140px] w-full",children:Q?a.jsx(Ge,{}):at.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(ie,{width:"100%",height:"100%",children:a.jsxs(ar,{data:at,children:[a.jsx(ee,{dataKey:"label",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(oe,{contentStyle:Ee}),a.jsx(ke,{dataKey:"tonnage",name:"Tonnage (kg)",fill:"hsl(var(--primary))",radius:[4,4,0,0],opacity:.7}),a.jsx(Dt,{type:"monotone",dataKey:"volume",name:"Volume (reps)",stroke:"hsl(var(--accent))",strokeWidth:2,dot:!1})]})})})})}),a.jsxs(ce.div,{variants:ve,initial:"hidden",animate:"visible",children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider text-muted-foreground mb-3",children:"Ressenti par séance"}),a.jsx("div",{className:"h-[130px] w-full",children:Q?a.jsx(Ge,{}):rt.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucune donnée disponible."}):a.jsx(ie,{width:"100%",height:"100%",children:a.jsxs(xt,{data:rt,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"strengthFeelingGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"0%",stopColor:"hsl(var(--foreground))",stopOpacity:.15}),a.jsx("stop",{offset:"100%",stopColor:"hsl(var(--foreground))",stopOpacity:0})]})}),a.jsx(ee,{dataKey:"date",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(be,{domain:[0,10],hide:!0}),a.jsx(oe,{contentStyle:Ee,formatter:o=>[o!==null?o.toFixed(1):"-","RPE"]}),a.jsx(q,{type:"monotone",dataKey:"feeling",stroke:"hsl(var(--foreground))",strokeWidth:2,fill:"url(#strengthFeelingGradient)",dot:{r:4,fill:"hsl(var(--background))",stroke:"hsl(var(--foreground))",strokeWidth:2},activeDot:{r:6}})]})})})]}),a.jsx(Qe,{title:"Détail par exercice",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"h-[220px] w-full",children:it.length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."}):a.jsx(ie,{width:"100%",height:"100%",children:a.jsxs(dt,{data:it,layout:"vertical",children:[a.jsx(ee,{type:"number",fontSize:10,tickLine:!1,axisLine:!1}),a.jsx(be,{type:"category",dataKey:"name",fontSize:10,tickLine:!1,axisLine:!1,width:100}),a.jsx(oe,{contentStyle:Ee,formatter:o=>[`${o.toLocaleString()} kg`,"Volume"]}),a.jsx(ke,{dataKey:"totalVolume",fill:"hsl(var(--primary))",radius:[0,4,4,0]})]})})}),a.jsx("div",{className:"w-full overflow-x-auto",children:a.jsxs(on,{children:[a.jsx(sn,{children:a.jsxs(qe,{children:[a.jsx(_e,{children:"Exercice"}),a.jsx(_e,{className:"text-right",children:"Volume"}),a.jsx(_e,{className:"text-right",children:"Max"}),a.jsx(_e,{className:"text-right",children:"Dernier"})]})}),a.jsx(ln,{children:We.length===0?a.jsx(qe,{children:a.jsx(xe,{colSpan:4,className:"text-center text-sm text-muted-foreground",children:"Aucun exercice enregistré."})}):We.map(o=>a.jsxs(qe,{children:[a.jsx(xe,{className:"font-medium text-sm",children:o.name}),a.jsxs(xe,{className:"text-right font-mono text-sm",children:[o.totalVolume.toLocaleString()," kg"]}),a.jsx(xe,{className:"text-right font-mono text-sm",children:o.maxWeight!==null?`${o.maxWeight} kg`:"-"}),a.jsx(xe,{className:"text-right text-xs text-muted-foreground",children:Ut(o.lastPerformedAt)})]},o.exerciseId))})]})})]})}),a.jsx(Qe,{title:"Historique récent",children:a.jsxs("div",{className:"space-y-3",children:[S.length===0&&a.jsx("div",{className:"text-center text-sm text-muted-foreground py-6",children:"Aucun historique disponible."}),S.map(o=>a.jsxs("div",{className:"flex items-center justify-between border-b border-border/40 pb-2 last:border-b-0 last:pb-0",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-semibold",children:ae(new Date(o.started_at||o.date||o.created_at||new Date),"dd/MM/yyyy")}),a.jsx("div",{className:"text-xs text-muted-foreground",children:o.status||"Séance"})]}),a.jsxs("div",{className:"text-sm font-mono font-semibold",children:[Qt(Fe(o)),"/10"]})]},o.id)),A.hasNextPage&&a.jsx(rn,{variant:"outline",size:"sm",className:"w-full",onClick:()=>A.fetchNextPage(),disabled:A.isFetchingNextPage,children:A.isFetchingNextPage?"Chargement...":"Charger plus"})]})})]})]})]})}export{Ce as ProgressBar,Nr as default};
