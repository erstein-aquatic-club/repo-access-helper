import{c as _,a as k}from"./index-Bj8AzmgP.js";import{r as i,j as r}from"./vendor-ui-DJQMR4VV.js";import{M as F,i as T,u as $,P as W,b as D,c as H,L as K,m as L,d as U}from"./animations-BTr26p-C.js";import{d as q}from"./design-tokens-CGMys_0P.js";import{L as G}from"./loader-circle-CLUUnNlC.js";import{C as V}from"./circle-check-WRbSE2g8.js";import{C as X}from"./circle-alert-Ci0NmZSy.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],de=_("chevron-right",J);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],fe=_("info",O);function I(e,o){if(typeof e=="function")return e(o);e!=null&&(e.current=o)}function Q(...e){return o=>{let t=!1;const n=e.map(c=>{const s=I(c,o);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let c=0;c<n.length;c++){const s=n[c];typeof s=="function"?s():I(e[c],null)}}}}function Y(...e){return i.useCallback(Q(...e),e)}class Z extends i.Component{getSnapshotBeforeUpdate(o){const t=this.props.childRef.current;if(t&&o.isPresent&&!this.props.isPresent){const n=t.offsetParent,c=T(n)&&n.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=c-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function S({children:e,isPresent:o,anchorX:t,root:n}){const c=i.useId(),s=i.useRef(null),m=i.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=i.useContext(F),b=Y(s,e?.ref);return i.useInsertionEffect(()=>{const{width:a,height:y,top:l,left:u,right:p}=m.current;if(o||!s.current||!a||!y)return;const x=t==="left"?`left: ${u}`:`right: ${p}`;s.current.dataset.motionPopId=c;const f=document.createElement("style");C&&(f.nonce=C);const w=n??document.head;return w.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${c}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${y}px !important;
            ${x}px !important;
            top: ${l}px !important;
          }
        `),()=>{w.contains(f)&&w.removeChild(f)}},[o]),r.jsx(Z,{isPresent:o,childRef:s,sizeRef:m,children:i.cloneElement(e,{ref:b})})}const ee=({children:e,initial:o,isPresent:t,onExitComplete:n,custom:c,presenceAffectsLayout:s,mode:m,anchorX:C,root:b})=>{const a=$(te),y=i.useId();let l=!0,u=i.useMemo(()=>(l=!1,{id:y,initial:o,isPresent:t,custom:c,onExitComplete:p=>{a.set(p,!0);for(const x of a.values())if(!x)return;n&&n()},register:p=>(a.set(p,!1),()=>a.delete(p))}),[t,a,n]);return s&&l&&(u={...u}),i.useMemo(()=>{a.forEach((p,x)=>a.set(x,!1))},[t]),i.useEffect(()=>{!t&&!a.size&&n&&n()},[t]),m==="popLayout"&&(e=r.jsx(S,{isPresent:t,anchorX:C,root:b,children:e})),r.jsx(W.Provider,{value:u,children:e})};function te(){return new Map}const R=e=>e.key||"";function N(e){const o=[];return i.Children.forEach(e,t=>{i.isValidElement(t)&&o.push(t)}),o}const ne=({children:e,custom:o,initial:t=!0,onExitComplete:n,presenceAffectsLayout:c=!0,mode:s="sync",propagate:m=!1,anchorX:C="left",root:b})=>{const[a,y]=D(m),l=i.useMemo(()=>N(e),[e]),u=m&&!a?[]:l.map(R),p=i.useRef(!0),x=i.useRef(l),f=$(()=>new Map),[w,z]=i.useState(l),[g,P]=i.useState(l);H(()=>{p.current=!1,x.current=l;for(let h=0;h<g.length;h++){const d=R(g[h]);u.includes(d)?f.delete(d):f.get(d)!==!0&&f.set(d,!1)}},[g,u.length,u.join("-")]);const v=[];if(l!==w){let h=[...l];for(let d=0;d<g.length;d++){const j=g[d],E=R(j);u.includes(E)||(h.splice(d,0,j),v.push(j))}return s==="wait"&&v.length&&(h=v),P(N(h)),z(l),null}const{forceRender:A}=i.useContext(K);return r.jsx(r.Fragment,{children:g.map(h=>{const d=R(h),j=m&&!a?!1:l===g||u.includes(d),E=()=>{if(f.has(d))f.set(d,!0);else return;let M=!0;f.forEach(B=>{B||(M=!1)}),M&&(A?.(),P(x.current),m&&y?.(),n&&n())};return r.jsx(ee,{isPresent:j,initial:!p.current||t?void 0:!1,custom:o,presenceAffectsLayout:c,mode:s,root:b,onExitComplete:j?void 0:E,anchorX:C,children:h},d)})})};function ue({children:e,className:o,containerClassName:t,saveState:n="idle",saveMessage:c}){return r.jsxs("div",{role:"region","aria-label":"Actions",className:k("fixed bottom-16 left-0 right-0 z-bar md:bottom-0 md:z-bar",o),children:[r.jsx(ne,{mode:"wait",children:n!=="idle"&&r.jsxs(L.div,{variants:n==="saved"?U:void 0,initial:"hidden",animate:"visible",exit:{opacity:0,scale:.8},className:k("mx-auto mb-2 flex max-w-md items-center justify-center gap-2 rounded-full px-4 py-2 text-sm font-medium shadow-lg motion-reduce:animate-none",n==="saving"&&"bg-muted text-muted-foreground",n==="saved"&&"bg-status-success text-white",n==="error"&&"bg-destructive text-destructive-foreground"),role:"status","aria-live":"polite",children:[n==="saving"&&r.jsxs(r.Fragment,{children:[r.jsx(G,{className:"h-4 w-4 animate-spin"}),r.jsx("span",{children:c||"Enregistrement..."})]}),n==="saved"&&r.jsxs(r.Fragment,{children:[r.jsx(L.div,{initial:{scale:0},animate:{scale:1},transition:{delay:q.fast,type:"spring",stiffness:300},children:r.jsx(V,{className:"h-4 w-4"})}),r.jsx("span",{children:c||"Enregistr√©"})]}),n==="error"&&r.jsxs(r.Fragment,{children:[r.jsx(X,{className:"h-4 w-4"}),r.jsx("span",{children:c||"Erreur lors de l'enregistrement"})]})]},n)}),r.jsx("div",{className:k("mx-auto flex w-full max-w-md items-center justify-between gap-2 border-t bg-background px-4 py-3 shadow-[0_-2px_10px_rgba(0,0,0,0.1)]","md:supports-[padding:env(safe-area-inset-bottom)]:pb-[calc(env(safe-area-inset-bottom)+0.75rem)]",t),children:e})]})}export{ne as A,ue as B,de as C,fe as I};
