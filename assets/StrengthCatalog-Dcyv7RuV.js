import{r as a,b as Rs,h as Ds,y as It,z as Is,j as e,d as Ft,B as Fs,o as W,u as He,I as Ms,p as As,E as Ps,n as me,H as $s,J as qs,O as Os,K as Ts,c as xe}from"./vendor-ui-M0btmmZ9.js";import{b as Ks,u as je,c as X}from"./vendor-query-CwV3kFk7.js";import{c as Je,a as Q,D as Xe,C as Ls,L as F,I as G,f as Gs,d as U,B as ae,S as De,s as dt}from"./index-GnKdIVhx.js";import{u as Us,S as Ie,a as Fe,b as Me,c as Ae,d as te}from"./select-CL-0kLzJ.js";import{C as zs}from"./circle-c32AIeJk.js";import{T as be}from"./textarea-BNTiBqN-.js";import{D as Ne,a as we,b as Ke,c as Le}from"./dialog-HVMv34MH.js";import{C as ut}from"./checkbox-CHDB6e_8.js";import{A as mt,a as pt,b as xt,c as ft,d as ht,e as gt,f as vt,g as jt}from"./alert-dialog-C9FhJMId.js";import{T as Mt,a as At,b as Ge,c as Ue}from"./tabs-d7E2Mcxt.js";import{A as Bs,a as Vs,F as Qs,S as Ws,b as Hs,c as Js,d as yt}from"./SessionListView-DuPgGVQL.js";import{D as Xs,a as Ys,b as Zs,c as er}from"./drawer-044deD6z.js";import{S as Pt}from"./search-BzQT2cbl.js";import{C as $t}from"./chevron-down-Di1nky1z.js";import{C as tr}from"./check-B_roR26b.js";import{T as Ye,P as sr}from"./trash-2-BLSC5aYj.js";import{P as _e}from"./plus-DaJsxpUi.js";import{P as qt,a as Ot,b as Tt}from"./Coach-D4gsxeIP.js";import{C as rr}from"./chevron-right-yrfjZ4fq.js";import{L as bt}from"./loader-circle-BRRu--sn.js";import{C as nr}from"./circle-alert-CNRrKu5y.js";import{P as ar}from"./pen-CzXqy7Y7.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-charts-D_WtzBoI.js";import"./vendor-supabase-B7dJFgIA.js";import"./chevron-up-MUI6cC-U.js";import"./chevron-left-DDhKjOjn.js";import"./save-T8brRDKD.js";import"./badge-DD94XJbO.js";import"./toggle-group-Bz8Y1Dms.js";import"./arrow-left-BcQeWdGj.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ir=Je("ellipsis",lr);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cr=Je("funnel",or);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Nt=Je("upload",dr);function ze(t,n,{checkForDefaultPrevented:r=!0}={}){return function(l){if(t?.(l),r===!1||!l.defaultPrevented)return n?.(l)}}var ur=Rs[" useInsertionEffect ".trim().toString()]||Ds;function mr({prop:t,defaultProp:n,onChange:r=()=>{},caller:d}){const[l,o,p]=pr({defaultProp:n,onChange:r}),m=t!==void 0,g=m?t:l;{const x=a.useRef(t!==void 0);a.useEffect(()=>{const f=x.current;f!==m&&console.warn(`${d} is changing from ${f?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=m},[m,d])}const i=a.useCallback(x=>{if(m){const f=xr(x)?x(t):x;f!==t&&p.current?.(f)}else o(x)},[m,t,o,p]);return[g,i]}function pr({defaultProp:t,onChange:n}){const[r,d]=a.useState(t),l=a.useRef(r),o=a.useRef(n);return ur(()=>{o.current=n},[n]),a.useEffect(()=>{l.current!==r&&(o.current?.(r),l.current=r)},[r,l]),[r,d,o]}function xr(t){return typeof t=="function"}var Ze="Radio",[fr,Kt]=Ft(Ze),[hr,gr]=fr(Ze),Lt=a.forwardRef((t,n)=>{const{__scopeRadio:r,name:d,checked:l=!1,required:o,disabled:p,value:m="on",onCheck:g,form:i,...x}=t,[f,_]=a.useState(null),b=He(n,M=>_(M)),N=a.useRef(!1),I=f?i||!!f.closest("form"):!0;return e.jsxs(hr,{scope:r,checked:l,disabled:p,children:[e.jsx(W.button,{type:"button",role:"radio","aria-checked":l,"data-state":Bt(l),"data-disabled":p?"":void 0,disabled:p,value:m,...x,ref:b,onClick:ze(t.onClick,M=>{l||g?.(),I&&(N.current=M.isPropagationStopped(),N.current||M.stopPropagation())})}),I&&e.jsx(zt,{control:f,bubbles:!N.current,name:d,value:m,checked:l,required:o,disabled:p,form:i,style:{transform:"translateX(-100%)"}})]})});Lt.displayName=Ze;var Gt="RadioIndicator",Ut=a.forwardRef((t,n)=>{const{__scopeRadio:r,forceMount:d,...l}=t,o=gr(Gt,r);return e.jsx(As,{present:d||o.checked,children:e.jsx(W.span,{"data-state":Bt(o.checked),"data-disabled":o.disabled?"":void 0,...l,ref:n})})});Ut.displayName=Gt;var vr="RadioBubbleInput",zt=a.forwardRef(({__scopeRadio:t,control:n,checked:r,bubbles:d=!0,...l},o)=>{const p=a.useRef(null),m=He(p,o),g=Us(r),i=Ps(n);return a.useEffect(()=>{const x=p.current;if(!x)return;const f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"checked").set;if(g!==r&&b){const N=new Event("click",{bubbles:d});b.call(x,r),x.dispatchEvent(N)}},[g,r,d]),e.jsx(W.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...l,tabIndex:-1,ref:m,style:{...l.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});zt.displayName=vr;function Bt(t){return t?"checked":"unchecked"}var jr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Se="RadioGroup",[yr]=Ft(Se,[It,Kt]),Vt=It(),Qt=Kt(),[br,Nr]=yr(Se),Wt=a.forwardRef((t,n)=>{const{__scopeRadioGroup:r,name:d,defaultValue:l,value:o,required:p=!1,disabled:m=!1,orientation:g,dir:i,loop:x=!0,onValueChange:f,..._}=t,b=Vt(r),N=Is(i),[I,M]=mr({prop:o,defaultProp:l??null,onChange:f,caller:Se});return e.jsx(br,{scope:r,name:d,required:p,disabled:m,value:I,onValueChange:M,children:e.jsx(Fs,{asChild:!0,...b,orientation:g,dir:N,loop:x,children:e.jsx(W.div,{role:"radiogroup","aria-required":p,"aria-orientation":g,"data-disabled":m?"":void 0,dir:N,..._,ref:n})})})});Wt.displayName=Se;var Ht="RadioGroupItem",Jt=a.forwardRef((t,n)=>{const{__scopeRadioGroup:r,disabled:d,...l}=t,o=Nr(Ht,r),p=o.disabled||d,m=Vt(r),g=Qt(r),i=a.useRef(null),x=He(n,i),f=o.value===l.value,_=a.useRef(!1);return a.useEffect(()=>{const b=I=>{jr.includes(I.key)&&(_.current=!0)},N=()=>_.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",N)}},[]),e.jsx(Ms,{asChild:!0,...m,focusable:!p,active:f,children:e.jsx(Lt,{disabled:p,required:o.required,checked:f,...g,...l,name:o.name,ref:x,onCheck:()=>o.onValueChange(l.value),onKeyDown:ze(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:ze(l.onFocus,()=>{_.current&&i.current?.click()})})})});Jt.displayName=Ht;var wr="RadioGroupIndicator",Xt=a.forwardRef((t,n)=>{const{__scopeRadioGroup:r,...d}=t,l=Qt(r);return e.jsx(Ut,{...l,...d,ref:n})});Xt.displayName=wr;var Yt=Wt,Zt=Jt,_r=Xt;const es=a.forwardRef(({className:t,...n},r)=>e.jsx(Yt,{className:Q("grid gap-2",t),...n,ref:r}));es.displayName=Yt.displayName;const Be=a.forwardRef(({className:t,...n},r)=>e.jsx(Zt,{ref:r,className:Q("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:e.jsx(_r,{className:"flex items-center justify-center",children:e.jsx(zs,{className:"h-3.5 w-3.5 fill-primary"})})}));Be.displayName=Zt.displayName;var wt=1,Sr=.9,Cr=.8,Er=.17,Pe=.1,$e=.999,kr=.9999,Rr=.99,Dr=/[\\\/_+.#"@\[\(\{&]/,Ir=/[\\\/_+.#"@\[\(\{&]/g,Fr=/[\s-]/,ts=/[\s-]/g;function Ve(t,n,r,d,l,o,p){if(o===n.length)return l===t.length?wt:Rr;var m=`${l},${o}`;if(p[m]!==void 0)return p[m];for(var g=d.charAt(o),i=r.indexOf(g,l),x=0,f,_,b,N;i>=0;)f=Ve(t,n,r,d,i+1,o+1,p),f>x&&(i===l?f*=wt:Dr.test(t.charAt(i-1))?(f*=Cr,b=t.slice(l,i-1).match(Ir),b&&l>0&&(f*=Math.pow($e,b.length))):Fr.test(t.charAt(i-1))?(f*=Sr,N=t.slice(l,i-1).match(ts),N&&l>0&&(f*=Math.pow($e,N.length))):(f*=Er,l>0&&(f*=Math.pow($e,i-l))),t.charAt(i)!==n.charAt(o)&&(f*=kr)),(f<Pe&&r.charAt(i-1)===d.charAt(o+1)||d.charAt(o+1)===d.charAt(o)&&r.charAt(i-1)!==d.charAt(o))&&(_=Ve(t,n,r,d,i+1,o+2,p),_*Pe>f&&(f=_*Pe)),f>x&&(x=f),i=r.indexOf(g,i+1);return p[m]=x,x}function _t(t){return t.toLowerCase().replace(ts," ")}function Mr(t,n,r){return t=r&&r.length>0?`${t+" "+r.join(" ")}`:t,Ve(t,n,_t(t),_t(n),0,0,{})}var pe='[cmdk-group=""]',qe='[cmdk-group-items=""]',Ar='[cmdk-group-heading=""]',ss='[cmdk-item=""]',St=`${ss}:not([aria-disabled="true"])`,Qe="cmdk-item-select",de="data-value",Pr=(t,n,r)=>Mr(t,n,r),rs=a.createContext(void 0),fe=()=>a.useContext(rs),ns=a.createContext(void 0),et=()=>a.useContext(ns),as=a.createContext(void 0),ls=a.forwardRef((t,n)=>{let r=ue(()=>{var c,y;return{search:"",value:(y=(c=t.value)!=null?c:t.defaultValue)!=null?y:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=ue(()=>new Set),l=ue(()=>new Map),o=ue(()=>new Map),p=ue(()=>new Set),m=is(t),{label:g,children:i,value:x,onValueChange:f,filter:_,shouldFilter:b,loop:N,disablePointerSelection:I=!1,vimBindings:M=!0,...C}=t,w=me(),re=me(),Y=me(),B=a.useRef(null),k=Vr();le(()=>{if(x!==void 0){let c=x.trim();r.current.value=c,q.emit()}},[x]),le(()=>{k(6,O)},[]);let q=a.useMemo(()=>({subscribe:c=>(p.current.add(c),()=>p.current.delete(c)),snapshot:()=>r.current,setState:(c,y,S)=>{var h,E,D,K;if(!Object.is(r.current[c],y)){if(r.current[c]=y,c==="search")ee(),A(),k(1,H);else if(c==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let L=document.getElementById(Y);L?L.focus():(h=document.getElementById(w))==null||h.focus()}if(k(7,()=>{var L;r.current.selectedItemId=(L=T())==null?void 0:L.id,q.emit()}),S||k(5,O),((E=m.current)==null?void 0:E.value)!==void 0){let L=y??"";(K=(D=m.current).onValueChange)==null||K.call(D,L);return}}q.emit()}},emit:()=>{p.current.forEach(c=>c())}}),[]),Z=a.useMemo(()=>({value:(c,y,S)=>{var h;y!==((h=o.current.get(c))==null?void 0:h.value)&&(o.current.set(c,{value:y,keywords:S}),r.current.filtered.items.set(c,j(y,S)),k(2,()=>{A(),q.emit()}))},item:(c,y)=>(d.current.add(c),y&&(l.current.has(y)?l.current.get(y).add(c):l.current.set(y,new Set([c]))),k(3,()=>{ee(),A(),r.current.value||H(),q.emit()}),()=>{o.current.delete(c),d.current.delete(c),r.current.filtered.items.delete(c);let S=T();k(4,()=>{ee(),S?.getAttribute("id")===c&&H(),q.emit()})}),group:c=>(l.current.has(c)||l.current.set(c,new Set),()=>{o.current.delete(c),l.current.delete(c)}),filter:()=>m.current.shouldFilter,label:g||t["aria-label"],getDisablePointerSelection:()=>m.current.disablePointerSelection,listId:w,inputId:Y,labelId:re,listInnerRef:B}),[]);function j(c,y){var S,h;let E=(h=(S=m.current)==null?void 0:S.filter)!=null?h:Pr;return c?E(c,r.current.search,y):0}function A(){if(!r.current.search||m.current.shouldFilter===!1)return;let c=r.current.filtered.items,y=[];r.current.filtered.groups.forEach(h=>{let E=l.current.get(h),D=0;E.forEach(K=>{let L=c.get(K);D=Math.max(L,D)}),y.push([h,D])});let S=B.current;P().sort((h,E)=>{var D,K;let L=h.getAttribute("id"),oe=E.getAttribute("id");return((D=c.get(oe))!=null?D:0)-((K=c.get(L))!=null?K:0)}).forEach(h=>{let E=h.closest(qe);E?E.appendChild(h.parentElement===E?h:h.closest(`${qe} > *`)):S.appendChild(h.parentElement===S?h:h.closest(`${qe} > *`))}),y.sort((h,E)=>E[1]-h[1]).forEach(h=>{var E;let D=(E=B.current)==null?void 0:E.querySelector(`${pe}[${de}="${encodeURIComponent(h[0])}"]`);D?.parentElement.appendChild(D)})}function H(){let c=P().find(S=>S.getAttribute("aria-disabled")!=="true"),y=c?.getAttribute(de);q.setState("value",y||void 0)}function ee(){var c,y,S,h;if(!r.current.search||m.current.shouldFilter===!1){r.current.filtered.count=d.current.size;return}r.current.filtered.groups=new Set;let E=0;for(let D of d.current){let K=(y=(c=o.current.get(D))==null?void 0:c.value)!=null?y:"",L=(h=(S=o.current.get(D))==null?void 0:S.keywords)!=null?h:[],oe=j(K,L);r.current.filtered.items.set(D,oe),oe>0&&E++}for(let[D,K]of l.current)for(let L of K)if(r.current.filtered.items.get(L)>0){r.current.filtered.groups.add(D);break}r.current.filtered.count=E}function O(){var c,y,S;let h=T();h&&(((c=h.parentElement)==null?void 0:c.firstChild)===h&&((S=(y=h.closest(pe))==null?void 0:y.querySelector(Ar))==null||S.scrollIntoView({block:"nearest"})),h.scrollIntoView({block:"nearest"}))}function T(){var c;return(c=B.current)==null?void 0:c.querySelector(`${ss}[aria-selected="true"]`)}function P(){var c;return Array.from(((c=B.current)==null?void 0:c.querySelectorAll(St))||[])}function J(c){let y=P()[c];y&&q.setState("value",y.getAttribute(de))}function V(c){var y;let S=T(),h=P(),E=h.findIndex(K=>K===S),D=h[E+c];(y=m.current)!=null&&y.loop&&(D=E+c<0?h[h.length-1]:E+c===h.length?h[0]:h[E+c]),D&&q.setState("value",D.getAttribute(de))}function he(c){let y=T(),S=y?.closest(pe),h;for(;S&&!h;)S=c>0?zr(S,pe):Br(S,pe),h=S?.querySelector(St);h?q.setState("value",h.getAttribute(de)):V(c)}let ie=()=>J(P().length-1),ge=c=>{c.preventDefault(),c.metaKey?ie():c.altKey?he(1):V(1)},ne=c=>{c.preventDefault(),c.metaKey?J(0):c.altKey?he(-1):V(-1)};return a.createElement(W.div,{ref:n,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:c=>{var y;(y=C.onKeyDown)==null||y.call(C,c);let S=c.nativeEvent.isComposing||c.keyCode===229;if(!(c.defaultPrevented||S))switch(c.key){case"n":case"j":{M&&c.ctrlKey&&ge(c);break}case"ArrowDown":{ge(c);break}case"p":case"k":{M&&c.ctrlKey&&ne(c);break}case"ArrowUp":{ne(c);break}case"Home":{c.preventDefault(),J(0);break}case"End":{c.preventDefault(),ie();break}case"Enter":{c.preventDefault();let h=T();if(h){let E=new Event(Qe);h.dispatchEvent(E)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:Z.inputId,id:Z.labelId,style:Wr},g),Ce(t,c=>a.createElement(ns.Provider,{value:q},a.createElement(rs.Provider,{value:Z},c))))}),$r=a.forwardRef((t,n)=>{var r,d;let l=me(),o=a.useRef(null),p=a.useContext(as),m=fe(),g=is(t),i=(d=(r=g.current)==null?void 0:r.forceMount)!=null?d:p?.forceMount;le(()=>{if(!i)return m.item(l,p?.id)},[i]);let x=os(l,o,[t.value,t.children,o],t.keywords),f=et(),_=se(k=>k.value&&k.value===x.current),b=se(k=>i||m.filter()===!1?!0:k.search?k.filtered.items.get(l)>0:!0);a.useEffect(()=>{let k=o.current;if(!(!k||t.disabled))return k.addEventListener(Qe,N),()=>k.removeEventListener(Qe,N)},[b,t.onSelect,t.disabled]);function N(){var k,q;I(),(q=(k=g.current).onSelect)==null||q.call(k,x.current)}function I(){f.setState("value",x.current,!0)}if(!b)return null;let{disabled:M,value:C,onSelect:w,forceMount:re,keywords:Y,...B}=t;return a.createElement(W.div,{ref:xe(o,n),...B,id:l,"cmdk-item":"",role:"option","aria-disabled":!!M,"aria-selected":!!_,"data-disabled":!!M,"data-selected":!!_,onPointerMove:M||m.getDisablePointerSelection()?void 0:I,onClick:M?void 0:N},t.children)}),qr=a.forwardRef((t,n)=>{let{heading:r,children:d,forceMount:l,...o}=t,p=me(),m=a.useRef(null),g=a.useRef(null),i=me(),x=fe(),f=se(b=>l||x.filter()===!1?!0:b.search?b.filtered.groups.has(p):!0);le(()=>x.group(p),[]),os(p,m,[t.value,t.heading,g]);let _=a.useMemo(()=>({id:p,forceMount:l}),[l]);return a.createElement(W.div,{ref:xe(m,n),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&a.createElement("div",{ref:g,"cmdk-group-heading":"","aria-hidden":!0,id:i},r),Ce(t,b=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?i:void 0},a.createElement(as.Provider,{value:_},b))))}),Or=a.forwardRef((t,n)=>{let{alwaysRender:r,...d}=t,l=a.useRef(null),o=se(p=>!p.search);return!r&&!o?null:a.createElement(W.div,{ref:xe(l,n),...d,"cmdk-separator":"",role:"separator"})}),Tr=a.forwardRef((t,n)=>{let{onValueChange:r,...d}=t,l=t.value!=null,o=et(),p=se(i=>i.search),m=se(i=>i.selectedItemId),g=fe();return a.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),a.createElement(W.input,{ref:n,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":g.listId,"aria-labelledby":g.labelId,"aria-activedescendant":m,id:g.inputId,type:"text",value:l?t.value:p,onChange:i=>{l||o.setState("search",i.target.value),r?.(i.target.value)}})}),Kr=a.forwardRef((t,n)=>{let{children:r,label:d="Suggestions",...l}=t,o=a.useRef(null),p=a.useRef(null),m=se(i=>i.selectedItemId),g=fe();return a.useEffect(()=>{if(p.current&&o.current){let i=p.current,x=o.current,f,_=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let b=i.offsetHeight;x.style.setProperty("--cmdk-list-height",b.toFixed(1)+"px")})});return _.observe(i),()=>{cancelAnimationFrame(f),_.unobserve(i)}}},[]),a.createElement(W.div,{ref:xe(o,n),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":m,"aria-label":d,id:g.listId},Ce(t,i=>a.createElement("div",{ref:xe(p,g.listInnerRef),"cmdk-list-sizer":""},i)))}),Lr=a.forwardRef((t,n)=>{let{open:r,onOpenChange:d,overlayClassName:l,contentClassName:o,container:p,...m}=t;return a.createElement($s,{open:r,onOpenChange:d},a.createElement(qs,{container:p},a.createElement(Os,{"cmdk-overlay":"",className:l}),a.createElement(Ts,{"aria-label":t.label,"cmdk-dialog":"",className:o},a.createElement(ls,{ref:n,...m}))))}),Gr=a.forwardRef((t,n)=>se(r=>r.filtered.count===0)?a.createElement(W.div,{ref:n,...t,"cmdk-empty":"",role:"presentation"}):null),Ur=a.forwardRef((t,n)=>{let{progress:r,children:d,label:l="Loading...",...o}=t;return a.createElement(W.div,{ref:n,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},Ce(t,p=>a.createElement("div",{"aria-hidden":!0},p)))}),z=Object.assign(ls,{List:Kr,Item:$r,Input:Tr,Group:qr,Separator:Or,Dialog:Lr,Empty:Gr,Loading:Ur});function zr(t,n){let r=t.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function Br(t,n){let r=t.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function is(t){let n=a.useRef(t);return le(()=>{n.current=t}),n}var le=typeof window>"u"?a.useEffect:a.useLayoutEffect;function ue(t){let n=a.useRef();return n.current===void 0&&(n.current=t()),n}function se(t){let n=et(),r=()=>t(n.snapshot());return a.useSyncExternalStore(n.subscribe,r,r)}function os(t,n,r,d=[]){let l=a.useRef(),o=fe();return le(()=>{var p;let m=(()=>{var i;for(let x of r){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(i=x.current.textContent)==null?void 0:i.trim():l.current}})(),g=d.map(i=>i.trim());o.value(t,m,g),(p=n.current)==null||p.setAttribute(de,m),l.current=m}),l}var Vr=()=>{let[t,n]=a.useState(),r=ue(()=>new Map);return le(()=>{r.current.forEach(d=>d()),r.current=new Map},[t]),(d,l)=>{r.current.set(d,l),n({})}};function Qr(t){let n=t.type;return typeof n=="function"?n(t.props):"render"in n?n.render(t.props):t}function Ce({asChild:t,children:n},r){return t&&a.isValidElement(n)?a.cloneElement(Qr(n),{ref:n.ref},r(n.props.children)):r(n)}var Wr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const cs=a.forwardRef(({className:t,...n},r)=>e.jsx(z,{ref:r,className:Q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...n}));cs.displayName=z.displayName;const ds=a.forwardRef(({className:t,...n},r)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(z.Input,{ref:r,className:Q("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...n})]}));ds.displayName=z.Input.displayName;const us=a.forwardRef(({className:t,...n},r)=>e.jsx(z.List,{ref:r,className:Q("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...n}));us.displayName=z.List.displayName;const ms=a.forwardRef((t,n)=>e.jsx(z.Empty,{ref:n,className:"py-6 text-center text-sm",...t}));ms.displayName=z.Empty.displayName;const We=a.forwardRef(({className:t,...n},r)=>e.jsx(z.Group,{ref:r,className:Q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...n}));We.displayName=z.Group.displayName;const Hr=a.forwardRef(({className:t,...n},r)=>e.jsx(z.Separator,{ref:r,className:Q("-mx-1 h-px bg-border",t),...n}));Hr.displayName=z.Separator.displayName;const ps=a.forwardRef(({className:t,...n},r)=>e.jsx(z.Item,{ref:r,className:Q("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...n}));ps.displayName=z.Item.displayName;function Jr({exercises:t,selectedId:n,onSelect:r}){const[d,l]=a.useState(!1),o=t.find(i=>i.id===n),p=t.filter(i=>i.exercise_type!=="warmup"),m=t.filter(i=>i.exercise_type==="warmup"),g=i=>{r(i),l(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>l(!0),className:"flex w-full items-center gap-2 rounded-xl border border-input bg-background px-3 py-2 text-sm hover:bg-accent/50",children:[o?.illustration_gif?e.jsx("img",{src:o.illustration_gif,alt:"",className:"h-7 w-7 shrink-0 rounded-md object-cover"}):e.jsx("div",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-md bg-muted",children:e.jsx(Xe,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx("span",{className:"min-w-0 flex-1 truncate text-left font-medium",children:o?.nom_exercice??"Choisir un exercice"}),e.jsx($t,{className:"h-4 w-4 shrink-0 text-muted-foreground"})]}),e.jsx(Xs,{open:d,onOpenChange:l,children:e.jsxs(Ys,{className:"max-h-[85vh]",children:[e.jsx(Zs,{className:"pb-0",children:e.jsx(er,{children:"Choisir un exercice"})}),e.jsxs(cs,{className:"mt-2",shouldFilter:!0,children:[e.jsx(ds,{placeholder:"Rechercher...",className:"h-12"}),e.jsxs(us,{className:"max-h-[60vh] px-1 pb-safe",children:[e.jsx(ms,{children:"Aucun exercice trouvé"}),p.length>0&&e.jsx(We,{heading:"Travail",children:p.map(i=>e.jsx(Ct,{exercise:i,isSelected:i.id===n,onSelect:()=>g(i.id)},i.id))}),m.length>0&&e.jsx(We,{heading:"Échauffement",children:m.map(i=>e.jsx(Ct,{exercise:i,isSelected:i.id===n,onSelect:()=>g(i.id)},i.id))})]})]})]})})]})}function Ct({exercise:t,isSelected:n,onSelect:r}){return e.jsxs(ps,{value:t.nom_exercice,onSelect:r,className:"flex items-center gap-3 rounded-xl px-2 py-2.5",children:[t.illustration_gif?e.jsx("img",{src:t.illustration_gif,alt:"",className:"h-9 w-9 shrink-0 rounded-lg object-cover",loading:"lazy",decoding:"async"}):e.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-muted",children:e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("span",{className:"min-w-0 flex-1 truncate text-sm font-medium",children:t.nom_exercice}),n&&e.jsx(tr,{className:"h-4 w-4 shrink-0 text-primary"})]})}function Xr({exercise:t,exercises:n,exerciseFilter:r,index:d,totalItems:l,onChange:o,onDelete:p,onMoveUp:m,onMoveDown:g}){const[i,x]=a.useState(!1),[f,_]=a.useState(!1),b=n.filter(w=>r==="all"?!0:w.exercise_type===r),N=n.find(w=>w.id===t.exercise_id),I=N?.nom_exercice??"Exercice",M=N?.exercise_type==="warmup",C=N?.illustration_gif;return e.jsxs(e.Fragment,{children:[e.jsxs(Ls,{className:Q("rounded-2xl border-border transition-all",i&&"ring-1 ring-primary/20"),children:[e.jsxs("button",{type:"button",className:"flex w-full items-center gap-3 p-3 text-left",onClick:()=>x(!i),children:[e.jsx("span",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-muted text-xs font-bold text-muted-foreground",children:d+1}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"truncate text-sm font-semibold",children:I}),M&&e.jsx("span",{className:"shrink-0 rounded-full bg-amber-100 px-2 py-0.5 text-[10px] font-semibold text-amber-800",children:"Échauf."})]}),e.jsxs("div",{className:"mt-0.5 text-xs text-muted-foreground",children:[t.sets,"×",t.reps,t.percent_1rm?` @ ${t.percent_1rm}% 1RM`:"",t.rest_seconds?` · ${t.rest_seconds}s repos`:""]})]}),C&&e.jsx("button",{type:"button",className:"shrink-0 rounded-lg overflow-hidden border border-border bg-muted",onClick:w=>{w.stopPropagation(),_(!0)},children:e.jsx("img",{src:C,alt:I,className:"h-9 w-9 object-cover"})}),e.jsx($t,{className:Q("h-4 w-4 shrink-0 text-muted-foreground transition-transform",i&&"rotate-180")})]}),i&&e.jsxs("div",{className:"border-t border-border px-3 pb-3 pt-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Séries"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.sets===0?"":t.sets,onChange:w=>o("sets",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Reps"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.reps===0?"":t.reps,onChange:w=>o("reps",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"% 1RM"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.percent_1rm===0?"":t.percent_1rm,onChange:w=>o("percent_1rm",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Repos (s)"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.rest_seconds===0?"":t.rest_seconds,onChange:w=>o("rest_seconds",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Exercice"}),e.jsx(Jr,{exercises:b,selectedId:t.exercise_id,onSelect:w=>o("exercise_id",w)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Notes"}),e.jsx(be,{value:t.notes??"",onChange:w=>o("notes",w.target.value||null),placeholder:"Notes optionnelles...",className:"rounded-xl min-h-[60px]"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:w=>{w.stopPropagation(),m()},disabled:d===0,className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted disabled:opacity-30","aria-label":"Monter",children:e.jsx(Bs,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:w=>{w.stopPropagation(),g()},disabled:d===l-1,className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted disabled:opacity-30","aria-label":"Descendre",children:e.jsx(Vs,{className:"h-4 w-4"})})]}),e.jsxs("button",{type:"button",onClick:w=>{w.stopPropagation(),p()},className:"inline-flex h-9 items-center gap-2 rounded-full px-3 text-xs font-medium text-destructive hover:bg-destructive/10",children:[e.jsx(Ye,{className:"h-3.5 w-3.5"}),"Supprimer"]})]})]})]}),C&&e.jsx(Ne,{open:f,onOpenChange:_,children:e.jsx(we,{className:"sm:max-w-md p-2",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:C,alt:I,className:"w-full max-h-[70vh] object-contain rounded-lg"}),e.jsx("p",{className:"text-sm font-medium text-center",children:I})]})})})]})}const Yr=t=>t==="endurance"||t==="hypertrophie"||t==="force"?t:"endurance";function Zr({session:t,exercises:n,editingSessionId:r,folders:d,onSessionChange:l,onCycleChange:o,onSave:p,onCancel:m,onAddItem:g,onUpdateItem:i,onRemoveItem:x,onReorderItems:f,onExerciseDialogOpen:_,isSaving:b}){const[N,I]=a.useState("all"),[M,C]=a.useState(!1),[w,re]=a.useState(!1),Y=new Map(n.map(j=>[j.id,j])),B=t.items.reduce((j,A)=>j+(A.sets||0),0),k=j=>{j>0&&f(j,j-1)},q=j=>{j<t.items.length-1&&f(j,j+1)},Z=()=>{C(!0)};return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[e.jsx(Qs,{isEditing:!!r,isSaving:b,onSave:p,onCancel:m,onPreview:Z}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(Ws,{name:t.title,onNameChange:j=>l({...t,title:j}),showDuration:!1,showTotalDistance:!1,collapsible:!0,collapsed:w,onToggleCollapse:()=>re(!w),collapsedSummary:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium text-foreground",children:t.title||"Sans titre"}),e.jsx("span",{children:"·"}),e.jsx("span",{className:"capitalize",children:t.cycle}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[B," séries"]})]}),additionalFields:e.jsxs(e.Fragment,{children:[d&&d.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Dossier"}),e.jsx("div",{className:"mt-1",children:e.jsxs(Ie,{value:t.folder_id?.toString()??"none",onValueChange:j=>l({...t,folder_id:j==="none"?null:parseInt(j)}),children:[e.jsx(Fe,{className:"rounded-2xl",children:e.jsx(Me,{})}),e.jsxs(Ae,{children:[e.jsx(te,{value:"none",children:"Aucun"}),d.map(j=>e.jsx(te,{value:j.id.toString(),children:j.name},j.id))]})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Cycle"}),e.jsx("div",{className:"mt-1",children:e.jsxs(Ie,{value:t.cycle,onValueChange:j=>o(Yr(j)),children:[e.jsx(Fe,{className:"rounded-2xl",children:e.jsx(Me,{})}),e.jsxs(Ae,{children:[e.jsx(te,{value:"endurance",children:"Endurance"}),e.jsx(te,{value:"hypertrophie",children:"Hypertrophie"}),e.jsx(te,{value:"force",children:"Force"})]})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Séries totales"}),e.jsx("div",{className:"mt-1 rounded-2xl border border-border bg-muted px-3 py-2 text-sm font-semibold",children:B})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Description"}),e.jsx("div",{className:"mt-1",children:e.jsx(be,{value:t.description,onChange:j=>l({...t,description:j.target.value}),placeholder:"Description optionnelle...",className:"rounded-2xl min-h-[60px]"})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-semibold",children:["Exercices (",t.items.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ie,{value:N,onValueChange:j=>I(j),children:[e.jsxs(Fe,{className:"h-8 w-auto gap-1 rounded-full border-dashed text-xs",children:[e.jsx(cr,{className:"h-3 w-3"}),e.jsx(Me,{})]}),e.jsxs(Ae,{children:[e.jsx(te,{value:"all",children:"Tous"}),e.jsx(te,{value:"strength",children:"Travail"}),e.jsx(te,{value:"warmup",children:"Échauf."})]})]})})]}),e.jsx("div",{className:"space-y-2",children:t.items.map((j,A)=>e.jsx(Xr,{exercise:j,exercises:n,exerciseFilter:N,index:A,totalItems:t.items.length,onChange:(H,ee)=>i(A,H,ee),onDelete:()=>x(A),onMoveUp:()=>k(A),onMoveDown:()=>q(A)},`${j.exercise_id}-${A}`))}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{type:"button",onClick:g,className:"inline-flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-xs font-semibold text-primary-foreground",children:[e.jsx(_e,{className:"h-4 w-4"})," Ajouter un exercice"]}),e.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center gap-2 rounded-full border border-border px-4 py-2 text-xs font-semibold hover:bg-muted",children:[e.jsx(_e,{className:"h-4 w-4"})," Nouvel exercice"]})]})]}),e.jsx(Ne,{open:M,onOpenChange:C,children:e.jsxs(we,{className:"sm:max-w-3xl",children:[e.jsx(Ke,{children:e.jsx(Le,{children:"Aperçu de la séance"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-lg font-semibold",children:t.title||"Sans titre"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"—"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cycle : ",t.cycle]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Exercices"}),e.jsx("div",{className:"space-y-2",children:t.items.slice().sort((j,A)=>(j.order_index??0)-(A.order_index??0)).map((j,A)=>{const H=Y.get(j.exercise_id);return e.jsxs("div",{className:"rounded-xl border px-3 py-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"font-medium",children:[A+1,". ",H?.nom_exercice??"Exercice"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:H?.exercise_type==="warmup"?"Échauffement":"Travail"})]}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[j.sets," séries • ",j.reps," reps • ",j.percent_1rm,"% 1RM •"," ",j.rest_seconds,"s"]})]},`${j.exercise_id}-${A}`)})})]})]})]})})]})}function Et({name:t,count:n,children:r,onRename:d,onDelete:l,defaultOpen:o=!1}){const[p,m]=a.useState(o),[g,i]=a.useState(!1),[x,f]=a.useState(t),[_,b]=a.useState(!1),N=a.useRef(null);a.useEffect(()=>{g&&(N.current?.focus(),N.current?.select())},[g]);const I=()=>{const C=x.trim();C&&C!==t?d(C):f(t),i(!1)},M=()=>{f(t),i(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:Q("flex items-center gap-1 rounded-xl px-2 py-1.5 cursor-pointer select-none hover:bg-muted/50"),onClick:()=>{g||m(C=>!C)},children:[e.jsx(rr,{className:Q("h-4 w-4 shrink-0 text-muted-foreground transition-transform",p&&"rotate-90")}),g?e.jsx(G,{ref:N,className:"h-7 text-sm rounded-lg flex-1",value:x,onChange:C=>f(C.target.value),onClick:C=>C.stopPropagation(),onKeyDown:C=>{C.stopPropagation(),C.key==="Enter"&&I(),C.key==="Escape"&&M()},onBlur:I}):e.jsx("span",{className:"text-sm font-semibold truncate",children:t}),!g&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",n,")"]}),e.jsx("div",{className:"flex-1"}),e.jsxs(qt,{open:_,onOpenChange:b,children:[e.jsx(Ot,{asChild:!0,children:e.jsx("button",{className:"h-7 w-7 shrink-0 inline-flex items-center justify-center rounded-full hover:bg-muted",onClick:C=>{C.stopPropagation()},children:e.jsx(ir,{className:"h-4 w-4 text-muted-foreground"})})}),e.jsxs(Tt,{align:"end",className:"w-40 p-1",onClick:C=>C.stopPropagation(),children:[e.jsxs("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm hover:bg-muted",onClick:()=>{b(!1),f(t),i(!0)},children:[e.jsx(sr,{className:"h-4 w-4"}),"Rename"]}),e.jsxs("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm text-destructive hover:bg-muted",onClick:()=>{b(!1),l()},children:[e.jsx(Ye,{className:"h-4 w-4"}),"Delete"]})]})]})]}),p&&e.jsx("div",{className:"ml-4",children:r})]})}function Oe({folders:t,currentFolderId:n,onMove:r,children:d}){const[l,o]=a.useState(!1);function p(m){r(m),o(!1)}return e.jsxs(qt,{open:l,onOpenChange:o,children:[e.jsx(Ot,{asChild:!0,children:d??e.jsx("button",{className:"flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted","aria-label":"Déplacer",title:"Déplacer vers un dossier",children:e.jsx(Hs,{className:"h-4 w-4"})})}),e.jsxs(Tt,{className:"w-44 p-1",align:"end",children:[e.jsx("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm hover:bg-muted",style:{fontWeight:n?void 0:"bold"},onClick:()=>p(null),children:"Aucun dossier"}),t.map(m=>e.jsx("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm hover:bg-muted",style:{fontWeight:n===m.id?"bold":void 0},onClick:()=>p(m.id),children:m.name},m.id))]})]})}const kt=[{key:"endurance",label:"Endurance",fieldSuffix:"endurance"},{key:"hypertrophie",label:"Hypertrophie",fieldSuffix:"hypertrophie"},{key:"force",label:"Force",fieldSuffix:"force"}],en=t=>t==="endurance"||t==="hypertrophie"||t==="force"?t:"endurance",Rt=({exercise:t,onChange:n,disabled:r=!1})=>e.jsxs(Mt,{defaultValue:"endurance",className:"w-full",children:[e.jsx(At,{className:"grid w-full grid-cols-3",children:kt.map(d=>e.jsx(Ge,{value:d.key,children:d.label},d.key))}),kt.map(d=>{const l=`pct_1rm_${d.fieldSuffix}`,o=`Nb_series_${d.fieldSuffix}`,p=`Nb_reps_${d.fieldSuffix}`,m=`recup_${d.fieldSuffix}`,g=`recup_exercices_${d.fieldSuffix}`;return e.jsxs(Ue,{value:d.key,className:`space-y-3 rounded-lg border p-3 ${r?"opacity-60":""}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:d.label}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"% 1RM"}),e.jsx(G,{type:"number",value:t[l]??"",disabled:r,onChange:i=>n({[l]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nb séries"}),e.jsx(G,{type:"number",value:t[o]??"",disabled:r,onChange:i=>n({[o]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nb reps"}),e.jsx(G,{type:"number",value:t[p]??"",disabled:r,onChange:i=>n({[p]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Récup. séries (s)"}),e.jsx(G,{type:"number",value:t[m]??"",disabled:r,onChange:i=>n({[m]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Récup. exercices (s)"}),e.jsx(G,{type:"number",value:t[g]??"",disabled:r,onChange:i=>n({[g]:i.target.value===""?null:Number(i.target.value)})})]})]})]},d.key)})]}),tn={pct_1rm_endurance:60,pct_1rm_hypertrophie:75,pct_1rm_force:85,Nb_series_endurance:4,Nb_series_hypertrophie:3,Nb_series_force:3,Nb_reps_endurance:16,Nb_reps_hypertrophie:8,Nb_reps_force:3,recup_endurance:120,recup_hypertrophie:200,recup_force:300,recup_exercices_endurance:300,recup_exercices_hypertrophie:400,recup_exercices_force:500},ye=t=>{const n=Number(t);return Number.isFinite(n)?n:0},Te=(t,n,r,d)=>{const l=n==="force"?"force":n==="hypertrophie"?"hypertrophie":"endurance",o=`Nb_series_${l}`,p=`Nb_reps_${l}`,m=`pct_1rm_${l}`,g=`recup_${l}`;return{exercise_id:t.id,order_index:r,sets:ye(t[o]),reps:ye(t[p]),rest_seconds:ye(t[g]),percent_1rm:ye(t[m]),cycle_type:n,notes:d?.notes??""}},sn=()=>({nom_exercice:"",description:null,illustration_gif:null,exercise_type:"strength",warmup_reps:null,warmup_duration:null,...tn}),Dt=({exercise:t,warmupMode:n,onChange:r,onWarmupModeChange:d,idPrefix:l})=>e.jsxs("div",{className:"space-y-3 rounded-lg border p-3",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Paramètres d'échauffement"}),e.jsxs(es,{value:n,onValueChange:o=>{d(o==="duration"?"duration":"reps"),r(o==="duration"?{warmup_reps:null,warmup_duration:t.warmup_duration??0}:{warmup_duration:null,warmup_reps:t.warmup_reps??0})},className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{value:"reps",id:`${l}-warmup-reps`}),e.jsx(F,{htmlFor:`${l}-warmup-reps`,children:"Nombre de répétitions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{value:"duration",id:`${l}-warmup-duration`}),e.jsx(F,{htmlFor:`${l}-warmup-duration`,children:"Durée (secondes)"})]})]}),n==="duration"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Durée (s)"}),e.jsx(G,{type:"number",value:t.warmup_duration??"",onChange:o=>r({warmup_duration:o.target.value===""?null:Number(o.target.value)})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nombre de répétitions"}),e.jsx(G,{type:"number",value:t.warmup_reps??"",onChange:o=>r({warmup_reps:o.target.value===""?null:Number(o.target.value)})})]})]});function Pn(){const{toast:t}=Gs(),n=Ks(),[r,d]=a.useState(!1),[l,o]=a.useState(null),[p,m]=a.useState(!1),[g,i]=a.useState(!1),[x,f]=a.useState(null),[_,b]=a.useState(null),[N,I]=a.useState(null),[M,C]=a.useState("reps"),[w,re]=a.useState("reps"),[Y,B]=a.useState(!1),[k,q]=a.useState(""),[Z,j]=a.useState("sessions"),[A,H]=a.useState(null),ee=async(s,u)=>{if(s.size>10485760){t({title:"Fichier trop volumineux",description:"La taille maximale est de 10 Mo.",variant:"destructive"});return}B(!0);try{const R=s.name.split(".").pop()??"gif",$=`exercises/${Date.now()}-${Math.random().toString(36).slice(2)}.${R}`,{error:ce}=await dt.storage.from("exercise-gifs").upload($,s,{upsert:!1});if(ce)throw ce;const{data:ks}=dt.storage.from("exercise-gifs").getPublicUrl($);u(ks.publicUrl),t({title:"Image uploadée"})}catch(R){const $=R instanceof Error?R.message:"Réessayez.";t({title:"Erreur d'upload",description:$,variant:"destructive"})}finally{B(!1)}},[O,T]=a.useState({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),[P,J]=a.useState({...sn()});a.useEffect(()=>{x&&re(x.warmup_duration!=null?"duration":"reps")},[x]);const{data:V,isLoading:he,error:ie,refetch:ge}=je({queryKey:["exercises"],queryFn:()=>U.getExercises()}),{data:ne,isLoading:c,error:y,refetch:S}=je({queryKey:["strength_catalog"],queryFn:()=>U.getStrengthSessions()}),{data:h}=je({queryKey:["strength_folders","session"],queryFn:()=>U.getStrengthFolders("session")}),{data:E}=je({queryKey:["strength_folders","exercise"],queryFn:()=>U.getStrengthFolders("exercise")}),D=s=>{const u=s.items?.reduce((v,R)=>v+(R.sets||0),0)??0;return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"capitalize",children:s.cycle}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[s.items?.length??0," exos"]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[u," séries"]})]})},K=a.useMemo(()=>{if(!ne)return[];if(!k.trim())return ne;const s=k.toLowerCase();return ne.filter(u=>u.title?.toLowerCase().includes(s))},[ne,k]),L=K.filter(s=>!s.folder_id),oe=a.useMemo(()=>{const s=new Map;for(const u of K)if(u.folder_id){const v=s.get(u.folder_id)??[];v.push(u),s.set(u.folder_id,v)}return s},[K]),xs=a.useMemo(()=>(V??[]).filter(s=>!s.folder_id),[V]),fs=a.useMemo(()=>{const s=new Map;for(const u of V??[])if(u.folder_id){const v=s.get(u.folder_id)??[];v.push(u),s.set(u.folder_id,v)}return s},[V]),hs=X({mutationFn:s=>U.createExercise(s),onSuccess:()=>{n.invalidateQueries({queryKey:["exercises"]}),m(!1),t({title:"Exercice ajouté"})}}),tt=X({mutationFn:s=>U.createStrengthSession(s),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),d(!1),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),t({title:"Séance créée avec succès"})}}),gs=X({mutationFn:s=>U.updateExercise(s),onSuccess:()=>{n.invalidateQueries({queryKey:["exercises"]}),n.invalidateQueries({queryKey:["strength_catalog"]}),i(!1),f(null),t({title:"Exercice mis à jour"})}}),vs=X({mutationFn:s=>U.deleteExercise(s),onSuccess:()=>{n.invalidateQueries({queryKey:["exercises"]}),n.invalidateQueries({queryKey:["strength_catalog"]}),I(null),t({title:"Exercice supprimé"})}}),Ee=X({mutationFn:s=>U.deleteStrengthSession(s),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),b(null),t({title:"Séance supprimée"})}}),st=X({mutationFn:s=>U.updateStrengthSession(s),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),d(!1),o(null),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),t({title:"Séance mise à jour"})}}),js=X({mutationFn:s=>U.persistStrengthSessionOrder(s)}),ys=X({mutationFn:({name:s,type:u})=>U.createStrengthFolder(s,u),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_folders"]}),t({title:"Dossier créé"})}}),rt=X({mutationFn:({id:s,name:u})=>U.renameStrengthFolder(s,u),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_folders"]}),t({title:"Dossier renommé"})}}),nt=X({mutationFn:s=>U.deleteStrengthFolder(s),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_folders"]}),n.invalidateQueries({queryKey:["strength_catalog"]}),n.invalidateQueries({queryKey:["exercises"]}),t({title:"Dossier supprimé"})}}),ke=X({mutationFn:({itemId:s,folderId:u,table:v})=>U.moveToFolder(s,u,v),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),n.invalidateQueries({queryKey:["exercises"]}),t({title:"Déplacé"})}}),bs=()=>{d(!1),o(null),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null})},ve=s=>{o(s.id),T({title:s.title??"",description:s.description??"",cycle:en(s.cycle),items:s.items?.map(u=>({exercise_id:u.exercise_id,order_index:u.order_index??0,sets:u.sets,reps:u.reps,rest_seconds:u.rest_seconds,percent_1rm:u.percent_1rm,cycle_type:u.cycle_type,notes:u.notes??""}))??[],folder_id:s.folder_id??null}),d(!0)},Ns=s=>{f(s),i(!0)},ws=()=>{const s={...O,items:Re(O.items)};l?st.mutate({...s,id:l}):tt.mutate(s)},Re=s=>s.map((u,v)=>({...u,order_index:v})),_s=()=>{const s=V?.[0];T(u=>({...u,items:[...u.items,s?Te(s,u.cycle,u.items.length):{exercise_id:1,order_index:u.items.length,sets:0,reps:0,rest_seconds:0,percent_1rm:0}]}))},Ss=(s,u,v)=>{const R=[...O.items];if(u==="exercise_id"){const $=V?.find(ce=>ce.id===v);$?R[s]=Te($,O.cycle,R[s].order_index??s,R[s]):R[s]={...R[s],exercise_id:Number(v)}}else R[s]={...R[s],[u]:v};T({...O,items:R})},Cs=s=>{const u=Re(O.items.filter((v,R)=>R!==s));T({...O,items:u})},Es=(s,u)=>{if(s===u)return;const v=[...O.items],[R]=v.splice(s,1);v.splice(u,0,R);const $=Re(v);T({...O,items:$}),l&&js.mutate({id:l,title:O.title,description:O.description,cycle:O.cycle,items:$})},at=e.jsx(Ne,{open:g,onOpenChange:i,children:e.jsxs(we,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto pb-safe",children:[e.jsx(Ke,{children:e.jsx(Le,{children:"Modifier l'exercice"})}),x&&e.jsxs("div",{className:"space-y-4",children:[x.exercise_type==="warmup"?e.jsx(Dt,{exercise:x,warmupMode:w,onChange:s=>f(u=>u&&{...u,...s}),onWarmupModeChange:re,idPrefix:"edit"}):null,e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nom"}),e.jsx(G,{value:x.nom_exercice,onChange:s=>f({...x,nom_exercice:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Description"}),e.jsx(be,{value:x.description??"",onChange:s=>f({...x,description:s.target.value===""?null:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Illustration (GIF)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:x.illustration_gif??"",onChange:s=>f({...x,illustration_gif:s.target.value===""?null:s.target.value}),placeholder:"https://...",className:"flex-1"}),e.jsx(ae,{type:"button",variant:"outline",size:"icon",disabled:Y,onClick:()=>{const s=document.createElement("input");s.type="file",s.accept="image/*,.gif",s.onchange=u=>{const v=u.target.files?.[0];v&&ee(v,R=>f($=>$&&{...$,illustration_gif:R}))},s.click()},"aria-label":"Uploader une image",children:Y?e.jsx(bt,{className:"h-4 w-4 animate-spin"}):e.jsx(Nt,{className:"h-4 w-4"})})]}),x.illustration_gif&&e.jsx("img",{src:x.illustration_gif,alt:"Aperçu",className:"mt-2 h-20 w-20 rounded-lg object-cover border"})]}),x.exercise_type!=="warmup"?e.jsx(Rt,{exercise:x,onChange:s=>f(u=>u&&{...u,...s})}):null,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{id:"warmup-flag-edit",checked:x.exercise_type==="warmup",onCheckedChange:s=>f({...x,exercise_type:s===!0?"warmup":"strength"})}),e.jsx(F,{htmlFor:"warmup-flag-edit",children:"Exercice d'échauffement (warmup)"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ae,{variant:"outline",onClick:()=>{i(!1),f(null)},className:"h-10",children:"Annuler"}),e.jsx(ae,{variant:"default",onClick:()=>{x?.id&&gs.mutate(x)},disabled:!x.nom_exercice.trim(),className:"h-10",children:"Enregistrer"})]})]})]})}),lt=e.jsx(Ne,{open:p,onOpenChange:m,children:e.jsxs(we,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto pb-safe",children:[e.jsx(Ke,{children:e.jsx(Le,{children:"Créer un exercice"})}),e.jsxs("div",{className:"space-y-4",children:[P.exercise_type==="warmup"?e.jsx(Dt,{exercise:P,warmupMode:M,onChange:s=>J(u=>({...u,...s})),onWarmupModeChange:C,idPrefix:"create"}):null,e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nom"}),e.jsx(G,{value:P.nom_exercice,onChange:s=>J({...P,nom_exercice:s.target.value}),placeholder:"ex: Rotations Élastique"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Description"}),e.jsx(be,{value:P.description??"",onChange:s=>J({...P,description:s.target.value===""?null:s.target.value}),placeholder:"Détails, consignes..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Illustration (GIF)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:P.illustration_gif??"",onChange:s=>J({...P,illustration_gif:s.target.value===""?null:s.target.value}),placeholder:"https://...",className:"flex-1"}),e.jsx(ae,{type:"button",variant:"outline",size:"icon",disabled:Y,onClick:()=>{const s=document.createElement("input");s.type="file",s.accept="image/*,.gif",s.onchange=u=>{const v=u.target.files?.[0];v&&ee(v,R=>J($=>({...$,illustration_gif:R})))},s.click()},"aria-label":"Uploader une image",children:Y?e.jsx(bt,{className:"h-4 w-4 animate-spin"}):e.jsx(Nt,{className:"h-4 w-4"})})]}),P.illustration_gif&&e.jsx("img",{src:P.illustration_gif,alt:"Aperçu",className:"mt-2 h-20 w-20 rounded-lg object-cover border"})]}),P.exercise_type!=="warmup"?e.jsx(Rt,{exercise:P,onChange:s=>J(u=>({...u,...s}))}):null,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{id:"warmup-flag",checked:P.exercise_type==="warmup",onCheckedChange:s=>J({...P,exercise_type:s===!0?"warmup":"strength"})}),e.jsx(F,{htmlFor:"warmup-flag",children:"Exercice d'échauffement (warmup)"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ae,{variant:"outline",onClick:()=>m(!1),className:"h-10",children:"Annuler"}),e.jsx(ae,{variant:"default",onClick:()=>hs.mutate(P),disabled:!P.nom_exercice.trim(),className:"h-10",children:"Enregistrer"})]})]})]})}),it=e.jsx(mt,{open:!!_,onOpenChange:s=>{s||b(null)},children:e.jsxs(pt,{children:[e.jsxs(xt,{children:[e.jsx(ft,{children:"Supprimer la séance ?"}),e.jsxs(ht,{children:['Cette action est définitive. La séance "',_?.title,'" sera supprimée.']})]}),e.jsxs(gt,{children:[e.jsx(vt,{children:"Annuler"}),e.jsx(jt,{onClick:()=>{_?.id&&Ee.mutate(_.id)},children:"Supprimer"})]})]})}),ot=e.jsx(mt,{open:!!N,onOpenChange:s=>{s||I(null)},children:e.jsxs(pt,{children:[e.jsxs(xt,{children:[e.jsx(ft,{children:"Supprimer l'exercice ?"}),e.jsxs(ht,{children:[`Cette action est définitive. L'exercice "`,N?.nom_exercice,'" sera supprimé.']})]}),e.jsxs(gt,{children:[e.jsx(vt,{children:"Annuler"}),e.jsx(jt,{onClick:()=>{N?.id&&vs.mutate(N.id)},children:"Supprimer"})]})]})});if(r)return e.jsxs(e.Fragment,{children:[lt,at,it,ot,e.jsx(Zr,{session:O,exercises:V??[],editingSessionId:l,folders:h,onSessionChange:T,onCycleChange:s=>{const u=O.items.map((v,R)=>{const $=V?.find(ce=>ce.id===v.exercise_id);return $?Te($,s,R,v):{...v,cycle_type:s}});T({...O,cycle:s,items:u})},onSave:ws,onCancel:bs,onAddItem:_s,onUpdateItem:Ss,onRemoveItem:Cs,onReorderItems:Es,onExerciseDialogOpen:()=>m(!0),isSaving:tt.isPending||st.isPending})]});if(he)return e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx(De,{className:"h-7 w-64"}),e.jsx(De,{className:"h-10 w-full rounded-2xl"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((s,u)=>e.jsx(De,{className:"h-20 w-full rounded-2xl"},u))})]});if(ie)return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(nr,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"font-semibold",children:"Impossible de charger les données"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:ie instanceof Error?ie.message:"Une erreur s'est produite"}),e.jsx(ae,{variant:"default",onClick:()=>ge(),className:"mt-4 h-12 md:h-10",children:"Réessayer"})]});const ct=s=>e.jsxs("div",{className:"flex items-center gap-3 rounded-xl px-3 py-2 hover:bg-muted/50",children:[s.illustration_gif?e.jsx("button",{type:"button",className:"shrink-0 rounded-lg overflow-hidden border border-border bg-muted",onClick:()=>H({url:s.illustration_gif,name:s.nom_exercice}),children:e.jsx("img",{src:s.illustration_gif,alt:s.nom_exercice,className:"h-10 w-10 object-cover",loading:"lazy",decoding:"async"})}):e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-muted",children:e.jsx(Xe,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate text-sm font-medium",children:s.nom_exercice}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.exercise_type==="warmup"?"Échauffement":"Séries de travail"})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[e.jsx(Oe,{folders:E??[],currentFolderId:s.folder_id,onMove:u=>ke.mutate({itemId:s.id,folderId:u,table:"dim_exercices"})}),e.jsx("button",{type:"button",onClick:()=>Ns(s),className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted","aria-label":"Modifier",children:e.jsx(ar,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>I(s),className:"inline-flex h-9 w-9 items-center justify-center rounded-full text-destructive hover:bg-destructive/10","aria-label":"Supprimer",children:e.jsx(Ye,{className:"h-4 w-4"})})]})]},s.id);return e.jsxs("div",{children:[lt,at,it,ot,A&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:()=>H(null),children:e.jsxs("div",{className:"relative max-w-md w-full",onClick:s=>s.stopPropagation(),children:[e.jsx("img",{src:A.url,alt:A.name,className:"w-full max-h-[80vh] object-contain rounded-2xl"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-center text-white",children:A.name})]})}),e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold",children:"Musculation"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Catalogue"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{const s=prompt("Nom du dossier");s?.trim()&&ys.mutate({name:s.trim(),type:Z==="sessions"?"session":"exercise"})},className:"inline-flex items-center gap-2 rounded-full border border-border px-3 py-2 text-xs font-semibold hover:bg-muted",children:[e.jsx(Js,{className:"h-4 w-4"})," Dossier"]}),Z==="sessions"?e.jsxs("button",{type:"button",onClick:()=>{o(null),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),d(!0)},className:"inline-flex items-center gap-2 rounded-full bg-primary px-3 py-2 text-xs font-semibold text-primary-foreground",children:[e.jsx(_e,{className:"h-4 w-4"})," Nouvelle"]}):e.jsxs("button",{type:"button",onClick:()=>m(!0),className:"inline-flex items-center gap-2 rounded-full bg-primary px-3 py-2 text-xs font-semibold text-primary-foreground",children:[e.jsx(_e,{className:"h-4 w-4"})," Ajouter"]})]})]}),e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs(Mt,{value:Z,onValueChange:s=>j(s),children:[e.jsxs(At,{className:"grid w-full grid-cols-2",children:[e.jsx(Ge,{value:"sessions",children:"Séances"}),e.jsxs(Ge,{value:"exercises",children:["Exercices (",V?.length??0,")"]})]}),e.jsxs(Ue,{value:"sessions",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-border bg-card px-3 py-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("input",{className:"w-full bg-transparent text-sm outline-none placeholder:text-muted-foreground",placeholder:"Rechercher une séance",value:k,onChange:s=>q(s.target.value)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(yt,{sessions:L,isLoading:c,error:y,renderTitle:s=>s.title??"Sans titre",renderMetrics:D,renderExtraActions:s=>e.jsx(Oe,{folders:h??[],currentFolderId:s.folder_id,onMove:u=>ke.mutate({itemId:s.id,folderId:u,table:"strength_sessions"})}),onPreview:s=>ve(s),onEdit:s=>ve(s),onDelete:s=>b(s),canDelete:()=>!0,isDeleting:Ee.isPending}),h?.map(s=>{const u=oe.get(s.id)??[];return e.jsx(Et,{name:s.name,count:u.length,onRename:v=>rt.mutate({id:s.id,name:v}),onDelete:()=>nt.mutate(s.id),children:u.length>0?e.jsx(yt,{sessions:u,renderTitle:v=>v.title??"Sans titre",renderMetrics:D,renderExtraActions:v=>e.jsx(Oe,{folders:h??[],currentFolderId:v.folder_id,onMove:R=>ke.mutate({itemId:v.id,folderId:R,table:"strength_sessions"})}),onPreview:v=>ve(v),onEdit:v=>ve(v),onDelete:v=>b(v),canDelete:()=>!0,isDeleting:Ee.isPending}):e.jsx("div",{className:"rounded-xl border border-dashed border-border px-3 py-4 text-center text-xs text-muted-foreground",children:"Dossier vide"})},s.id)})]})]}),e.jsxs(Ue,{value:"exercises",className:"space-y-3 mt-4",children:[e.jsx("div",{className:"space-y-1",children:xs.map(ct)}),E?.map(s=>{const u=fs.get(s.id)??[];return e.jsx(Et,{name:s.name,count:u.length,onRename:v=>rt.mutate({id:s.id,name:v}),onDelete:()=>nt.mutate(s.id),children:u.length>0?e.jsx("div",{className:"space-y-1",children:u.map(ct)}):e.jsx("div",{className:"rounded-xl border border-dashed border-border px-3 py-4 text-center text-xs text-muted-foreground",children:"Dossier vide"})},s.id)})]})]})})]})}export{Te as createStrengthItemFromExercise,Pn as default};
