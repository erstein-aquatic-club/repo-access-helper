import{r as a,R as Rr,j as e,c as Dr,u as je,d as Y}from"./vendor-query-BiSH4r2z.js";import{a as U}from"./api-B3SYsFV4.js";import{c as He,m as Ir,o as It,P as W,p as Xe,q as Fr,N as Mr,a as Q,l as xe,D as Ye,C as Ar,L as F,I as G,d as Pr,B as ae,S as De,s as dt}from"./index-B84kP_4I.js";import{c as Ft,R as $r,I as qr}from"./index-DlSg2Rd2.js";import{u as Or}from"./index-Cn959HTf.js";import{u as Tr,S as Ie,a as Fe,b as Me,c as Ae,d as te}from"./select-BvUg6k7H.js";import{C as Lr,T as Je}from"./CalendarGrid-C_6PFa2k.js";import{T as be}from"./textarea-DvEott3b.js";import{D as Ne,a as we,b as Le,c as Ke}from"./dialog-DS9BhYQ1.js";import{C as ut}from"./checkbox-BmdsYbY0.js";import{A as mt,a as pt,b as xt,c as ft,d as ht,e as gt,f as vt,g as jt}from"./alert-dialog-BmC7tYi0.js";import{T as Mt,a as At,b as Ge,c as Ue}from"./tabs-0JDJGZ23.js";import{A as Kr,a as Gr,F as Ur,S as zr,b as Vr,c as Br,d as yt}from"./SessionListView-BQOVOYe7.js";import{D as Qr,a as Wr,b as Hr,c as Xr}from"./drawer-z0Pjsr6s.js";import{R as Yr,P as Jr,O as Zr,C as es}from"./index-B2LDpcqA.js";import{u as me}from"./index-Di9oD5fB.js";import{S as Pt}from"./search-Br7uTe1c.js";import{C as $t}from"./chevron-down-BxXR5EDx.js";import{C as ts}from"./check-8LSZzxEJ.js";import{P as _e}from"./plus-Cv3VjSc7.js";import{P as qt,a as Ot,b as Tt}from"./Coach-CMoSf_dI.js";import{C as rs}from"./chevron-right-9BHm-iCF.js";import{P as ss}from"./pencil-s9L5iGAr.js";import{L as bt}from"./loader-circle-JKkBQBmA.js";import{C as ns}from"./circle-alert-DsNU3Zjq.js";import{P as as}from"./pen-D9FTmIOs.js";import"./vendor-react-BzrpNAyj.js";import"./vendor-supabase-6k692oZB.js";import"./index-D4p2JjkK.js";import"./chevron-left-BrS-s74k.js";import"./play-GLZvRjVL.js";import"./badge-BfPV4TwL.js";import"./toggle-group-D79NLYu2.js";import"./sheet-BRM8nJkg.js";import"./separator-BZ6qFO90.js";import"./collapsible-8hSeKA2a.js";import"./user-plus-bswxASy8.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],is=He("ellipsis",ls);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cs=He("funnel",os);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Nt=He("upload",ds);function ze(t,n,{checkForDefaultPrevented:s=!0}={}){return function(l){if(t?.(l),s===!1||!l.defaultPrevented)return n?.(l)}}var us=Rr[" useInsertionEffect ".trim().toString()]||Ir;function ms({prop:t,defaultProp:n,onChange:s=()=>{},caller:d}){const[l,o,p]=ps({defaultProp:n,onChange:s}),m=t!==void 0,g=m?t:l;{const x=a.useRef(t!==void 0);a.useEffect(()=>{const f=x.current;f!==m&&console.warn(`${d} is changing from ${f?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=m},[m,d])}const i=a.useCallback(x=>{if(m){const f=xs(x)?x(t):x;f!==t&&p.current?.(f)}else o(x)},[m,t,o,p]);return[g,i]}function ps({defaultProp:t,onChange:n}){const[s,d]=a.useState(t),l=a.useRef(s),o=a.useRef(n);return us(()=>{o.current=n},[n]),a.useEffect(()=>{l.current!==s&&(o.current?.(s),l.current=s)},[s,l]),[s,d,o]}function xs(t){return typeof t=="function"}var Ze="Radio",[fs,Lt]=It(Ze),[hs,gs]=fs(Ze),Kt=a.forwardRef((t,n)=>{const{__scopeRadio:s,name:d,checked:l=!1,required:o,disabled:p,value:m="on",onCheck:g,form:i,...x}=t,[f,_]=a.useState(null),b=Xe(n,M=>_(M)),N=a.useRef(!1),I=f?i||!!f.closest("form"):!0;return e.jsxs(hs,{scope:s,checked:l,disabled:p,children:[e.jsx(W.button,{type:"button",role:"radio","aria-checked":l,"data-state":Vt(l),"data-disabled":p?"":void 0,disabled:p,value:m,...x,ref:b,onClick:ze(t.onClick,M=>{l||g?.(),I&&(N.current=M.isPropagationStopped(),N.current||M.stopPropagation())})}),I&&e.jsx(zt,{control:f,bubbles:!N.current,name:d,value:m,checked:l,required:o,disabled:p,form:i,style:{transform:"translateX(-100%)"}})]})});Kt.displayName=Ze;var Gt="RadioIndicator",Ut=a.forwardRef((t,n)=>{const{__scopeRadio:s,forceMount:d,...l}=t,o=gs(Gt,s);return e.jsx(Fr,{present:d||o.checked,children:e.jsx(W.span,{"data-state":Vt(o.checked),"data-disabled":o.disabled?"":void 0,...l,ref:n})})});Ut.displayName=Gt;var vs="RadioBubbleInput",zt=a.forwardRef(({__scopeRadio:t,control:n,checked:s,bubbles:d=!0,...l},o)=>{const p=a.useRef(null),m=Xe(p,o),g=Tr(s),i=Mr(n);return a.useEffect(()=>{const x=p.current;if(!x)return;const f=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(f,"checked").set;if(g!==s&&b){const N=new Event("click",{bubbles:d});b.call(x,s),x.dispatchEvent(N)}},[g,s,d]),e.jsx(W.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:m,style:{...l.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});zt.displayName=vs;function Vt(t){return t?"checked":"unchecked"}var js=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Se="RadioGroup",[ys]=It(Se,[Ft,Lt]),Bt=Ft(),Qt=Lt(),[bs,Ns]=ys(Se),Wt=a.forwardRef((t,n)=>{const{__scopeRadioGroup:s,name:d,defaultValue:l,value:o,required:p=!1,disabled:m=!1,orientation:g,dir:i,loop:x=!0,onValueChange:f,..._}=t,b=Bt(s),N=Or(i),[I,M]=ms({prop:o,defaultProp:l??null,onChange:f,caller:Se});return e.jsx(bs,{scope:s,name:d,required:p,disabled:m,value:I,onValueChange:M,children:e.jsx($r,{asChild:!0,...b,orientation:g,dir:N,loop:x,children:e.jsx(W.div,{role:"radiogroup","aria-required":p,"aria-orientation":g,"data-disabled":m?"":void 0,dir:N,..._,ref:n})})})});Wt.displayName=Se;var Ht="RadioGroupItem",Xt=a.forwardRef((t,n)=>{const{__scopeRadioGroup:s,disabled:d,...l}=t,o=Ns(Ht,s),p=o.disabled||d,m=Bt(s),g=Qt(s),i=a.useRef(null),x=Xe(n,i),f=o.value===l.value,_=a.useRef(!1);return a.useEffect(()=>{const b=I=>{js.includes(I.key)&&(_.current=!0)},N=()=>_.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",N)}},[]),e.jsx(qr,{asChild:!0,...m,focusable:!p,active:f,children:e.jsx(Kt,{disabled:p,required:o.required,checked:f,...g,...l,name:o.name,ref:x,onCheck:()=>o.onValueChange(l.value),onKeyDown:ze(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:ze(l.onFocus,()=>{_.current&&i.current?.click()})})})});Xt.displayName=Ht;var ws="RadioGroupIndicator",Yt=a.forwardRef((t,n)=>{const{__scopeRadioGroup:s,...d}=t,l=Qt(s);return e.jsx(Ut,{...l,...d,ref:n})});Yt.displayName=ws;var Jt=Wt,Zt=Xt,_s=Yt;const er=a.forwardRef(({className:t,...n},s)=>e.jsx(Jt,{className:Q("grid gap-2",t),...n,ref:s}));er.displayName=Jt.displayName;const Ve=a.forwardRef(({className:t,...n},s)=>e.jsx(Zt,{ref:s,className:Q("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:e.jsx(_s,{className:"flex items-center justify-center",children:e.jsx(Lr,{className:"h-3.5 w-3.5 fill-primary"})})}));Ve.displayName=Zt.displayName;var wt=1,Ss=.9,Cs=.8,Es=.17,Pe=.1,$e=.999,ks=.9999,Rs=.99,Ds=/[\\\/_+.#"@\[\(\{&]/,Is=/[\\\/_+.#"@\[\(\{&]/g,Fs=/[\s-]/,tr=/[\s-]/g;function Be(t,n,s,d,l,o,p){if(o===n.length)return l===t.length?wt:Rs;var m=`${l},${o}`;if(p[m]!==void 0)return p[m];for(var g=d.charAt(o),i=s.indexOf(g,l),x=0,f,_,b,N;i>=0;)f=Be(t,n,s,d,i+1,o+1,p),f>x&&(i===l?f*=wt:Ds.test(t.charAt(i-1))?(f*=Cs,b=t.slice(l,i-1).match(Is),b&&l>0&&(f*=Math.pow($e,b.length))):Fs.test(t.charAt(i-1))?(f*=Ss,N=t.slice(l,i-1).match(tr),N&&l>0&&(f*=Math.pow($e,N.length))):(f*=Es,l>0&&(f*=Math.pow($e,i-l))),t.charAt(i)!==n.charAt(o)&&(f*=ks)),(f<Pe&&s.charAt(i-1)===d.charAt(o+1)||d.charAt(o+1)===d.charAt(o)&&s.charAt(i-1)!==d.charAt(o))&&(_=Be(t,n,s,d,i+1,o+2,p),_*Pe>f&&(f=_*Pe)),f>x&&(x=f),i=s.indexOf(g,i+1);return p[m]=x,x}function _t(t){return t.toLowerCase().replace(tr," ")}function Ms(t,n,s){return t=s&&s.length>0?`${t+" "+s.join(" ")}`:t,Be(t,n,_t(t),_t(n),0,0,{})}var pe='[cmdk-group=""]',qe='[cmdk-group-items=""]',As='[cmdk-group-heading=""]',rr='[cmdk-item=""]',St=`${rr}:not([aria-disabled="true"])`,Qe="cmdk-item-select",de="data-value",Ps=(t,n,s)=>Ms(t,n,s),sr=a.createContext(void 0),fe=()=>a.useContext(sr),nr=a.createContext(void 0),et=()=>a.useContext(nr),ar=a.createContext(void 0),lr=a.forwardRef((t,n)=>{let s=ue(()=>{var c,y;return{search:"",value:(y=(c=t.value)!=null?c:t.defaultValue)!=null?y:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),d=ue(()=>new Set),l=ue(()=>new Map),o=ue(()=>new Map),p=ue(()=>new Set),m=ir(t),{label:g,children:i,value:x,onValueChange:f,filter:_,shouldFilter:b,loop:N,disablePointerSelection:I=!1,vimBindings:M=!0,...C}=t,w=me(),se=me(),J=me(),V=a.useRef(null),k=Bs();le(()=>{if(x!==void 0){let c=x.trim();s.current.value=c,q.emit()}},[x]),le(()=>{k(6,O)},[]);let q=a.useMemo(()=>({subscribe:c=>(p.current.add(c),()=>p.current.delete(c)),snapshot:()=>s.current,setState:(c,y,S)=>{var h,E,D,L;if(!Object.is(s.current[c],y)){if(s.current[c]=y,c==="search")ee(),A(),k(1,H);else if(c==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let K=document.getElementById(J);K?K.focus():(h=document.getElementById(w))==null||h.focus()}if(k(7,()=>{var K;s.current.selectedItemId=(K=T())==null?void 0:K.id,q.emit()}),S||k(5,O),((E=m.current)==null?void 0:E.value)!==void 0){let K=y??"";(L=(D=m.current).onValueChange)==null||L.call(D,K);return}}q.emit()}},emit:()=>{p.current.forEach(c=>c())}}),[]),Z=a.useMemo(()=>({value:(c,y,S)=>{var h;y!==((h=o.current.get(c))==null?void 0:h.value)&&(o.current.set(c,{value:y,keywords:S}),s.current.filtered.items.set(c,j(y,S)),k(2,()=>{A(),q.emit()}))},item:(c,y)=>(d.current.add(c),y&&(l.current.has(y)?l.current.get(y).add(c):l.current.set(y,new Set([c]))),k(3,()=>{ee(),A(),s.current.value||H(),q.emit()}),()=>{o.current.delete(c),d.current.delete(c),s.current.filtered.items.delete(c);let S=T();k(4,()=>{ee(),S?.getAttribute("id")===c&&H(),q.emit()})}),group:c=>(l.current.has(c)||l.current.set(c,new Set),()=>{o.current.delete(c),l.current.delete(c)}),filter:()=>m.current.shouldFilter,label:g||t["aria-label"],getDisablePointerSelection:()=>m.current.disablePointerSelection,listId:w,inputId:J,labelId:se,listInnerRef:V}),[]);function j(c,y){var S,h;let E=(h=(S=m.current)==null?void 0:S.filter)!=null?h:Ps;return c?E(c,s.current.search,y):0}function A(){if(!s.current.search||m.current.shouldFilter===!1)return;let c=s.current.filtered.items,y=[];s.current.filtered.groups.forEach(h=>{let E=l.current.get(h),D=0;E.forEach(L=>{let K=c.get(L);D=Math.max(K,D)}),y.push([h,D])});let S=V.current;P().sort((h,E)=>{var D,L;let K=h.getAttribute("id"),oe=E.getAttribute("id");return((D=c.get(oe))!=null?D:0)-((L=c.get(K))!=null?L:0)}).forEach(h=>{let E=h.closest(qe);E?E.appendChild(h.parentElement===E?h:h.closest(`${qe} > *`)):S.appendChild(h.parentElement===S?h:h.closest(`${qe} > *`))}),y.sort((h,E)=>E[1]-h[1]).forEach(h=>{var E;let D=(E=V.current)==null?void 0:E.querySelector(`${pe}[${de}="${encodeURIComponent(h[0])}"]`);D?.parentElement.appendChild(D)})}function H(){let c=P().find(S=>S.getAttribute("aria-disabled")!=="true"),y=c?.getAttribute(de);q.setState("value",y||void 0)}function ee(){var c,y,S,h;if(!s.current.search||m.current.shouldFilter===!1){s.current.filtered.count=d.current.size;return}s.current.filtered.groups=new Set;let E=0;for(let D of d.current){let L=(y=(c=o.current.get(D))==null?void 0:c.value)!=null?y:"",K=(h=(S=o.current.get(D))==null?void 0:S.keywords)!=null?h:[],oe=j(L,K);s.current.filtered.items.set(D,oe),oe>0&&E++}for(let[D,L]of l.current)for(let K of L)if(s.current.filtered.items.get(K)>0){s.current.filtered.groups.add(D);break}s.current.filtered.count=E}function O(){var c,y,S;let h=T();h&&(((c=h.parentElement)==null?void 0:c.firstChild)===h&&((S=(y=h.closest(pe))==null?void 0:y.querySelector(As))==null||S.scrollIntoView({block:"nearest"})),h.scrollIntoView({block:"nearest"}))}function T(){var c;return(c=V.current)==null?void 0:c.querySelector(`${rr}[aria-selected="true"]`)}function P(){var c;return Array.from(((c=V.current)==null?void 0:c.querySelectorAll(St))||[])}function X(c){let y=P()[c];y&&q.setState("value",y.getAttribute(de))}function B(c){var y;let S=T(),h=P(),E=h.findIndex(L=>L===S),D=h[E+c];(y=m.current)!=null&&y.loop&&(D=E+c<0?h[h.length-1]:E+c===h.length?h[0]:h[E+c]),D&&q.setState("value",D.getAttribute(de))}function he(c){let y=T(),S=y?.closest(pe),h;for(;S&&!h;)S=c>0?zs(S,pe):Vs(S,pe),h=S?.querySelector(St);h?q.setState("value",h.getAttribute(de)):B(c)}let ie=()=>X(P().length-1),ge=c=>{c.preventDefault(),c.metaKey?ie():c.altKey?he(1):B(1)},ne=c=>{c.preventDefault(),c.metaKey?X(0):c.altKey?he(-1):B(-1)};return a.createElement(W.div,{ref:n,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:c=>{var y;(y=C.onKeyDown)==null||y.call(C,c);let S=c.nativeEvent.isComposing||c.keyCode===229;if(!(c.defaultPrevented||S))switch(c.key){case"n":case"j":{M&&c.ctrlKey&&ge(c);break}case"ArrowDown":{ge(c);break}case"p":case"k":{M&&c.ctrlKey&&ne(c);break}case"ArrowUp":{ne(c);break}case"Home":{c.preventDefault(),X(0);break}case"End":{c.preventDefault(),ie();break}case"Enter":{c.preventDefault();let h=T();if(h){let E=new Event(Qe);h.dispatchEvent(E)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:Z.inputId,id:Z.labelId,style:Ws},g),Ce(t,c=>a.createElement(nr.Provider,{value:q},a.createElement(sr.Provider,{value:Z},c))))}),$s=a.forwardRef((t,n)=>{var s,d;let l=me(),o=a.useRef(null),p=a.useContext(ar),m=fe(),g=ir(t),i=(d=(s=g.current)==null?void 0:s.forceMount)!=null?d:p?.forceMount;le(()=>{if(!i)return m.item(l,p?.id)},[i]);let x=or(l,o,[t.value,t.children,o],t.keywords),f=et(),_=re(k=>k.value&&k.value===x.current),b=re(k=>i||m.filter()===!1?!0:k.search?k.filtered.items.get(l)>0:!0);a.useEffect(()=>{let k=o.current;if(!(!k||t.disabled))return k.addEventListener(Qe,N),()=>k.removeEventListener(Qe,N)},[b,t.onSelect,t.disabled]);function N(){var k,q;I(),(q=(k=g.current).onSelect)==null||q.call(k,x.current)}function I(){f.setState("value",x.current,!0)}if(!b)return null;let{disabled:M,value:C,onSelect:w,forceMount:se,keywords:J,...V}=t;return a.createElement(W.div,{ref:xe(o,n),...V,id:l,"cmdk-item":"",role:"option","aria-disabled":!!M,"aria-selected":!!_,"data-disabled":!!M,"data-selected":!!_,onPointerMove:M||m.getDisablePointerSelection()?void 0:I,onClick:M?void 0:N},t.children)}),qs=a.forwardRef((t,n)=>{let{heading:s,children:d,forceMount:l,...o}=t,p=me(),m=a.useRef(null),g=a.useRef(null),i=me(),x=fe(),f=re(b=>l||x.filter()===!1?!0:b.search?b.filtered.groups.has(p):!0);le(()=>x.group(p),[]),or(p,m,[t.value,t.heading,g]);let _=a.useMemo(()=>({id:p,forceMount:l}),[l]);return a.createElement(W.div,{ref:xe(m,n),...o,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},s&&a.createElement("div",{ref:g,"cmdk-group-heading":"","aria-hidden":!0,id:i},s),Ce(t,b=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":s?i:void 0},a.createElement(ar.Provider,{value:_},b))))}),Os=a.forwardRef((t,n)=>{let{alwaysRender:s,...d}=t,l=a.useRef(null),o=re(p=>!p.search);return!s&&!o?null:a.createElement(W.div,{ref:xe(l,n),...d,"cmdk-separator":"",role:"separator"})}),Ts=a.forwardRef((t,n)=>{let{onValueChange:s,...d}=t,l=t.value!=null,o=et(),p=re(i=>i.search),m=re(i=>i.selectedItemId),g=fe();return a.useEffect(()=>{t.value!=null&&o.setState("search",t.value)},[t.value]),a.createElement(W.input,{ref:n,...d,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":g.listId,"aria-labelledby":g.labelId,"aria-activedescendant":m,id:g.inputId,type:"text",value:l?t.value:p,onChange:i=>{l||o.setState("search",i.target.value),s?.(i.target.value)}})}),Ls=a.forwardRef((t,n)=>{let{children:s,label:d="Suggestions",...l}=t,o=a.useRef(null),p=a.useRef(null),m=re(i=>i.selectedItemId),g=fe();return a.useEffect(()=>{if(p.current&&o.current){let i=p.current,x=o.current,f,_=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let b=i.offsetHeight;x.style.setProperty("--cmdk-list-height",b.toFixed(1)+"px")})});return _.observe(i),()=>{cancelAnimationFrame(f),_.unobserve(i)}}},[]),a.createElement(W.div,{ref:xe(o,n),...l,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":m,"aria-label":d,id:g.listId},Ce(t,i=>a.createElement("div",{ref:xe(p,g.listInnerRef),"cmdk-list-sizer":""},i)))}),Ks=a.forwardRef((t,n)=>{let{open:s,onOpenChange:d,overlayClassName:l,contentClassName:o,container:p,...m}=t;return a.createElement(Yr,{open:s,onOpenChange:d},a.createElement(Jr,{container:p},a.createElement(Zr,{"cmdk-overlay":"",className:l}),a.createElement(es,{"aria-label":t.label,"cmdk-dialog":"",className:o},a.createElement(lr,{ref:n,...m}))))}),Gs=a.forwardRef((t,n)=>re(s=>s.filtered.count===0)?a.createElement(W.div,{ref:n,...t,"cmdk-empty":"",role:"presentation"}):null),Us=a.forwardRef((t,n)=>{let{progress:s,children:d,label:l="Loading...",...o}=t;return a.createElement(W.div,{ref:n,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":l},Ce(t,p=>a.createElement("div",{"aria-hidden":!0},p)))}),z=Object.assign(lr,{List:Ls,Item:$s,Input:Ts,Group:qs,Separator:Os,Dialog:Ks,Empty:Gs,Loading:Us});function zs(t,n){let s=t.nextElementSibling;for(;s;){if(s.matches(n))return s;s=s.nextElementSibling}}function Vs(t,n){let s=t.previousElementSibling;for(;s;){if(s.matches(n))return s;s=s.previousElementSibling}}function ir(t){let n=a.useRef(t);return le(()=>{n.current=t}),n}var le=typeof window>"u"?a.useEffect:a.useLayoutEffect;function ue(t){let n=a.useRef();return n.current===void 0&&(n.current=t()),n}function re(t){let n=et(),s=()=>t(n.snapshot());return a.useSyncExternalStore(n.subscribe,s,s)}function or(t,n,s,d=[]){let l=a.useRef(),o=fe();return le(()=>{var p;let m=(()=>{var i;for(let x of s){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(i=x.current.textContent)==null?void 0:i.trim():l.current}})(),g=d.map(i=>i.trim());o.value(t,m,g),(p=n.current)==null||p.setAttribute(de,m),l.current=m}),l}var Bs=()=>{let[t,n]=a.useState(),s=ue(()=>new Map);return le(()=>{s.current.forEach(d=>d()),s.current=new Map},[t]),(d,l)=>{s.current.set(d,l),n({})}};function Qs(t){let n=t.type;return typeof n=="function"?n(t.props):"render"in n?n.render(t.props):t}function Ce({asChild:t,children:n},s){return t&&a.isValidElement(n)?a.cloneElement(Qs(n),{ref:n.ref},s(n.props.children)):s(n)}var Ws={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const cr=a.forwardRef(({className:t,...n},s)=>e.jsx(z,{ref:s,className:Q("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...n}));cr.displayName=z.displayName;const dr=a.forwardRef(({className:t,...n},s)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Pt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(z.Input,{ref:s,className:Q("flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...n})]}));dr.displayName=z.Input.displayName;const ur=a.forwardRef(({className:t,...n},s)=>e.jsx(z.List,{ref:s,className:Q("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...n}));ur.displayName=z.List.displayName;const mr=a.forwardRef((t,n)=>e.jsx(z.Empty,{ref:n,className:"py-6 text-center text-sm",...t}));mr.displayName=z.Empty.displayName;const We=a.forwardRef(({className:t,...n},s)=>e.jsx(z.Group,{ref:s,className:Q("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...n}));We.displayName=z.Group.displayName;const Hs=a.forwardRef(({className:t,...n},s)=>e.jsx(z.Separator,{ref:s,className:Q("-mx-1 h-px bg-border",t),...n}));Hs.displayName=z.Separator.displayName;const pr=a.forwardRef(({className:t,...n},s)=>e.jsx(z.Item,{ref:s,className:Q("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t),...n}));pr.displayName=z.Item.displayName;function Xs({exercises:t,selectedId:n,onSelect:s}){const[d,l]=a.useState(!1),o=t.find(i=>i.id===n),p=t.filter(i=>i.exercise_type!=="warmup"),m=t.filter(i=>i.exercise_type==="warmup"),g=i=>{s(i),l(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",onClick:()=>l(!0),className:"flex w-full items-center gap-2 rounded-xl border border-input bg-background px-3 py-2 text-sm hover:bg-accent/50",children:[o?.illustration_gif?e.jsx("img",{src:o.illustration_gif,alt:"",className:"h-7 w-7 shrink-0 rounded-md object-cover"}):e.jsx("div",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-md bg-muted",children:e.jsx(Ye,{className:"h-3.5 w-3.5 text-muted-foreground"})}),e.jsx("span",{className:"min-w-0 flex-1 truncate text-left font-medium",children:o?.nom_exercice??"Choisir un exercice"}),e.jsx($t,{className:"h-4 w-4 shrink-0 text-muted-foreground"})]}),e.jsx(Qr,{open:d,onOpenChange:l,children:e.jsxs(Wr,{className:"max-h-[85vh]",children:[e.jsx(Hr,{className:"pb-0",children:e.jsx(Xr,{children:"Choisir un exercice"})}),e.jsxs(cr,{className:"mt-2",shouldFilter:!0,children:[e.jsx(dr,{placeholder:"Rechercher...",className:"h-12"}),e.jsxs(ur,{className:"max-h-[60vh] px-1 pb-safe",children:[e.jsx(mr,{children:"Aucun exercice trouvé"}),p.length>0&&e.jsx(We,{heading:"Travail",children:p.map(i=>e.jsx(Ct,{exercise:i,isSelected:i.id===n,onSelect:()=>g(i.id)},i.id))}),m.length>0&&e.jsx(We,{heading:"Échauffement",children:m.map(i=>e.jsx(Ct,{exercise:i,isSelected:i.id===n,onSelect:()=>g(i.id)},i.id))})]})]})]})})]})}function Ct({exercise:t,isSelected:n,onSelect:s}){return e.jsxs(pr,{value:t.nom_exercice,onSelect:s,className:"flex items-center gap-3 rounded-xl px-2 py-2.5",children:[t.illustration_gif?e.jsx("img",{src:t.illustration_gif,alt:"",className:"h-9 w-9 shrink-0 rounded-lg object-cover",loading:"lazy",decoding:"async"}):e.jsx("div",{className:"flex h-9 w-9 shrink-0 items-center justify-center rounded-lg bg-muted",children:e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx("span",{className:"min-w-0 flex-1 truncate text-sm font-medium",children:t.nom_exercice}),n&&e.jsx(ts,{className:"h-4 w-4 shrink-0 text-primary"})]})}function Ys({exercise:t,exercises:n,exerciseFilter:s,index:d,totalItems:l,onChange:o,onDelete:p,onMoveUp:m,onMoveDown:g}){const[i,x]=a.useState(!1),[f,_]=a.useState(!1),b=n.filter(w=>s==="all"?!0:w.exercise_type===s),N=n.find(w=>w.id===t.exercise_id),I=N?.nom_exercice??"Exercice",M=N?.exercise_type==="warmup",C=N?.illustration_gif;return e.jsxs(e.Fragment,{children:[e.jsxs(Ar,{className:Q("rounded-2xl border-border transition-all",i&&"ring-1 ring-primary/20"),children:[e.jsxs("button",{type:"button",className:"flex w-full items-center gap-3 p-3 text-left",onClick:()=>x(!i),children:[e.jsx("span",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-muted text-xs font-bold text-muted-foreground",children:d+1}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"truncate text-sm font-semibold",children:I}),M&&e.jsx("span",{className:"shrink-0 rounded-full bg-amber-100 px-2 py-0.5 text-[10px] font-semibold text-amber-800",children:"Échauf."})]}),e.jsxs("div",{className:"mt-0.5 text-xs text-muted-foreground",children:[t.sets,"×",t.reps,t.percent_1rm?` @ ${t.percent_1rm}% 1RM`:"",t.rest_seconds?` · ${t.rest_seconds}s repos`:""]})]}),C&&e.jsx("button",{type:"button",className:"shrink-0 rounded-lg overflow-hidden border border-border bg-muted",onClick:w=>{w.stopPropagation(),_(!0)},children:e.jsx("img",{src:C,alt:I,className:"h-9 w-9 object-cover"})}),e.jsx($t,{className:Q("h-4 w-4 shrink-0 text-muted-foreground transition-transform",i&&"rotate-180")})]}),i&&e.jsxs("div",{className:"border-t border-border px-3 pb-3 pt-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Séries"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.sets===0?"":t.sets,onChange:w=>o("sets",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Reps"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.reps===0?"":t.reps,onChange:w=>o("reps",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"% 1RM"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.percent_1rm===0?"":t.percent_1rm,onChange:w=>o("percent_1rm",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Repos (s)"}),e.jsx(G,{type:"number",inputMode:"numeric",value:t.rest_seconds===0?"":t.rest_seconds,onChange:w=>o("rest_seconds",w.target.value===""?0:Number(w.target.value)),className:"rounded-xl h-10"})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Exercice"}),e.jsx(Xs,{exercises:b,selectedId:t.exercise_id,onSelect:w=>o("exercise_id",w)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"text-xs",children:"Notes"}),e.jsx(be,{value:t.notes??"",onChange:w=>o("notes",w.target.value||null),placeholder:"Notes optionnelles...",className:"rounded-xl min-h-[60px]"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",onClick:w=>{w.stopPropagation(),m()},disabled:d===0,className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted disabled:opacity-30","aria-label":"Monter",children:e.jsx(Kr,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:w=>{w.stopPropagation(),g()},disabled:d===l-1,className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted disabled:opacity-30","aria-label":"Descendre",children:e.jsx(Gr,{className:"h-4 w-4"})})]}),e.jsxs("button",{type:"button",onClick:w=>{w.stopPropagation(),p()},className:"inline-flex h-9 items-center gap-2 rounded-full px-3 text-xs font-medium text-destructive hover:bg-destructive/10",children:[e.jsx(Je,{className:"h-3.5 w-3.5"}),"Supprimer"]})]})]})]}),C&&e.jsx(Ne,{open:f,onOpenChange:_,children:e.jsx(we,{className:"sm:max-w-md p-2",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:C,alt:I,className:"w-full max-h-[70vh] object-contain rounded-lg"}),e.jsx("p",{className:"text-sm font-medium text-center",children:I})]})})})]})}const Js=t=>t==="endurance"||t==="hypertrophie"||t==="force"?t:"endurance";function Zs({session:t,exercises:n,editingSessionId:s,folders:d,onSessionChange:l,onCycleChange:o,onSave:p,onCancel:m,onAddItem:g,onUpdateItem:i,onRemoveItem:x,onReorderItems:f,onExerciseDialogOpen:_,isSaving:b}){const[N,I]=a.useState("all"),[M,C]=a.useState(!1),[w,se]=a.useState(!1),J=new Map(n.map(j=>[j.id,j])),V=t.items.reduce((j,A)=>j+(A.sets||0),0),k=j=>{j>0&&f(j,j-1)},q=j=>{j<t.items.length-1&&f(j,j+1)},Z=()=>{C(!0)};return e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[e.jsx(Ur,{isEditing:!!s,isSaving:b,onSave:p,onCancel:m,onPreview:Z}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(zr,{name:t.title,onNameChange:j=>l({...t,title:j}),showDuration:!1,showTotalDistance:!1,collapsible:!0,collapsed:w,onToggleCollapse:()=>se(!w),collapsedSummary:e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium text-foreground",children:t.title||"Sans titre"}),e.jsx("span",{children:"·"}),e.jsx("span",{className:"capitalize",children:t.cycle}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[V," séries"]})]}),additionalFields:e.jsxs(e.Fragment,{children:[d&&d.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Dossier"}),e.jsx("div",{className:"mt-1",children:e.jsxs(Ie,{value:t.folder_id?.toString()??"none",onValueChange:j=>l({...t,folder_id:j==="none"?null:parseInt(j)}),children:[e.jsx(Fe,{className:"rounded-2xl",children:e.jsx(Me,{})}),e.jsxs(Ae,{children:[e.jsx(te,{value:"none",children:"Aucun"}),d.map(j=>e.jsx(te,{value:j.id.toString(),children:j.name},j.id))]})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Cycle"}),e.jsx("div",{className:"mt-1",children:e.jsxs(Ie,{value:t.cycle,onValueChange:j=>o(Js(j)),children:[e.jsx(Fe,{className:"rounded-2xl",children:e.jsx(Me,{})}),e.jsxs(Ae,{children:[e.jsx(te,{value:"endurance",children:"Endurance"}),e.jsx(te,{value:"hypertrophie",children:"Hypertrophie"}),e.jsx(te,{value:"force",children:"Force"})]})]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Séries totales"}),e.jsx("div",{className:"mt-1 rounded-2xl border border-border bg-muted px-3 py-2 text-sm font-semibold",children:V})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground",children:"Description"}),e.jsx("div",{className:"mt-1",children:e.jsx(be,{value:t.description,onChange:j=>l({...t,description:j.target.value}),placeholder:"Description optionnelle...",className:"rounded-2xl min-h-[60px]"})})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm font-semibold",children:["Exercices (",t.items.length,")"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ie,{value:N,onValueChange:j=>I(j),children:[e.jsxs(Fe,{className:"h-8 w-auto gap-1 rounded-full border-dashed text-xs",children:[e.jsx(cs,{className:"h-3 w-3"}),e.jsx(Me,{})]}),e.jsxs(Ae,{children:[e.jsx(te,{value:"all",children:"Tous"}),e.jsx(te,{value:"strength",children:"Travail"}),e.jsx(te,{value:"warmup",children:"Échauf."})]})]})})]}),e.jsx("div",{className:"space-y-2",children:t.items.map((j,A)=>e.jsx(Ys,{exercise:j,exercises:n,exerciseFilter:N,index:A,totalItems:t.items.length,onChange:(H,ee)=>i(A,H,ee),onDelete:()=>x(A),onMoveUp:()=>k(A),onMoveDown:()=>q(A)},`${j.exercise_id}-${A}`))}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{type:"button",onClick:g,className:"inline-flex items-center gap-2 rounded-full bg-primary px-4 py-2 text-xs font-semibold text-primary-foreground",children:[e.jsx(_e,{className:"h-4 w-4"})," Ajouter un exercice"]}),e.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center gap-2 rounded-full border border-border px-4 py-2 text-xs font-semibold hover:bg-muted",children:[e.jsx(_e,{className:"h-4 w-4"})," Nouvel exercice"]})]})]}),e.jsx(Ne,{open:M,onOpenChange:C,children:e.jsxs(we,{className:"sm:max-w-3xl",children:[e.jsx(Le,{children:e.jsx(Ke,{children:"Aperçu de la séance"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-lg font-semibold",children:t.title||"Sans titre"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description||"—"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Cycle : ",t.cycle]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Exercices"}),e.jsx("div",{className:"space-y-2",children:t.items.slice().sort((j,A)=>(j.order_index??0)-(A.order_index??0)).map((j,A)=>{const H=J.get(j.exercise_id);return e.jsxs("div",{className:"rounded-xl border px-3 py-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("span",{className:"font-medium",children:[A+1,". ",H?.nom_exercice??"Exercice"]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:H?.exercise_type==="warmup"?"Échauffement":"Travail"})]}),e.jsxs("div",{className:"mt-1 text-xs text-muted-foreground",children:[j.sets," séries • ",j.reps," reps • ",j.percent_1rm,"% 1RM •"," ",j.rest_seconds,"s"]})]},`${j.exercise_id}-${A}`)})})]})]})]})})]})}function Et({name:t,count:n,children:s,onRename:d,onDelete:l,defaultOpen:o=!1}){const[p,m]=a.useState(o),[g,i]=a.useState(!1),[x,f]=a.useState(t),[_,b]=a.useState(!1),N=a.useRef(null);a.useEffect(()=>{g&&(N.current?.focus(),N.current?.select())},[g]);const I=()=>{const C=x.trim();C&&C!==t?d(C):f(t),i(!1)},M=()=>{f(t),i(!1)};return e.jsxs("div",{children:[e.jsxs("div",{className:Q("flex items-center gap-1 rounded-xl px-2 py-1.5 cursor-pointer select-none hover:bg-muted/50"),onClick:()=>{g||m(C=>!C)},children:[e.jsx(rs,{className:Q("h-4 w-4 shrink-0 text-muted-foreground transition-transform",p&&"rotate-90")}),g?e.jsx(G,{ref:N,className:"h-7 text-sm rounded-lg flex-1",value:x,onChange:C=>f(C.target.value),onClick:C=>C.stopPropagation(),onKeyDown:C=>{C.stopPropagation(),C.key==="Enter"&&I(),C.key==="Escape"&&M()},onBlur:I}):e.jsx("span",{className:"text-sm font-semibold truncate",children:t}),!g&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",n,")"]}),e.jsx("div",{className:"flex-1"}),e.jsxs(qt,{open:_,onOpenChange:b,children:[e.jsx(Ot,{asChild:!0,children:e.jsx("button",{className:"h-7 w-7 shrink-0 inline-flex items-center justify-center rounded-full hover:bg-muted",onClick:C=>{C.stopPropagation()},children:e.jsx(is,{className:"h-4 w-4 text-muted-foreground"})})}),e.jsxs(Tt,{align:"end",className:"w-40 p-1",onClick:C=>C.stopPropagation(),children:[e.jsxs("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm hover:bg-muted",onClick:()=>{b(!1),f(t),i(!0)},children:[e.jsx(ss,{className:"h-4 w-4"}),"Rename"]}),e.jsxs("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm text-destructive hover:bg-muted",onClick:()=>{b(!1),l()},children:[e.jsx(Je,{className:"h-4 w-4"}),"Delete"]})]})]})]}),p&&e.jsx("div",{className:"ml-4",children:s})]})}function Oe({folders:t,currentFolderId:n,onMove:s,children:d}){const[l,o]=a.useState(!1);function p(m){s(m),o(!1)}return e.jsxs(qt,{open:l,onOpenChange:o,children:[e.jsx(Ot,{asChild:!0,children:d??e.jsx("button",{className:"flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted","aria-label":"Déplacer",title:"Déplacer vers un dossier",children:e.jsx(Vr,{className:"h-4 w-4"})})}),e.jsxs(Tt,{className:"w-44 p-1",align:"end",children:[e.jsx("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm hover:bg-muted",style:{fontWeight:n?void 0:"bold"},onClick:()=>p(null),children:"Aucun dossier"}),t.map(m=>e.jsx("button",{className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm hover:bg-muted",style:{fontWeight:n===m.id?"bold":void 0},onClick:()=>p(m.id),children:m.name},m.id))]})]})}const kt=[{key:"endurance",label:"Endurance",fieldSuffix:"endurance"},{key:"hypertrophie",label:"Hypertrophie",fieldSuffix:"hypertrophie"},{key:"force",label:"Force",fieldSuffix:"force"}],en=t=>t==="endurance"||t==="hypertrophie"||t==="force"?t:"endurance",Rt=({exercise:t,onChange:n,disabled:s=!1})=>e.jsxs(Mt,{defaultValue:"endurance",className:"w-full",children:[e.jsx(At,{className:"grid w-full grid-cols-3",children:kt.map(d=>e.jsx(Ge,{value:d.key,children:d.label},d.key))}),kt.map(d=>{const l=`pct_1rm_${d.fieldSuffix}`,o=`Nb_series_${d.fieldSuffix}`,p=`Nb_reps_${d.fieldSuffix}`,m=`recup_${d.fieldSuffix}`,g=`recup_exercices_${d.fieldSuffix}`;return e.jsxs(Ue,{value:d.key,className:`space-y-3 rounded-lg border p-3 ${s?"opacity-60":""}`,children:[e.jsx("p",{className:"text-sm font-semibold",children:d.label}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"% 1RM"}),e.jsx(G,{type:"number",value:t[l]??"",disabled:s,onChange:i=>n({[l]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nb séries"}),e.jsx(G,{type:"number",value:t[o]??"",disabled:s,onChange:i=>n({[o]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nb reps"}),e.jsx(G,{type:"number",value:t[p]??"",disabled:s,onChange:i=>n({[p]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Récup. séries (s)"}),e.jsx(G,{type:"number",value:t[m]??"",disabled:s,onChange:i=>n({[m]:i.target.value===""?null:Number(i.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Récup. exercices (s)"}),e.jsx(G,{type:"number",value:t[g]??"",disabled:s,onChange:i=>n({[g]:i.target.value===""?null:Number(i.target.value)})})]})]})]},d.key)})]}),tn={pct_1rm_endurance:60,pct_1rm_hypertrophie:75,pct_1rm_force:85,Nb_series_endurance:4,Nb_series_hypertrophie:3,Nb_series_force:3,Nb_reps_endurance:16,Nb_reps_hypertrophie:8,Nb_reps_force:3,recup_endurance:120,recup_hypertrophie:200,recup_force:300,recup_exercices_endurance:300,recup_exercices_hypertrophie:400,recup_exercices_force:500},ye=t=>{const n=Number(t);return Number.isFinite(n)?n:0},Te=(t,n,s,d)=>{const l=n==="force"?"force":n==="hypertrophie"?"hypertrophie":"endurance",o=`Nb_series_${l}`,p=`Nb_reps_${l}`,m=`pct_1rm_${l}`,g=`recup_${l}`;return{exercise_id:t.id,order_index:s,sets:ye(t[o]),reps:ye(t[p]),rest_seconds:ye(t[g]),percent_1rm:ye(t[m]),cycle_type:n,notes:d?.notes??""}},rn=()=>({nom_exercice:"",description:null,illustration_gif:null,exercise_type:"strength",warmup_reps:null,warmup_duration:null,...tn}),Dt=({exercise:t,warmupMode:n,onChange:s,onWarmupModeChange:d,idPrefix:l})=>e.jsxs("div",{className:"space-y-3 rounded-lg border p-3",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Paramètres d'échauffement"}),e.jsxs(er,{value:n,onValueChange:o=>{d(o==="duration"?"duration":"reps"),s(o==="duration"?{warmup_reps:null,warmup_duration:t.warmup_duration??0}:{warmup_duration:null,warmup_reps:t.warmup_reps??0})},className:"grid gap-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{value:"reps",id:`${l}-warmup-reps`}),e.jsx(F,{htmlFor:`${l}-warmup-reps`,children:"Nombre de répétitions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ve,{value:"duration",id:`${l}-warmup-duration`}),e.jsx(F,{htmlFor:`${l}-warmup-duration`,children:"Durée (secondes)"})]})]}),n==="duration"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Durée (s)"}),e.jsx(G,{type:"number",value:t.warmup_duration??"",onChange:o=>s({warmup_duration:o.target.value===""?null:Number(o.target.value)})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nombre de répétitions"}),e.jsx(G,{type:"number",value:t.warmup_reps??"",onChange:o=>s({warmup_reps:o.target.value===""?null:Number(o.target.value)})})]})]});function Kn(){const{toast:t}=Pr(),n=Dr(),[s,d]=a.useState(!1),[l,o]=a.useState(null),[p,m]=a.useState(!1),[g,i]=a.useState(!1),[x,f]=a.useState(null),[_,b]=a.useState(null),[N,I]=a.useState(null),[M,C]=a.useState("reps"),[w,se]=a.useState("reps"),[J,V]=a.useState(!1),[k,q]=a.useState(""),[Z,j]=a.useState("sessions"),[A,H]=a.useState(null),ee=async(r,u)=>{if(r.size>10485760){t({title:"Fichier trop volumineux",description:"La taille maximale est de 10 Mo.",variant:"destructive"});return}V(!0);try{const R=r.name.split(".").pop()??"gif",$=`exercises/${Date.now()}-${Math.random().toString(36).slice(2)}.${R}`,{error:ce}=await dt.storage.from("exercise-gifs").upload($,r,{upsert:!1});if(ce)throw ce;const{data:kr}=dt.storage.from("exercise-gifs").getPublicUrl($);u(kr.publicUrl),t({title:"Image uploadée"})}catch(R){const $=R instanceof Error?R.message:"Réessayez.";t({title:"Erreur d'upload",description:$,variant:"destructive"})}finally{V(!1)}},[O,T]=a.useState({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),[P,X]=a.useState({...rn()});a.useEffect(()=>{x&&se(x.warmup_duration!=null?"duration":"reps")},[x]);const{data:B,isLoading:he,error:ie,refetch:ge}=je({queryKey:["exercises"],queryFn:()=>U.getExercises()}),{data:ne,isLoading:c,error:y,refetch:S}=je({queryKey:["strength_catalog"],queryFn:()=>U.getStrengthSessions()}),{data:h}=je({queryKey:["strength_folders","session"],queryFn:()=>U.getStrengthFolders("session")}),{data:E}=je({queryKey:["strength_folders","exercise"],queryFn:()=>U.getStrengthFolders("exercise")}),D=r=>{const u=r.items?.reduce((v,R)=>v+(R.sets||0),0)??0;return e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"capitalize",children:r.cycle}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[r.items?.length??0," exos"]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[u," séries"]})]})},L=a.useMemo(()=>{if(!ne)return[];if(!k.trim())return ne;const r=k.toLowerCase();return ne.filter(u=>u.title?.toLowerCase().includes(r))},[ne,k]),K=L.filter(r=>!r.folder_id),oe=a.useMemo(()=>{const r=new Map;for(const u of L)if(u.folder_id){const v=r.get(u.folder_id)??[];v.push(u),r.set(u.folder_id,v)}return r},[L]),xr=a.useMemo(()=>(B??[]).filter(r=>!r.folder_id),[B]),fr=a.useMemo(()=>{const r=new Map;for(const u of B??[])if(u.folder_id){const v=r.get(u.folder_id)??[];v.push(u),r.set(u.folder_id,v)}return r},[B]),hr=Y({mutationFn:r=>U.createExercise(r),onSuccess:()=>{n.invalidateQueries({queryKey:["exercises"]}),m(!1),t({title:"Exercice ajouté"})}}),tt=Y({mutationFn:r=>U.createStrengthSession(r),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),d(!1),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),t({title:"Séance créée avec succès"})}}),gr=Y({mutationFn:r=>U.updateExercise(r),onSuccess:()=>{n.invalidateQueries({queryKey:["exercises"]}),n.invalidateQueries({queryKey:["strength_catalog"]}),i(!1),f(null),t({title:"Exercice mis à jour"})}}),vr=Y({mutationFn:r=>U.deleteExercise(r),onSuccess:()=>{n.invalidateQueries({queryKey:["exercises"]}),n.invalidateQueries({queryKey:["strength_catalog"]}),I(null),t({title:"Exercice supprimé"})}}),Ee=Y({mutationFn:r=>U.deleteStrengthSession(r),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),b(null),t({title:"Séance supprimée"})}}),rt=Y({mutationFn:r=>U.updateStrengthSession(r),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),d(!1),o(null),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),t({title:"Séance mise à jour"})}}),jr=Y({mutationFn:r=>U.persistStrengthSessionOrder(r)}),yr=Y({mutationFn:({name:r,type:u})=>U.createStrengthFolder(r,u),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_folders"]}),t({title:"Dossier créé"})}}),st=Y({mutationFn:({id:r,name:u})=>U.renameStrengthFolder(r,u),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_folders"]}),t({title:"Dossier renommé"})}}),nt=Y({mutationFn:r=>U.deleteStrengthFolder(r),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_folders"]}),n.invalidateQueries({queryKey:["strength_catalog"]}),n.invalidateQueries({queryKey:["exercises"]}),t({title:"Dossier supprimé"})}}),ke=Y({mutationFn:({itemId:r,folderId:u,table:v})=>U.moveToFolder(r,u,v),onSuccess:()=>{n.invalidateQueries({queryKey:["strength_catalog"]}),n.invalidateQueries({queryKey:["exercises"]}),t({title:"Déplacé"})}}),br=()=>{d(!1),o(null),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null})},ve=r=>{o(r.id),T({title:r.title??"",description:r.description??"",cycle:en(r.cycle),items:r.items?.map(u=>({exercise_id:u.exercise_id,order_index:u.order_index??0,sets:u.sets,reps:u.reps,rest_seconds:u.rest_seconds,percent_1rm:u.percent_1rm,cycle_type:u.cycle_type,notes:u.notes??""}))??[],folder_id:r.folder_id??null}),d(!0)},Nr=r=>{f(r),i(!0)},wr=()=>{const r={...O,items:Re(O.items)};l?rt.mutate({...r,id:l}):tt.mutate(r)},Re=r=>r.map((u,v)=>({...u,order_index:v})),_r=()=>{const r=B?.[0];T(u=>({...u,items:[...u.items,r?Te(r,u.cycle,u.items.length):{exercise_id:1,order_index:u.items.length,sets:0,reps:0,rest_seconds:0,percent_1rm:0}]}))},Sr=(r,u,v)=>{const R=[...O.items];if(u==="exercise_id"){const $=B?.find(ce=>ce.id===v);$?R[r]=Te($,O.cycle,R[r].order_index??r,R[r]):R[r]={...R[r],exercise_id:Number(v)}}else R[r]={...R[r],[u]:v};T({...O,items:R})},Cr=r=>{const u=Re(O.items.filter((v,R)=>R!==r));T({...O,items:u})},Er=(r,u)=>{if(r===u)return;const v=[...O.items],[R]=v.splice(r,1);v.splice(u,0,R);const $=Re(v);T({...O,items:$}),l&&jr.mutate({id:l,title:O.title,description:O.description,cycle:O.cycle,items:$})},at=e.jsx(Ne,{open:g,onOpenChange:i,children:e.jsxs(we,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto pb-safe",children:[e.jsx(Le,{children:e.jsx(Ke,{children:"Modifier l'exercice"})}),x&&e.jsxs("div",{className:"space-y-4",children:[x.exercise_type==="warmup"?e.jsx(Dt,{exercise:x,warmupMode:w,onChange:r=>f(u=>u&&{...u,...r}),onWarmupModeChange:se,idPrefix:"edit"}):null,e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nom"}),e.jsx(G,{value:x.nom_exercice,onChange:r=>f({...x,nom_exercice:r.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Description"}),e.jsx(be,{value:x.description??"",onChange:r=>f({...x,description:r.target.value===""?null:r.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Illustration (GIF)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:x.illustration_gif??"",onChange:r=>f({...x,illustration_gif:r.target.value===""?null:r.target.value}),placeholder:"https://...",className:"flex-1"}),e.jsx(ae,{type:"button",variant:"outline",size:"icon",disabled:J,onClick:()=>{const r=document.createElement("input");r.type="file",r.accept="image/*,.gif",r.onchange=u=>{const v=u.target.files?.[0];v&&ee(v,R=>f($=>$&&{...$,illustration_gif:R}))},r.click()},"aria-label":"Uploader une image",children:J?e.jsx(bt,{className:"h-4 w-4 animate-spin"}):e.jsx(Nt,{className:"h-4 w-4"})})]}),x.illustration_gif&&e.jsx("img",{src:x.illustration_gif,alt:"Aperçu",className:"mt-2 h-20 w-20 rounded-lg object-cover border"})]}),x.exercise_type!=="warmup"?e.jsx(Rt,{exercise:x,onChange:r=>f(u=>u&&{...u,...r})}):null,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{id:"warmup-flag-edit",checked:x.exercise_type==="warmup",onCheckedChange:r=>f({...x,exercise_type:r===!0?"warmup":"strength"})}),e.jsx(F,{htmlFor:"warmup-flag-edit",children:"Exercice d'échauffement (warmup)"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ae,{variant:"outline",onClick:()=>{i(!1),f(null)},className:"h-10",children:"Annuler"}),e.jsx(ae,{variant:"default",onClick:()=>{x?.id&&gr.mutate(x)},disabled:!x.nom_exercice.trim(),className:"h-10",children:"Enregistrer"})]})]})]})}),lt=e.jsx(Ne,{open:p,onOpenChange:m,children:e.jsxs(we,{className:"sm:max-w-3xl max-h-[85vh] overflow-y-auto pb-safe",children:[e.jsx(Le,{children:e.jsx(Ke,{children:"Créer un exercice"})}),e.jsxs("div",{className:"space-y-4",children:[P.exercise_type==="warmup"?e.jsx(Dt,{exercise:P,warmupMode:M,onChange:r=>X(u=>({...u,...r})),onWarmupModeChange:C,idPrefix:"create"}):null,e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Nom"}),e.jsx(G,{value:P.nom_exercice,onChange:r=>X({...P,nom_exercice:r.target.value}),placeholder:"ex: Rotations Élastique"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Description"}),e.jsx(be,{value:P.description??"",onChange:r=>X({...P,description:r.target.value===""?null:r.target.value}),placeholder:"Détails, consignes..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{children:"Illustration (GIF)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(G,{value:P.illustration_gif??"",onChange:r=>X({...P,illustration_gif:r.target.value===""?null:r.target.value}),placeholder:"https://...",className:"flex-1"}),e.jsx(ae,{type:"button",variant:"outline",size:"icon",disabled:J,onClick:()=>{const r=document.createElement("input");r.type="file",r.accept="image/*,.gif",r.onchange=u=>{const v=u.target.files?.[0];v&&ee(v,R=>X($=>({...$,illustration_gif:R})))},r.click()},"aria-label":"Uploader une image",children:J?e.jsx(bt,{className:"h-4 w-4 animate-spin"}):e.jsx(Nt,{className:"h-4 w-4"})})]}),P.illustration_gif&&e.jsx("img",{src:P.illustration_gif,alt:"Aperçu",className:"mt-2 h-20 w-20 rounded-lg object-cover border"})]}),P.exercise_type!=="warmup"?e.jsx(Rt,{exercise:P,onChange:r=>X(u=>({...u,...r}))}):null,e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{id:"warmup-flag",checked:P.exercise_type==="warmup",onCheckedChange:r=>X({...P,exercise_type:r===!0?"warmup":"strength"})}),e.jsx(F,{htmlFor:"warmup-flag",children:"Exercice d'échauffement (warmup)"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ae,{variant:"outline",onClick:()=>m(!1),className:"h-10",children:"Annuler"}),e.jsx(ae,{variant:"default",onClick:()=>hr.mutate(P),disabled:!P.nom_exercice.trim(),className:"h-10",children:"Enregistrer"})]})]})]})}),it=e.jsx(mt,{open:!!_,onOpenChange:r=>{r||b(null)},children:e.jsxs(pt,{children:[e.jsxs(xt,{children:[e.jsx(ft,{children:"Supprimer la séance ?"}),e.jsxs(ht,{children:['Cette action est définitive. La séance "',_?.title,'" sera supprimée.']})]}),e.jsxs(gt,{children:[e.jsx(vt,{children:"Annuler"}),e.jsx(jt,{onClick:()=>{_?.id&&Ee.mutate(_.id)},children:"Supprimer"})]})]})}),ot=e.jsx(mt,{open:!!N,onOpenChange:r=>{r||I(null)},children:e.jsxs(pt,{children:[e.jsxs(xt,{children:[e.jsx(ft,{children:"Supprimer l'exercice ?"}),e.jsxs(ht,{children:[`Cette action est définitive. L'exercice "`,N?.nom_exercice,'" sera supprimé.']})]}),e.jsxs(gt,{children:[e.jsx(vt,{children:"Annuler"}),e.jsx(jt,{onClick:()=>{N?.id&&vr.mutate(N.id)},children:"Supprimer"})]})]})});if(s)return e.jsxs(e.Fragment,{children:[lt,at,it,ot,e.jsx(Zs,{session:O,exercises:B??[],editingSessionId:l,folders:h,onSessionChange:T,onCycleChange:r=>{const u=O.items.map((v,R)=>{const $=B?.find(ce=>ce.id===v.exercise_id);return $?Te($,r,R,v):{...v,cycle_type:r}});T({...O,cycle:r,items:u})},onSave:wr,onCancel:br,onAddItem:_r,onUpdateItem:Sr,onRemoveItem:Cr,onReorderItems:Er,onExerciseDialogOpen:()=>m(!0),isSaving:tt.isPending||rt.isPending})]});if(he)return e.jsxs("div",{className:"space-y-4 p-4",children:[e.jsx(De,{className:"h-7 w-64"}),e.jsx(De,{className:"h-10 w-full rounded-2xl"}),e.jsx("div",{className:"space-y-3",children:Array.from({length:4}).map((r,u)=>e.jsx(De,{className:"h-20 w-full rounded-2xl"},u))})]});if(ie)return e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(ns,{className:"h-12 w-12 text-destructive mb-4"}),e.jsx("h3",{className:"font-semibold",children:"Impossible de charger les données"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:ie instanceof Error?ie.message:"Une erreur s'est produite"}),e.jsx(ae,{variant:"default",onClick:()=>ge(),className:"mt-4 h-12 md:h-10",children:"Réessayer"})]});const ct=r=>e.jsxs("div",{className:"flex items-center gap-3 rounded-xl px-3 py-2 hover:bg-muted/50",children:[r.illustration_gif?e.jsx("button",{type:"button",className:"shrink-0 rounded-lg overflow-hidden border border-border bg-muted",onClick:()=>H({url:r.illustration_gif,name:r.nom_exercice}),children:e.jsx("img",{src:r.illustration_gif,alt:r.nom_exercice,className:"h-10 w-10 object-cover",loading:"lazy",decoding:"async"})}):e.jsx("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-muted",children:e.jsx(Ye,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate text-sm font-medium",children:r.nom_exercice}),e.jsx("div",{className:"text-xs text-muted-foreground",children:r.exercise_type==="warmup"?"Échauffement":"Séries de travail"})]}),e.jsxs("div",{className:"flex shrink-0 items-center gap-1",children:[e.jsx(Oe,{folders:E??[],currentFolderId:r.folder_id,onMove:u=>ke.mutate({itemId:r.id,folderId:u,table:"dim_exercices"})}),e.jsx("button",{type:"button",onClick:()=>Nr(r),className:"inline-flex h-9 w-9 items-center justify-center rounded-full hover:bg-muted","aria-label":"Modifier",children:e.jsx(as,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:()=>I(r),className:"inline-flex h-9 w-9 items-center justify-center rounded-full text-destructive hover:bg-destructive/10","aria-label":"Supprimer",children:e.jsx(Je,{className:"h-4 w-4"})})]})]},r.id);return e.jsxs("div",{children:[lt,at,it,ot,A&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-center justify-center p-4",onClick:()=>H(null),children:e.jsxs("div",{className:"relative max-w-md w-full",onClick:r=>r.stopPropagation(),children:[e.jsx("img",{src:A.url,alt:A.name,className:"w-full max-h-[80vh] object-contain rounded-2xl"}),e.jsx("p",{className:"mt-2 text-sm font-medium text-center text-white",children:A.name})]})}),e.jsxs("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold",children:"Musculation"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Catalogue"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:()=>{const r=prompt("Nom du dossier");r?.trim()&&yr.mutate({name:r.trim(),type:Z==="sessions"?"session":"exercise"})},className:"inline-flex items-center gap-2 rounded-full border border-border px-3 py-2 text-xs font-semibold hover:bg-muted",children:[e.jsx(Br,{className:"h-4 w-4"})," Dossier"]}),Z==="sessions"?e.jsxs("button",{type:"button",onClick:()=>{o(null),T({title:"",description:"",cycle:"endurance",items:[],folder_id:null}),d(!0)},className:"inline-flex items-center gap-2 rounded-full bg-primary px-3 py-2 text-xs font-semibold text-primary-foreground",children:[e.jsx(_e,{className:"h-4 w-4"})," Nouvelle"]}):e.jsxs("button",{type:"button",onClick:()=>m(!0),className:"inline-flex items-center gap-2 rounded-full bg-primary px-3 py-2 text-xs font-semibold text-primary-foreground",children:[e.jsx(_e,{className:"h-4 w-4"})," Ajouter"]})]})]}),e.jsx("div",{className:"p-4 space-y-4",children:e.jsxs(Mt,{value:Z,onValueChange:r=>j(r),children:[e.jsxs(At,{className:"grid w-full grid-cols-2",children:[e.jsx(Ge,{value:"sessions",children:"Séances"}),e.jsxs(Ge,{value:"exercises",children:["Exercices (",B?.length??0,")"]})]}),e.jsxs(Ue,{value:"sessions",className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-border bg-card px-3 py-2",children:[e.jsx(Pt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("input",{className:"w-full bg-transparent text-sm outline-none placeholder:text-muted-foreground",placeholder:"Rechercher une séance",value:k,onChange:r=>q(r.target.value)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(yt,{sessions:K,isLoading:c,error:y,renderTitle:r=>r.title??"Sans titre",renderMetrics:D,renderExtraActions:r=>e.jsx(Oe,{folders:h??[],currentFolderId:r.folder_id,onMove:u=>ke.mutate({itemId:r.id,folderId:u,table:"strength_sessions"})}),onPreview:r=>ve(r),onEdit:r=>ve(r),onDelete:r=>b(r),canDelete:()=>!0,isDeleting:Ee.isPending}),h?.map(r=>{const u=oe.get(r.id)??[];return e.jsx(Et,{name:r.name,count:u.length,onRename:v=>st.mutate({id:r.id,name:v}),onDelete:()=>nt.mutate(r.id),children:u.length>0?e.jsx(yt,{sessions:u,renderTitle:v=>v.title??"Sans titre",renderMetrics:D,renderExtraActions:v=>e.jsx(Oe,{folders:h??[],currentFolderId:v.folder_id,onMove:R=>ke.mutate({itemId:v.id,folderId:R,table:"strength_sessions"})}),onPreview:v=>ve(v),onEdit:v=>ve(v),onDelete:v=>b(v),canDelete:()=>!0,isDeleting:Ee.isPending}):e.jsx("div",{className:"rounded-xl border border-dashed border-border px-3 py-4 text-center text-xs text-muted-foreground",children:"Dossier vide"})},r.id)})]})]}),e.jsxs(Ue,{value:"exercises",className:"space-y-3 mt-4",children:[e.jsx("div",{className:"space-y-1",children:xr.map(ct)}),E?.map(r=>{const u=fr.get(r.id)??[];return e.jsx(Et,{name:r.name,count:u.length,onRename:v=>st.mutate({id:r.id,name:v}),onDelete:()=>nt.mutate(r.id),children:u.length>0?e.jsx("div",{className:"space-y-1",children:u.map(ct)}):e.jsx("div",{className:"rounded-xl border border-dashed border-border px-3 py-4 text-center text-xs text-muted-foreground",children:"Dossier vide"})},r.id)})]})]})})]})}export{Te as createStrengthItemFromExercise,Kn as default};
